import{_ as K,a as Q,u as q,r as m,m as G,n as J,d as n,b as P,o as f,w as t,g as e,h as C,t as R,f as A,c as k,F as L,v as T,j as W,E as X}from"./index-BwIl0pzA.js";import{A as z}from"./apiLab-oBXq41b1.js";import{e as Y}from"./exportToExcel-Kkbtezxo.js";import{A as O}from"./apiCommon-DdZa9yuA.js";import{i as Z}from"./common-C7emv0-E.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const ee={class:"d-flex flex-wrap"},te={class:"d-flex flex-wrap"},le={__name:"IngredientRegPop",props:{title:{type:String},id:{type:String},mode:{type:String}},emits:["saved","close-dialog"],setup(H,{emit:E}){const{userId:$}=Q(),{vError:w}=q(),g=m([]),x=m([]),y=m([]),_=m([]),o=G({krIngredientName:"",enIngredientName:"",cnIngredientName:"",casNo:"",functionCd:"",etc:""}),b=H,u=E,I=async()=>{const p={...o,limitCountries:y.value,bannedCountries:_.value,userId:$};try{const l=await z.saveIngredientInfo(p);u("saved",l),u("close-dialog")}catch(l){w(l.message)}};return J(async()=>{if(g.value=await O.getCodeList("fn_Cd"),x.value=await O.getCodeList("country_cd"),b.mode==="U"){const p=await z.getIngredientInfo(b.id);Object.assign(o,p),y.value=p.limitCountries,_.value=p.bannedCountries}}),(p,l)=>{const N=n("v-toolbar-title"),j=n("v-spacer"),c=n("v-icon"),s=n("v-btn"),B=n("v-toolbar"),i=n("v-col"),r=n("v-row"),v=n("v-text-field"),D=n("v-select"),V=n("v-card-subtitle"),h=n("v-checkbox"),S=n("v-card-text"),F=n("v-form"),M=n("v-card");return f(),P(M,{class:"no-scroll"},{default:t(()=>[e(B,{height:"40",class:"d-flex align-center justify-space-between px-2 toolbar-Head"},{default:t(()=>[e(N,null,{default:t(()=>l[10]||(l[10]=[C("거래처 조회")])),_:1}),e(j),e(s,{icon:"",onClick:l[0]||(l[0]=a=>u("close-dialog"))},{default:t(()=>[e(c,null,{default:t(()=>l[11]||(l[11]=[C("mdi-close")])),_:1})]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(F,{ref:"vform"},{default:t(()=>[e(r,null,{default:t(()=>[e(i,{class:"mt-3"},{default:t(()=>[C(" - 성분코드 : "+R(b.id),1)]),_:1})]),_:1}),e(r,{class:"mr-1"},{default:t(()=>[e(i,{class:"mt-2 ml-3",style:{padding:"0px"}},{default:t(()=>[e(v,{modelValue:o.krIngredientName,"onUpdate:modelValue":l[1]||(l[1]=a=>o.krIngredientName=a),density:"compact",label:"국문 성분명",placeholder:"국문성분명을 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{class:"mr-1"},{default:t(()=>[e(i,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(v,{modelValue:o.enIngredientName,"onUpdate:modelValue":l[2]||(l[2]=a=>o.enIngredientName=a),density:"compact",label:"영문 성분명",placeholder:"영문성분명을 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{class:"mr-1"},{default:t(()=>[e(i,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(v,{modelValue:o.cnIngredientName,"onUpdate:modelValue":l[3]||(l[3]=a=>o.cnIngredientName=a),label:"중문 성분명",placeholder:"중문성분명을 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{class:"mr-1"},{default:t(()=>[e(i,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(v,{modelValue:o.casNo,"onUpdate:modelValue":l[4]||(l[4]=a=>o.casNo=a),label:"CAS No.",placeholder:"CAS No를 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{class:"mr-1"},{default:t(()=>[e(i,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(D,{modelValue:o.functionCd,"onUpdate:modelValue":l[5]||(l[5]=a=>o.functionCd=a),label:"function",items:g.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(r,{class:"mr-1"},{default:t(()=>[e(i,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(v,{modelValue:o.etc,"onUpdate:modelValue":l[6]||(l[6]=a=>o.etc=a),label:"비고",placeholder:"비고를 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(S,{style:{height:"60px"}},{default:t(()=>[e(r,null,{default:t(()=>[e(i,null,{default:t(()=>[e(V,null,{default:t(()=>l[12]||(l[12]=[C(" -한도 국가")])),_:1}),A("div",ee,[(f(!0),k(L,null,T(x.value,a=>(f(),P(h,{key:a.code,label:a.codeNm,value:a.code,class:"ml-1",density:"compact",modelValue:y.value,"onUpdate:modelValue":l[7]||(l[7]=d=>y.value=d)},null,8,["label","value","modelValue"]))),128))])]),_:1}),e(i,null,{default:t(()=>[e(V,null,{default:t(()=>l[13]||(l[13]=[C(" -금지 국가")])),_:1}),A("div",te,[(f(!0),k(L,null,T(x.value,a=>(f(),P(h,{key:a.code,label:a.codeNm,value:a.code,class:"ml-1",density:"compact",modelValue:_.value,"onUpdate:modelValue":l[8]||(l[8]=d=>_.value=d)},null,8,["label","value","modelValue"]))),128))])]),_:1})]),_:1}),e(r,null,{default:t(()=>[e(i,{class:"d-flex justify-end align-center",style:{gap:"5px"}},{default:t(()=>[e(s,{color:"indigo-darken-4",text:"저장",variant:"tonal",depressed:"",onClick:I}),e(s,{text:"닫기",variant:"tonal",onClick:l[9]||(l[9]=a=>u("close-dialog"))})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},ne=K(le,[["__scopeId","data-v-5caad690"]]),ae=["onClick"],pe={__name:"IngredientList",setup(H){const{vError:E,vSuccess:$}=q(),w=m(""),g=m(!1),x=m(!1),y=m(null),_=m([]),o=m(""),b=m(""),u=G({ingredientName:"",functionNm:"",casNo:""}),I=m([{title:"성분코드",key:"ingredientCode",align:"center",width:"70px"},{title:"국문성분명",key:"krIngredientName",align:"start",width:"240px"},{title:"영문성분명",key:"enIngredientName",align:"start",width:"240px"},{title:"중문성분명",key:"cnIngredientName",align:"start",width:"250px"},{title:"CAS No",key:"casNo",align:"start",width:"150px"},{title:"function",key:"functionNm",align:"start",width:"150px"},{title:"등록자",key:"regName",align:"center",width:"70px"},{title:"수정자",key:"updName",align:"center",width:"70px"},{title:"수정일자",key:"updDate",align:"center",width:"100px"},{title:"비고",key:"etc",align:"start",width:"110px"}]),p=(c,s)=>{console.log("item",c.ingredientCode),Z(c.ingredientCode)?(o.value="N",b.value="성분 등록"):(o.value="U",b.value="성분 상세정보",w.value=c.ingredientCode),g.value=!0},l=c=>{$(c),N()},N=async()=>{x.value=!0;try{const c={...u};_.value=await z.getIngredientList(c)}catch(c){E("조회 중 오류가 발생했습니다."+c)}finally{x.value=!1}};J(async()=>{N()});const j=()=>{Y(I,_.value,"성분_목록")};return(c,s)=>{const B=n("v-breadcrumbs"),i=n("v-text-field"),r=n("v-btn"),v=n("v-col"),D=n("v-form"),V=n("v-row"),h=n("v-card-text"),S=n("v-card"),F=n("v-spacer"),M=n("v-data-table"),a=n("v-dialog");return f(),k(L,null,[e(B,{items:["MES","연구관리","성분정보"],class:"custom-breadcrumbs"}),e(S,{class:"pa-1",style:{height:"60px"}},{default:t(()=>[e(h,null,{default:t(()=>[e(V,null,{default:t(()=>[e(D,{ref_key:"srhForm",ref:y,onSubmit:W(N,["prevent"])},{default:t(()=>[e(v,{class:"d-flex flex-row ga-3"},{default:t(()=>[e(i,{modelValue:u.ingredientName,"onUpdate:modelValue":s[0]||(s[0]=d=>u.ingredientName=d),density:"compact",label:"성분명",placeholder:"성분명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(i,{modelValue:u.functionNm,"onUpdate:modelValue":s[1]||(s[1]=d=>u.functionNm=d),density:"compact",label:"function명",placeholder:"function명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(i,{modelValue:u.regName,"onUpdate:modelValue":s[2]||(s[2]=d=>u.regName=d),density:"compact",label:"등록자",placeholder:"등록자명을 입력해주세요",variant:"underlined",style:{width:"150px"}},null,8,["modelValue"]),e(r,{text:"조회",color:"brown-lighten-4",type:"submit"}),e(r,{text:"초기화",onClick:s[3]||(s[3]=d=>y.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(F),e(V,null,{default:t(()=>[e(v,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:t(()=>[e(r,{color:"brown-lighten-4",text:"신규",onClick:p}),e(r,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:j})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(v,{class:"pa-0"},{default:t(()=>[e(M,{headers:I.value,items:_.value,loading:x.value,"items-per-page":15,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요",density:"compact","fixed-header":"",height:"690px"},{headers:t(({columns:d})=>[A("tr",null,[(f(!0),k(L,null,T(d,U=>(f(),k("th",{key:U.key,class:"custom-header",style:X([{height:"40px"},{textAlign:"center"}])},R(U.title),1))),128))])]),"item.ingredientCode":t(({item:d,index:U})=>[A("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:oe=>p(d,U)},R(d.ingredientCode),9,ae)]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),e(a,{modelValue:g.value,"onUpdate:modelValue":s[5]||(s[5]=d=>g.value=d),width:"800px",height:"630px",persistent:""},{default:t(()=>[e(ne,{title:b.value,mode:o.value,id:w.value,onSaved:l,onCloseDialog:s[4]||(s[4]=d=>g.value=!1)},null,8,["title","mode","id"])]),_:1},8,["modelValue"])],64)}}};export{pe as default};
