import{_ as Q,u as j,r as p,m as J,d as r,b as R,o as C,w as n,g as l,j as Y,f as t,c as E,F as B,t as G,v as a,H as T,a as z,n as K,e as W,E as X,h as k,i as L,G as Z}from"./index-B3k6qWTO.js";import{e as $,g as ee}from"./common-5ptPHjCv.js";import{_ as te,a as q}from"./SingleFileUpload-DOsv-ewV.js";import{A as O}from"./apiOrders-C4cqJx2A.js";import"./apiCommon-Cgp-9u3n.js";import"./format-CBpsKyOP.js";const le={class:"d-flex ga-4 ml-4"},se={class:"d-flex ga-4 justify-end"},ne={__name:"UserListPop",emits:["selected","close-dialog"],setup(M,{emit:f}){const{vError:S}=j(),v=f,_=p(null),D=p([]),h=p(!1),s=p([{title:"No.",key:"id"},{title:"사용자ID",key:"userId"},{title:"사용자명",key:"memberNm"},{title:"부서",key:"deptNm"},{title:"직급",key:"jobPosition"}]),d=J({userId:"",memberNm:"",useYn:"Y"}),g=async()=>{h.value=!0;const V={...d};try{D.value=await T.getUserList(V)}catch(u){S(u)}finally{h.value=!1}},x=(V,u)=>{v("selected",u.item.userId,u.item.memberNm),v("close-dialog")},y=()=>{_.value.reset()};return(V,u)=>{const A=r("v-card-item"),w=r("v-text-field"),b=r("v-btn"),i=r("v-form"),e=r("v-col"),I=r("v-row"),N=r("v-data-table"),U=r("v-card");return C(),R(U,{class:"pa-3"},{default:n(()=>[l(A,{title:"사용자 조회"}),l(I,null,{default:n(()=>[l(e,{style:{height:"20px",padding:"3px"}},{default:n(()=>[l(i,{ref_key:"srhForm",ref:_,onSubmit:Y(g,["prevent"])},{default:n(()=>[t("div",le,[l(w,{modelValue:d.memberNm,"onUpdate:modelValue":u[0]||(u[0]=m=>d.memberNm=m),density:"compact",label:"사용자명",placeholder:"사용자명을 입력해주세요",variant:"underlined"},null,8,["modelValue"]),l(w,{modelValue:d.userId,"onUpdate:modelValue":u[1]||(u[1]=m=>d.userId=m),density:"compact",label:"사용자 ID",placeholder:"사용자 ID를 입력해주세요",variant:"underlined"},null,8,["modelValue"]),l(b,{color:"#EFEBE9",text:"조회",type:"submit"}),l(b,{class:"mr-3",text:"초기화",onClick:y})])]),_:1},512)]),_:1})]),_:1}),l(I,null,{default:n(()=>[l(e,null,{default:n(()=>[l(N,{headers:s.value,items:D.value,loading:h.value,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요","items-per-page":15,style:{height:"400px"},"onClick:row":x},{headers:n(({columns:m})=>[t("tr",null,[(C(!0),E(B,null,G(m,c=>(C(),E("th",{key:c.key,class:"custom-header"},a(c.title),1))),128))])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),l(I,{class:"mt-10",style:{height:"70px"}},{default:n(()=>[l(e,null,{default:n(()=>[t("div",se,[l(b,{dense:"",text:"선택",color:"brown-lighten-4"}),l(b,{text:"닫기",variant:"tonal",onClick:u[2]||(u[2]=m=>v("close-dialog"))})])]),_:1})]),_:1})]),_:1})}}},oe=Q(ne,[["__scopeId","data-v-1607bce8"]]),ae={class:"d-flex justify-end"},re={class:"approval-user"},de={style:{height:"80px"}},ue={class:"approval-date"},ie={style:{height:"30px"}},me={colspan:"3"},pe={colspan:"4",style:{height:"120px","text-align":"center"}},ve={class:"d-flex ga-4 justify-end"},fe={__name:"OrderNew",setup(M){const f=p(!1),{userId:S,memberNm:v,deptNm:_}=z(),{vError:D,vSuccess:h}=j(),s=p({orderDate:$(),seq:"",customerNm:"",itemNm:"",orderQty:0,dueDate:"",draftNm:"",draftDept:"",draftDate:"",draftUserId:""}),d=p({businessUserId:"",productUserId:"",purchaseUserId:"",qcUserId:"",labUserId:"",businessApprovalDate:"",productApprovalDate:"",purchaseApprovalDate:"",qcApprovalDate:"",labApprovalDate:""}),g=p(""),x=p(null),y=p(null),V=(i,e)=>{g.value=e,d.value.labUserId=i},u=async()=>{s.value.draftNm=v,s.value.draftDept=_,s.value.draftDate=$(),s.value.draftUserId=S,s.value.orderQty=ee(s.value.orderQty);const i=new FormData;i.append("orderInfo",JSON.stringify(s.value)),i.append("approval",JSON.stringify(d.value)),x.value&&i.append("orderFile",x.value),y.value&&i.append("prodFile",y.value);try{const e=await O.saveOrderInfo(i);h(e),w.push({name:"OrderList"})}catch(e){D(e.response)}};K(async()=>{s.value.seq=await O.getSeq();const i=await O.getApprovalInfo();Object.assign(d.value,i)});const A=()=>{s.value.orderQty===0&&(s.value.orderQty="")},w=W(),b=()=>{w.push({name:"OrderList"})};return(i,e)=>{const I=r("v-breadcrumbs"),N=r("v-btn"),U=r("v-table"),m=r("v-col"),c=r("v-row"),F=r("v-text-field"),P=r("v-dialog"),H=X("comma-number");return C(),E(B,null,[l(I,{items:["MES","발주관리","발주 등록"]}),l(c,{class:"flex-wrap"},{default:n(()=>[l(m,null,{default:n(()=>[t("div",ae,[l(U,{class:"approval-table"},{default:n(()=>[t("tbody",null,[e[15]||(e[15]=t("tr",null,[t("th",{style:{width:"10px"},rowspan:"3"},[k("결"),t("br"),t("br"),t("br"),k("재")]),t("th",{style:{height:"30px","text-align":"center"}},"기안자"),t("th",{style:{height:"30px","text-align":"center"}},"영업관리"),t("th",{style:{height:"30px","text-align":"center"}},"생산관리"),t("th",{style:{height:"30px","text-align":"center"}},"구매부"),t("th",{style:{height:"30px","text-align":"center"}},"품질관리"),t("th",{style:{height:"30px","text-align":"center"}},"연구소")],-1)),t("tr",re,[t("td",de,a(L(v)),1),t("td",null,[t("span",null,a(d.value.businessUserId),1)]),t("td",null,[t("span",null,a(d.value.productUserId),1)]),t("td",null,[t("span",null,a(d.value.purchaseUserId),1)]),t("td",null,[t("span",null,a(d.value.qcUserId),1)]),t("td",null,[t("span",null,a(g.value),1),l(N,{width:"20px",text:"결재자",modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=o=>g.value=o),onClick:e[1]||(e[1]=o=>f.value=!0)},null,8,["modelValue"])])]),t("tr",ue,[t("td",ie,a(s.value.orderDate),1),e[10]||(e[10]=t("td",{style:{height:"30px"}},"결재일자",-1)),e[11]||(e[11]=t("td",{style:{height:"30px"}},"결재일자",-1)),e[12]||(e[12]=t("td",{style:{height:"30px"}},"결재일자",-1)),e[13]||(e[13]=t("td",{style:{height:"30px"}},"결재일자",-1)),e[14]||(e[14]=t("td",{style:{height:"30px"}},"결재일자",-1))])])]),_:1})])]),_:1})]),_:1}),l(c,null,{default:n(()=>[l(m,null,{default:n(()=>[l(U,{class:"order-table"},{default:n(()=>[t("tbody",null,[t("tr",null,[e[16]||(e[16]=t("th",null,"문서번호",-1)),t("td",null,a(s.value.orderDate)+" - "+a(s.value.seq),1),e[17]||(e[17]=t("th",null,"처리기한",-1)),e[18]||(e[18]=t("td",null,"즉시",-1))]),t("tr",null,[e[19]||(e[19]=t("th",null,"보존년한",-1)),e[20]||(e[20]=t("td",null,"5년",-1)),e[21]||(e[21]=t("th",null,"기안일자",-1)),t("td",null,a(s.value.orderDate),1)]),t("tr",null,[e[22]||(e[22]=t("th",null,"기안부서",-1)),t("td",null,a(L(_)),1),e[23]||(e[23]=t("th",null,"기안자",-1)),t("td",null,a(L(v)),1)]),t("tr",null,[e[24]||(e[24]=t("th",null,"제목",-1)),t("td",me,a(s.value.customerNm)+"   "+a(s.value.itemNm)+"    발주서 및 제품 사양서 검토 요청의 건 ",1)]),t("tr",null,[t("td",pe,[k(a(s.value.customerNm)+"    "+a(s.value.itemNm)+"    발주서 및 제품 사양서 기안하오니 검토하여 주시기 바랍니다.",1),e[25]||(e[25]=t("br",null,null,-1)),e[26]||(e[26]=t("br",null,null,-1)),e[27]||(e[27]=k(" - 아 래- "))])]),t("tr",null,[e[28]||(e[28]=t("th",null,"고객사명",-1)),t("td",null,[l(F,{modelValue:s.value.customerNm,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.customerNm=o),style:{width:"500px",height:"20px"},density:"compact",class:"mb-4",label:"고객사명"},null,8,["modelValue"])]),e[29]||(e[29]=t("th",null,"품목",-1)),t("td",null,[l(F,{modelValue:s.value.itemNm,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.itemNm=o),style:{width:"500px",height:"20px","vertical-align":"center"},density:"compact",class:"mb-4",label:"품명"},null,8,["modelValue"])])]),t("tr",null,[e[30]||(e[30]=t("th",null,"발주수량",-1)),t("td",null,[Z(l(F,{modelValue:s.value.orderQty,"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.orderQty=o),density:"compact",style:{width:"500px",height:"20px","text-align":"right"},class:"mb-4",label:"발주수량",onClick:A},null,8,["modelValue"]),[[H]])]),e[31]||(e[31]=t("th",null,"납기일자",-1)),t("td",null,[l(te,{modelValue:s.value.dueDate,"onUpdate:modelValue":e[5]||(e[5]=o=>s.value.dueDate=o),title:"납기일자",style:{width:"500px",height:"20px","vertical-align":"middle"},class:"mb-10"},null,8,["modelValue"])])]),t("tr",null,[e[32]||(e[32]=t("th",null,"발주서 첨부파일",-1)),t("td",null,[l(q,{modelValue:x.value,"onUpdate:modelValue":e[6]||(e[6]=o=>x.value=o),style:{height:"20px",width:"500px"},class:"mb-4"},null,8,["modelValue"])]),e[33]||(e[33]=t("th",null,"제품사양서",-1)),t("td",null,[l(q,{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=o=>y.value=o),style:{height:"20px",width:"500px"},class:"mb-4"},null,8,["modelValue"])])])])]),_:1})]),_:1})]),_:1}),l(c,null,{default:n(()=>[l(m,null,{default:n(()=>[t("div",ve,[l(N,{text:"저장",class:"gt-2",color:"brown-lighten-4",onClick:u}),l(N,{text:"목록",class:"mr-3",onClick:b})])]),_:1})]),_:1}),l(P,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=o=>f.value=o),height:"700",width:"900px",persistent:""},{default:n(()=>[l(oe,{onSelected:V,onCloseDialog:e[8]||(e[8]=o=>f.value=!1)})]),_:1},8,["modelValue"])],64)}}},he=Q(fe,[["__scopeId","data-v-c025cccc"]]);export{he as default};
