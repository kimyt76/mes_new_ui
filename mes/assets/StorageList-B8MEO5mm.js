import{K as X,L as O,M as q,A as i,W as z,J as Z,H as G,k as a,i as W,o as C,l as t,p as e,h as R,e as I,F as H,u as Q,P as ee,y as te,t as j}from"./index-BCdxernO.js";import{A as J}from"./apiBase-DJzL_JWR.js";import{A as L}from"./apiCommon-DQdCmI3G.js";import{e as oe}from"./exportToExcel-BIsrPQTg.js";import{_ as ae}from"./CustomerPop-BkXt7x33.js";import"./index-CEOpAmiF.js";import"./index-CLRf2YcQ.js";import"./index-WWuz9eST.js";import"./index-CKfU0QJd.js";import"./index-DhHuXiFi.js";const le={__name:"StorageRegPop",props:{title:{type:String},id:{type:String},mode:{type:String}},emits:"saved",setup(K,{emit:E}){const{vError:A,vInfo:f}=O(),{userId:b}=q(),c=i(!0),p=i(!0),m=i(!1),v=K,_=E,V=i([]),N=i([]),o=z({storageCd:"",storageName:"",prodProcessCd:"",outCustomerName:"",outCustomerCd:"",userId:b});Z(()=>o.storageType,(d,l)=>{if(d==="S")c.value=!0,p.value=!0;else if(d==="F")c.value=!1,p.value=!0;else if(d==="O"){if(c.value=!1,p.value=!1,l===void 0)return;f(`공장(외주비관리)는 외주비 증빙 수령 시 사용합니다. 
 생산입고에서 외주비 관리를 하지 않을 경우 공장을 선택해 등록하시기 바랍니다.`)}});const S=d=>{o.outCustomerCd=d.customerCd,o.outCustomerName=d.customerName},h=async()=>{try{const d={...o},l=await J.saveStorageInfo(d);_("saved",l),_("close-dialog")}catch(d){A(d)}},w=()=>{m.value=!0};return G(async()=>{if(V.value=await L.getCodeList("storage_type"),N.value=await L.getCodeList("prod_process"),v.mode==="U"){const d=await J.getStorageInfo(v.id);Object.assign(o,d)}}),(d,l)=>{const $=a("v-card-item"),u=a("v-text-field"),s=a("v-col"),g=a("v-row"),P=a("v-radio"),U=a("v-radio-group"),y=a("v-select"),x=a("v-btn"),B=a("v-card-actions"),k=a("v-form"),D=a("v-card-text"),F=a("v-dialog"),M=a("v-card");return C(),W(M,null,{default:t(()=>[e($,{title:v.title},null,8,["title"]),e(D,null,{default:t(()=>[e(k,{ref:"vform"},{default:t(()=>[e(g,{class:"mt-3"},{default:t(()=>[e(s,{cols:"3"},{default:t(()=>[e(u,{modelValue:o.storageCd,"onUpdate:modelValue":l[0]||(l[0]=n=>o.storageCd=n),label:"창고코드",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,{cols:"9"},{default:t(()=>[e(u,{modelValue:o.storageName,"onUpdate:modelValue":l[1]||(l[1]=n=>o.storageName=n),label:"창고명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(s,{class:"d-flex align-center gap-4"},{default:t(()=>[l[8]||(l[8]=R("div",{class:"font-weight-medium text-grey-darken-1"},"구분 :    ",-1)),e(U,{modelValue:o.storageType,"onUpdate:modelValue":l[2]||(l[2]=n=>o.storageType=n),inline:"",class:"d-flex"},{default:t(()=>[(C(!0),I(H,null,Q(V.value,(n,Y)=>(C(),W(P,{key:Y,label:n.codeNm,value:n.code,class:"me-4"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(s,null,{default:t(()=>[e(y,{modelValue:o.prodProcessCd,"onUpdate:modelValue":l[3]||(l[3]=n=>o.prodProcessCd=n),label:"생산공정",items:N.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",disabled:c.value},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(s,null,{default:t(()=>[e(u,{modelValue:o.outCustomerName,"onUpdate:modelValue":l[4]||(l[4]=n=>o.outCustomerName=n),label:"외주거래처명",variant:"underlined",density:"compact","append-inner-icon":"mdi-magnify","onClick:appendInner":w,disabled:p.value},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(s,{class:"d-flex justify-end align-center mr-2"},{default:t(()=>[e(B,null,{default:t(()=>[e(x,{color:"indigo-darken-4",text:"저장",variant:"tonal",depressed:"",onClick:h}),e(x,{text:"닫기",variant:"tonal",onClick:l[5]||(l[5]=n=>_("close-dialog"))})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(F,{modelValue:m.value,"onUpdate:modelValue":l[7]||(l[7]=n=>m.value=n),"max-width":"800px",height:"800px",persistent:""},{default:t(()=>[e(ae,{onSelected:S,onCloseDialog:l[6]||(l[6]=n=>m.value=!1)})]),_:1},8,["modelValue"])]),_:1})}}},se=X(le,[["__scopeId","data-v-5b422cf8"]]),ne=["onClick"],ye={__name:"StorageList",setup(K){const{vError:E}=O(),{userId:A}=q(),f=i(!1),b=i(!1),c=i(""),p=i("N"),m=i(""),v=i(""),_=i([]),V=i([]),N=i([]),o=z({storageName:"",outCustomerName:"",storageType:"",prodProcessCd:"",userId:A}),S=i([{title:"창고코드",key:"storageCd",align:"center",width:"60px"},{title:"창고명",key:"storageName",align:"start",width:"250px"},{title:"구분",key:"storageTypeName",align:"center",width:"120px"},{title:"생산공정명",key:"prodProcessName",align:"center",width:"150px"},{title:"외주거래처명",key:"outCustomerName",align:"start",width:"250px"},{title:"사용",key:"useYn",align:"center",width:"60px"},{title:"추가사업장명",key:"companyName",align:"center",width:"120px"}]),h=u=>{console.log("val",u.storageCd),u==="N"?(m.value="창고등록",v.value=""):(p.value="U",m.value="창고상세정보",v.value=u.storageCd),f.value=!0};G(async()=>{V.value=await L.getCodeList("storage_type"),N.value=await L.getCodeList("prod_process"),w()});const w=async()=>{b.value=!0;try{const u={...o};_.value=await J.getStorageList(u)}catch(u){E(u)}finally{b.value=!1}},{vSuccess:d}=O(),l=u=>{d(u),w()},$=()=>{oe(S,_.value,"창고정보_목록")};return(u,s)=>{const g=a("v-breadcrumbs"),P=a("v-text-field"),U=a("v-select"),y=a("v-btn"),x=a("v-col"),B=a("v-form"),k=a("v-row"),D=a("v-card-text"),F=a("v-card"),M=a("v-spacer"),n=a("v-data-table"),Y=a("v-dialog");return C(),I(H,null,[e(g,{items:["MES","기본관리","창고관리"],class:"custom-breadcrumbs"}),e(F,{class:"pa-1",style:{height:"60px"}},{default:t(()=>[e(D,null,{default:t(()=>[e(k,null,{default:t(()=>[e(B,{ref_key:"srhForm",ref:c,onSubmit:ee(w,["prevent"])},{default:t(()=>[e(x,{class:"d-flex ga-4"},{default:t(()=>[e(P,{modelValue:o.storageName,"onUpdate:modelValue":s[0]||(s[0]=r=>o.storageName=r),density:"compact",label:"창고명",placeholder:"창고명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(P,{modelValue:o.outCustomerName,"onUpdate:modelValue":s[1]||(s[1]=r=>o.outCustomerName=r),density:"compact",label:"외주거래처명",placeholder:"외주거래처명을 입력해주세요",variant:"underlined",style:{width:"150px"}},null,8,["modelValue"]),e(U,{modelValue:o.storageType,"onUpdate:modelValue":s[2]||(s[2]=r=>o.storageType=r),label:"창고구분",items:V.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue","items"]),e(U,{modelValue:o.prodProcessCd,"onUpdate:modelValue":s[3]||(s[3]=r=>o.prodProcessCd=r),label:"생산공정",items:N.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue","items"]),e(y,{color:"#EFEBE9",type:"submit",text:"조회"}),e(y,{class:"mr-2",text:"초기화",onClick:s[4]||(s[4]=r=>c.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(M),e(k,null,{default:t(()=>[e(x,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:t(()=>[e(y,{color:"brown-lighten-4",text:"신규",onClick:h}),e(y,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:$})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(x,{class:"pa-0"},{default:t(()=>[e(n,{headers:S.value,items:_.value,loading:b.value,"items-per-page":15,density:"compact","fixed-header":"",height:"650px","return-object":""},{headers:t(({columns:r})=>[R("tr",null,[(C(!0),I(H,null,Q(r,T=>(C(),I("th",{key:T.key,class:"custom-header pa-1"},j(T.title),1))),128))])]),"item.storageName":t(({item:r,index:T})=>[R("div",{style:{cursor:"pointer","text-decoration":"underline"},onClick:re=>h(r,T)},j(r.storageName),9,ne)]),"item.useYn":t(({item:r})=>[te(j(r.useYn==="Y"?"사용":"미사용"),1)]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),e(Y,{modelValue:f.value,"onUpdate:modelValue":s[6]||(s[6]=r=>f.value=r),height:"450",width:"700",persistent:""},{default:t(()=>[e(se,{id:v.value,mode:p.value,title:m.value,onSaved:l,onCloseDialog:s[5]||(s[5]=r=>f.value=!1)},null,8,["id","mode","title"])]),_:1},8,["modelValue"])],64)}}};export{ye as default};
