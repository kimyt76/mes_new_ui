import{d as B}from"./filedownLoad-DIvRxwUu.js";import{p as D,r as L,B as R,d as c,c as _,o as s,g as u,f as U,b as m,q as g,w as r,h as F,F as k,v as E}from"./index-C0I8_ih4.js";const I={__name:"MultiFileUpload",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(h,{emit:y}){const d=h,C=e=>typeof File<"u"&&e instanceof File,p=y;D(()=>d.modelValue,e=>{e&&e.length>0&&!e.some(t=>t.flag)&&e.forEach(t=>t.flag="S")},{immediate:!0});const f=L(null),n=R({get:()=>d.modelValue,set:e=>p("update:modelValue",e)}),w=()=>{var e;(e=f.value)==null||e.click()},V=e=>{Array.from(e.target.files).forEach(l=>{n.value.some(o=>(o.name||o.fileName)===l.name&&(o.size||o.fileSize)===l.size)||n.value.push({file:l,fileName:l.name,fileSize:l.size,flag:"N"})}),p("update:modelValue",n.value),e.target.value=""},z=e=>{n.value[e].flag!=="N"?n.value[e].flag="D":n.value.splice(e,1)},N=async e=>{if(console.log("file",e),e.filePath)B(e.attachFileId,e.seq);else if(typeof File<"u"&&e instanceof File){const t=URL.createObjectURL(e),l=document.createElement("a");l.href=t,l.download=e.name,l.click(),URL.revokeObjectURL(t)}};return(e,t)=>{const l=c("v-icon"),i=c("v-btn"),o=c("v-list-item"),x=c("v-list");return s(),_(k,null,[u(i,{onClick:w,style:{"background-color":"#CFD8DC",width:"150px"}},{default:r(()=>[u(l,{start:""},{default:r(()=>t[0]||(t[0]=[F("mdi-paperclip")])),_:1}),t[1]||(t[1]=F(" 파일 선택 "))]),_:1}),U("input",{ref_key:"fileInput",ref:f,type:"file",multiple:"",style:{display:"none"},onChange:V},null,544),n.value.length>0?(s(),m(x,{key:0,lines:"one"},{default:r(()=>[(s(!0),_(k,null,E(n.value.filter(a=>a.flag!=="D"),(a,v)=>(s(),m(o,{key:v,title:`${a.name||a.fileName} (${((a.size||a.fileSize)/1024).toFixed(1)} KB)`,style:{"min-height":"18px"}},{append:r(()=>[a.url||C(a)||a.filePath?(s(),m(i,{key:0,icon:"mdi-download",size:"x-small",variant:"text",onClick:b=>N(a)},null,8,["onClick"])):g("",!0),u(i,{icon:"mdi-delete",size:"x-small",variant:"text",onClick:b=>z(v)},null,8,["onClick"])]),_:2},1032,["title"]))),128))]),_:1})):g("",!0)],64)}}};export{I as _};
