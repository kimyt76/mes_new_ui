import{_ as $,a as z,u as G,p as H,r as y,k as J,z as w,m as K,A as V,c as Q,f as m,g as e,d,w as t,F as W,e as X,o as Y,i as T,h as Z,B as p,C as v}from"./index-DbwVXjcr.js";import{e as D}from"./common-BCog4hmn.js";import{A as ee}from"./apiOrders-UQLCal3q.js";import{_ as te}from"./MultiFileUpload-KCUNNr7a.js";import"./format-CBpsKyOP.js";import"./filedownLoad-CMEUJAlR.js";const le=["id"],ae=["onUpdate:modelValue"],ne=["onUpdate:modelValue"],oe=["onUpdate:modelValue"],ie=["onUpdate:modelValue"],de=["onUpdate:modelValue"],ue=["onUpdate:modelValue"],se={__name:"ContractDetail",setup(re){const{userId:I}=z(),{vError:me,vSuccess:ce}=G(),x=X(),g=H().params.id,o=y([]),b=y([]),U=y([]),P=y([]),_=y([]),i=J({contractDate:"",seq:"",expectedDueDate:"",clientName:"",clientId:"",managerName:"",managerId:"",paymentCondition:"",vatType:"",orderType:"",userId:I}),q=[{title:"PO No ",key:"poNo",align:"center",width:"120px"},{title:"품목코드 ",key:"itemCd",align:"center",width:"120px"},{title:"품목명",key:"itemName",align:"start",width:"380px"},{title:"규격",key:"unit",align:"center",width:"80px"},{title:"제품유형",key:"itemGrp1",align:"center",width:"100px"},{title:"수량",key:"qty",align:"center",width:"80px"},{title:"단가",key:"unitPrice",align:"center",width:"80px"},{title:"공급가액",key:"supplyPrice",align:"center",width:"110px"},{title:"부가세",key:"vatPrice",align:"center",width:"100px"},{title:"합계",key:"totPrice",align:"center",width:"100px"},{title:"차수   ",key:"orderCnt",align:"center",width:"80px"},{title:"진행상태",key:"statusType",align:"center",width:"110px"},{title:"비고",key:"etc",align:"center",width:"100px"},{title:"-",key:"actions",align:"center",width:"10px"}];w(()=>o.value.reduce((u,l)=>u+Number(l.qty||0),0));const L=w(()=>o.value.reduce((u,l)=>u+Number(l.supplyPrice||0),0)),A=w(()=>o.value.reduce((u,l)=>u+Number(l.vatPrice||0),0));w(()=>L.value+A.value),K(async()=>{b.value=await V.getCodeList("order_type"),U.value=await V.getCodeList("vat_type"),P.value=await V.getCodeList("status_Type");const u=await ee.getContractInfo(g);Object.assign(i,u.contractInfo),u.attachFileInfo!==null?_.value=u.attachFileInfo:_.value=[],o.value=u.itemList});const E=()=>{x.push({name:"ContractEdit",params:{id:g}})},F=()=>{x.push({name:"ContractList"})};return(u,l)=>{const S=d("v-breadcrumbs"),B=d("v-card-item"),k=d("v-date-input"),f=d("v-text-field"),s=d("v-col"),c=d("v-row"),h=d("v-select"),C=d("v-card-text"),M=d("v-card-subtitle"),O=d("v-data-table-virtual"),N=d("v-btn"),j=d("v-form"),R=d("v-card");return Y(),Q(W,null,[m("div",{id:u.$attrs.id},null,8,le),e(S,{items:["MES","영업관리","주문신규"],class:"custom-breadcrumbs"}),e(R,null,{default:t(()=>[e(B,{title:"주문서입력"}),e(j,{ref:"vform"},{default:t(()=>[e(C,null,{default:t(()=>[e(c,null,{default:t(()=>[e(s,{class:"d-flex ga-2 pa-1"},{default:t(()=>[e(k,{modelValue:i.contractDate,"onUpdate:modelValue":l[0]||(l[0]=a=>i.contractDate=a),label:"주문일자",density:"compact","display-format":T(D),variant:"underlined",style:{width:"200px"},readonly:""},null,8,["modelValue","display-format"]),e(f,{modelValue:i.seq,"onUpdate:modelValue":l[1]||(l[1]=a=>i.seq=a),density:"compact",style:{width:"40px"},readonly:""},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(k,{modelValue:i.expectedDueDate,"onUpdate:modelValue":l[2]||(l[2]=a=>i.expectedDueDate=a),label:"납기예정일자",density:"compact","display-format":T(D),variant:"underlined",style:{width:"200px"},"hide-details":"",readonly:""},null,8,["modelValue","display-format"])]),_:1}),e(s,null,{default:t(()=>[e(f,{modelValue:i.paymentCondition,"onUpdate:modelValue":l[3]||(l[3]=a=>i.paymentCondition=a),label:"결제조건",variant:"underlined",density:"compact",style:{width:"200px"},"hide-details":"",readonly:""},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(f,{modelValue:i.managerName,"onUpdate:modelValue":l[4]||(l[4]=a=>i.managerName=a),label:"담당자명",variant:"underlined",density:"compact",style:{width:"200px"},readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(s,{cols:"6"},{default:t(()=>[e(f,{modelValue:i.clientName,"onUpdate:modelValue":l[5]||(l[5]=a=>i.clientName=a),label:"고객사명",variant:"underlined",density:"compact",readonly:""},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(h,{modelValue:i.vatType,"onUpdate:modelValue":l[6]||(l[6]=a=>i.vatType=a),label:"거래유형",items:U.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"200px"},readonly:""},null,8,["modelValue","items"])]),_:1}),e(s,null,{default:t(()=>[e(h,{modelValue:i.orderType,"onUpdate:modelValue":l[7]||(l[7]=a=>i.orderType=a),label:"수주유형",items:b.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"200px"},readonly:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(te,{modelValue:_.value,"onUpdate:modelValue":l[8]||(l[8]=a=>_.value=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(c,null,{default:t(()=>[e(s,null,{default:t(()=>[e(M,null,{default:t(()=>l[9]||(l[9]=[Z(" - 품목 ")])),_:1})]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(s,null,{default:t(()=>[e(O,{headers:q,items:o.value,density:"compact","item-value":"id",class:"custom-table no-padding-table"},{"item.statusType":t(({item:a})=>[e(h,{modelValue:a.statusType,"onUpdate:modelValue":n=>a.statusType=n,items:P.value,"item-title":"codeNm","item-value":"code",density:"compact",variant:"outlined",style:{width:"120px",height:"40px"},readonly:""},null,8,["modelValue","onUpdate:modelValue","items"])]),"item.qty":t(({item:a,index:n})=>[p(m("input",{"onUpdate:modelValue":r=>o.value[n].qty=r,style:{"text-align":"right",width:"90%"}},null,8,ae),[[v,o.value[n].qty]])]),"item.unitPrice":t(({item:a,index:n})=>[p(m("input",{"onUpdate:modelValue":r=>o.value[n].unitPrice=r,style:{"text-align":"right",width:"90%","min-width":"90%","max-width":"90%"}},null,8,ne),[[v,o.value[n].unitPrice]])]),"item.supplyPrice":t(({item:a,index:n})=>[p(m("input",{"onUpdate:modelValue":r=>o.value[n].supplyPrice=r,type:"number",style:{"text-align":"right",width:"90%","min-width":"90%","max-width":"90%"}},null,8,oe),[[v,o.value[n].supplyPrice]])]),"item.vatPrice":t(({item:a,index:n})=>[p(m("input",{"onUpdate:modelValue":r=>o.value[n].vatPrice=r,type:"number",style:{"text-align":"right",width:"90%","min-width":"90%","max-width":"90%"}},null,8,ie),[[v,o.value[n].vatPrice,void 0,{number:!0}]])]),"item.totPrice":t(({item:a,index:n})=>[p(m("input",{"onUpdate:modelValue":r=>o.value[n].totPrice=r,type:"number",style:{"text-align":"right",width:"90%","min-width":"90%","max-width":"90%"}},null,8,de),[[v,o.value[n].totPrice,void 0,{number:!0}]])]),"item.etc":t(({item:a,index:n})=>[p(m("input",{"onUpdate:modelValue":r=>o.value[n].etc=r,type:"text",style:{"text-align":"left",width:"90%","min-width":"90%","max-width":"90%"}},null,8,ue),[[v,o.value[n].etc]])]),_:1},8,["items"])]),_:1})]),_:1}),e(c,{class:"mt-2 mb-2"},{default:t(()=>[e(s,{class:"d-flex ga-4 justify-end"},{default:t(()=>[e(N,{text:"수정",class:"gt-2",color:"brown-lighten-4",onClick:E}),e(N,{text:"목록",class:"mr-3",onClick:F})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})],64)}}},Ve=$(se,[["__scopeId","data-v-5cd77931"]]);export{Ve as default};
