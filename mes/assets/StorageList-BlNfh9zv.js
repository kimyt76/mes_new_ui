import{_ as G,u as Y,a as H,r as d,m as J,q as W,n as K,d as s,b as z,o as b,w as o,g as e,f as c,c as $,F as O,x as Q,j as X,t as p,y as Z}from"./index-BNL3Tgw5.js";import{A as R}from"./apiBase-CSC4uJMW.js";import{A as E}from"./apiCommon-LY9rUrf-.js";import{e as ee}from"./exportToExcel-Kkbtezxo.js";import{_ as te}from"./CustomerListPop-C12lnYGL.js";import"./_commonjsHelpers-CZnAS8i4.js";const oe={class:"d-flex align-center gap-4"},le={__name:"StorageRegPop",props:{title:{type:String},id:{type:String},mode:{type:String}},emits:"saved",setup(q,{emit:A}){const{vError:B,vInfo:f}=Y(),{userId:h}=H(),v=d(!0),m=d(!0),_=d(!1),x=q,i=A,V=d([]),N=d([]),n=J({storageCd:"",storageName:"",prodProcessCd:"",outCustomerName:"",outCustomerCd:"",userId:h});W(()=>n.storageType,r=>{r==="S"?(v.value=!0,m.value=!0):r==="F"?(v.value=!1,m.value=!0):r==="O"&&(f(`공장(외주비관리)는 외주비 증빙 수령 시 사용합니다. 
 생산입고에서 외주비 관리를 하지 않을 경우 공장을 선택해 등록하시기 바랍니다.`),v.value=!1,m.value=!1)});const k=(r,l)=>{n.outCustomerCd=r,n.outCustomerName=l},w=async()=>{try{const r={...n},l=await R.saveStorageInfo(r);i("saved",l),i("close-dialog")}catch(r){B(r)}},S=()=>{_.value=!0};return K(async()=>{if(V.value=await E.getCodeList("storage_type"),N.value=await E.getCodeList("prod_process"),x.mode==="U"){const r=await R.getStorageInfo(x.id);Object.assign(n,r)}}),(r,l)=>{const D=s("v-card-item"),u=s("v-text-field"),a=s("v-col"),g=s("v-row"),P=s("v-radio"),U=s("v-radio-group"),y=s("v-select"),I=s("v-btn"),T=s("v-card-actions"),L=s("v-form"),F=s("v-card-text"),j=s("v-dialog"),M=s("v-card");return b(),z(M,null,{default:o(()=>[e(D,{title:x.title},null,8,["title"]),e(F,null,{default:o(()=>[e(L,{ref:"vform"},{default:o(()=>[e(g,{class:"mt-3"},{default:o(()=>[e(a,{cols:"3"},{default:o(()=>[e(u,{modelValue:n.storageCd,"onUpdate:modelValue":l[0]||(l[0]=t=>n.storageCd=t),label:"창고코드",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(a,{cols:"9"},{default:o(()=>[e(u,{modelValue:n.storageName,"onUpdate:modelValue":l[1]||(l[1]=t=>n.storageName=t),label:"창고명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:o(()=>[e(a,null,{default:o(()=>[c("div",oe,[l[8]||(l[8]=c("div",{class:"font-weight-medium text-grey-darken-1"},"구분    ",-1)),e(U,{modelValue:n.storageType,"onUpdate:modelValue":l[2]||(l[2]=t=>n.storageType=t),inline:"",class:"d-flex"},{default:o(()=>[(b(!0),$(O,null,Q(V.value,(t,C)=>(b(),z(P,{key:C,label:t.codeNm,value:t.code,class:"me-4"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1}),e(g,null,{default:o(()=>[e(a,null,{default:o(()=>[e(y,{modelValue:n.prodProcessCd,"onUpdate:modelValue":l[3]||(l[3]=t=>n.prodProcessCd=t),label:"생산공정",items:N.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",disabled:v.value},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),e(g,null,{default:o(()=>[e(a,null,{default:o(()=>[e(u,{modelValue:n.outCustomerName,"onUpdate:modelValue":l[4]||(l[4]=t=>n.outCustomerName=t),label:"외주거래처명",variant:"underlined",density:"compact","append-inner-icon":"mdi-magnify","onClick:appendInner":S,disabled:m.value},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(g,null,{default:o(()=>[e(a,null,{default:o(()=>[e(T,null,{default:o(()=>[e(I,{color:"indigo-darken-4",text:"저장",variant:"tonal",depressed:"",onClick:w}),e(I,{text:"닫기",variant:"tonal",onClick:l[5]||(l[5]=t=>i("close-dialog"))})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(j,{modelValue:_.value,"onUpdate:modelValue":l[7]||(l[7]=t=>_.value=t),"max-width":"800px",height:"700px",persistent:""},{default:o(()=>[e(te,{onSelected:k,onCloseDialog:l[6]||(l[6]=t=>_.value=!1)})]),_:1},8,["modelValue"])]),_:1})}}},ae=G(le,[["__scopeId","data-v-e0065fdf"]]),se={class:"d-flex ga-3"},ne={class:"d-flex ga-4 justify-end"},de={style:{height:"30px"}},re=["onClick"],ie=["onClick"],ue={style:{width:"150px",height:"30px","text-align":"center"}},ce={style:{width:"100px",height:"30px","text-align":"center"}},me={style:{width:"200px",height:"30px","text-align":"center"}},pe={style:{width:"40px",height:"30px","text-align":"center"}},ve={style:{width:"100px",height:"30px","text-align":"center"}},_e={__name:"StorageList",setup(q){const{vError:A}=Y(),{userId:B}=H(),f=d(!1),h=d(!1),v=d(""),m=d([]),_=d([]),x=d([]),i=J({storageName:"",outCustomerName:"",storageType:"",prodProcessCd:"",userId:B}),V=d([{title:"창고코드",key:"storageCd",align:"center"},{title:"창고명",key:"storageName",align:"center"},{title:"구분",key:"storageTypeName",align:"center"},{title:"생산공정명",key:"prodProcessName",align:"center"},{title:"외주거래처명",key:"outCustomerName",align:"center"},{title:"사용",key:"useYn",align:"center"},{title:"추가사업장명",key:"companyName",align:"center"}]),N=d("N"),n=d(""),k=d(""),w=u=>{u==="N"?(n.value="창고등록",k.value=""):(N.value="U",n.value="창고상세정보",k.value=u),f.value=!0};K(async()=>{_.value=await E.getCodeList("storage_type"),x.value=await E.getCodeList("prod_process"),S()});const S=async()=>{h.value=!0;try{const u={...i};m.value=await R.getStorageList(u)}catch(u){A(u)}finally{h.value=!1}},{vSuccess:r}=Y(),l=u=>{r(u),S()},D=()=>{ee(V,m.value,"폼목정보_목록")};return(u,a)=>{const g=s("v-breadcrumbs"),P=s("v-text-field"),U=s("v-select"),y=s("v-btn"),I=s("v-form"),T=s("v-col"),L=s("v-row"),F=s("v-card"),j=s("v-data-table"),M=s("v-dialog");return b(),$(O,null,[e(g,{items:["MES","기본관리","창고관리"]}),e(F,{class:"pa-3",style:{height:"80px"}},{default:o(()=>[e(L,null,{default:o(()=>[e(T,null,{default:o(()=>[e(I,{ref_key:"srhForm",ref:v,onSubmit:X(S,["prevent"])},{default:o(()=>[c("div",se,[e(P,{modelValue:i.storageName,"onUpdate:modelValue":a[0]||(a[0]=t=>i.storageName=t),density:"compact",label:"창고명",placeholder:"창고명을 입력해주세요",variant:"underlined"},null,8,["modelValue"]),e(P,{modelValue:i.outCustomerName,"onUpdate:modelValue":a[1]||(a[1]=t=>i.outCustomerName=t),density:"compact",label:"외주거래처명",placeholder:"외주거래처명을 입력해주세요",variant:"underlined"},null,8,["modelValue"]),e(U,{modelValue:i.storageType,"onUpdate:modelValue":a[2]||(a[2]=t=>i.storageType=t),label:"창고구분",items:_.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"]),e(U,{modelValue:i.prodProcessCd,"onUpdate:modelValue":a[3]||(a[3]=t=>i.prodProcessCd=t),label:"생산공정",items:x.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"]),e(y,{color:"#EFEBE9",text:"조회",type:"submit"}),e(y,{class:"mr-2",text:"초기화",onClick:a[4]||(a[4]=t=>v.value.reset())})])]),_:1},512)]),_:1})]),_:1})]),_:1}),e(L,{class:"mb-1"},{default:o(()=>[e(T,null,{default:o(()=>[c("div",ne,[e(y,{color:"brown-lighten-4",class:"mt-3",text:"신규",onClick:a[5]||(a[5]=t=>w("N"))}),e(y,{class:"mt-3 mr-3 excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:D})])]),_:1})]),_:1}),e(j,{headers:V.value,items:m.value,loading:h.value,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요","items-per-page":25},{headers:o(({columns:t})=>[c("tr",null,[(b(!0),$(O,null,Q(t,C=>(b(),$("th",{key:C.key,class:"custom-header",style:Z([{height:"30px"},{textAlign:"center"}])},p(C.title),1))),128))])]),item:o(({item:t})=>[c("tr",de,[c("td",{style:{width:"80px",height:"30px","text-align":"center","text-decoration":"underline",cursor:"pointer"},onClick:C=>w(t.storageCd)},p(t.storageCd),9,re),c("td",{style:{width:"200px",height:"30px","text-align":"left","text-decoration":"underline",cursor:"pointer"},onClick:C=>w(t.storageCd)},p(t.storageName),9,ie),c("td",ue,p(t.storageTypeName),1),c("td",ce,p(t.prodProcessName),1),c("td",me,p(t.outCustomerName),1),c("td",pe,p(t.useYn==="Y"?"사용":"미사용"),1),c("td",ve,p(t.companyName),1)])]),_:1},8,["headers","items","loading"]),e(M,{modelValue:f.value,"onUpdate:modelValue":a[7]||(a[7]=t=>f.value=t),height:"450",width:"700",persistent:""},{default:o(()=>[e(ae,{id:k.value,mode:N.value,title:n.value,onSaved:l,onCloseDialog:a[6]||(a[6]=t=>f.value=!1)},null,8,["id","mode","title"])]),_:1},8,["modelValue"])],64)}}},he=G(_e,[["__scopeId","data-v-d8ec6882"]]);export{he as default};
