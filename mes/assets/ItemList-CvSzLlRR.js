import{_ as R,a as $,r as i,k as G,m as z,A as I,c as x,g as t,d as o,w as a,F as T,e as H,o as h,j as J,h as g,t as m,i as L,f as M,n as K}from"./index-4poL43z0.js";import{e as O}from"./exportToExcel-Kkbtezxo.js";import{A as Q}from"./apiItem-DPmHF27b.js";import{f as Y,i as W}from"./common-BYhKLuQs.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const X=["onClick"],Z={__name:"ItemList",setup(ee){const{userId:P}=$(),r=H(),p=i(!1),w=i(null),v=i([]),d=i(null),C=i([]),b=i([]),n=G({itemTypeCd:"",itemName:"",itemCd:"",customerName:"",useYn:"",userId:P}),k=i([{title:"품목",key:"itemTypeName",align:"start",width:"80px"},{title:"품목코드",key:"itemCd",align:"center",width:"100px"},{title:"품목명",key:"itemName",align:"start",width:"250px"},{title:"단위",key:"unit",align:"center",width:"70px"},{title:"규격",key:"spec",align:"center",width:"100px"},{title:"구매처",key:"customerName",align:"left",width:"200px"},{title:"입고단가",key:"inPrice",align:"end",width:"100px"},{title:"출고단가",key:"outPrice",align:"end",width:"100px"},{title:"제품유형",key:"itemGrp2Name",align:"center",width:"110px"},{title:"사용",key:"useYn",align:"center",width:"70px"}]),S=()=>{if(W(d.value))r.push({name:"ItemNewCd"});else{const s=d.value[0].itemCd,l=d.value[0].itemTypeCd;l==="M4"?r.push({name:"ItemSubCd",query:{id:s,type:l}}):["M0","M3","M5","M6"].includes(l)&&r.push({name:"ItemThird",query:{id:s,type:l}})}},U=(s,l)=>{r.push({name:"ItemDetail",params:{id:s.itemCd}})},V=async()=>{try{p.value=!0;const s={...n};v.value=await Q.getItemList(s)}catch{}finally{p.value=!1}};z(async()=>{C.value=await I.getCodeList("item_Type_Cd"),b.value=await I.getCodeList("use_yn"),V()});const A=()=>{O(k,v.value,"품목정보_목록")};return(s,l)=>{const E=o("v-breadcrumbs"),N=o("v-select"),y=o("v-text-field"),u=o("v-btn"),_=o("v-col"),F=o("v-form"),f=o("v-row"),j=o("v-card-text"),B=o("v-card"),q=o("v-spacer"),D=o("v-data-table");return h(),x(T,null,[t(E,{items:["MES","기본관리","품목관리"],class:"custom-breadcrumbs"}),t(B,{class:"pa-1",style:{height:"60px"}},{default:a(()=>[t(j,null,{default:a(()=>[t(f,null,{default:a(()=>[t(F,{ref_key:"srhForm",ref:w,onSubmit:J(V,["prevent"])},{default:a(()=>[t(_,{class:"d-flex ga-4"},{default:a(()=>[t(N,{modelValue:n.itemTypeCd,"onUpdate:modelValue":l[0]||(l[0]=e=>n.itemTypeCd=e),label:"품목구분",density:"compact",items:C.value,"item-title":"codeNm","item-value":"code",variant:"underlined",style:{width:"150px"}},null,8,["modelValue","items"]),t(y,{modelValue:n.itemCd,"onUpdate:modelValue":l[1]||(l[1]=e=>n.itemCd=e),label:"품목코드",placeholder:"품목코드를 입력해주세요",variant:"underlined",density:"compact",style:{width:"180px"}},null,8,["modelValue"]),t(y,{modelValue:n.itemName,"onUpdate:modelValue":l[2]||(l[2]=e=>n.itemName=e),label:"품목명",placeholder:"품목명을 입력해주세요",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue"]),t(y,{modelValue:n.customerName,"onUpdate:modelValue":l[3]||(l[3]=e=>n.customerName=e),label:"거래처명",placeholder:"거래처명을 입력해주세요",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue"]),t(N,{modelValue:n.useYn,"onUpdate:modelValue":l[4]||(l[4]=e=>n.useYn=e),label:"사용여부",density:"compact",items:b.value,"item-title":"codeNm","item-value":"code",variant:"underlined",style:{width:"150px"}},null,8,["modelValue","items"]),t(u,{text:"조회",color:"brown-lighten-4",type:"submit"}),t(u,{text:"초기화",onClick:l[5]||(l[5]=e=>w.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),t(q),t(f,null,{default:a(()=>[t(_,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:a(()=>[t(u,{color:"brown-lighten-4",text:"신규",onClick:S}),t(u,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:A})]),_:1})]),_:1}),t(f,null,{default:a(()=>[t(_,{class:"pa-0"},{default:a(()=>[t(D,{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=e=>d.value=e),headers:k.value,items:v.value,loading:p.value,"items-per-page":15,density:"compact","select-strategy":"single","show-select":"","fixed-header":"",height:"650px","return-object":"",class:"my-table",tableStyle:"table-layout: fixed; width: 100%"},{headers:a(({columns:e})=>[M("tr",null,[(h(!0),x(T,null,K(e,c=>(h(),x("th",{key:c.key,class:"custom-header"},m(c.title),1))),128))])]),"item.itemName":a(({item:e,index:c})=>[M("div",{style:{cursor:"pointer","text-decoration":"underline"},onClick:te=>U(e,c)},m(e.itemName),9,X)]),"item.inPrice":a(({item:e})=>[g(m(L(Y)(e.inPrice)),1)]),"item.outPrice":a(({item:e})=>[g(m(L(Y)(e.outPrice)),1)]),"item.useYn":a(({item:e})=>[g(m(e.useYn==="Y"?"사용":"미사용"),1)]),_:1},8,["modelValue","headers","items","loading"])]),_:1})]),_:1})],64)}}},de=R(Z,[["__scopeId","data-v-d45cdcef"]]);export{de as default};
