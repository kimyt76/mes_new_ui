import{_ as J,r,a as h,u as K,k as Q,m as X,A as I,d,b as Y,o as T,w as o,g as e,h as z,j as Z,s as ee,c as D,F as H,f as W,t as q,n as le}from"./index-CHPVuy_C.js";import{A as G}from"./apiBase-DNLSGFKd.js";import{e as te}from"./exportToExcel-Kkbtezxo.js";import{_ as oe}from"./UserListPop-BiAfXl7U.js";import{l as ae}from"./lodash-DR4aaNSv.js";import"./_commonjsHelpers-CZnAS8i4.js";const ne={__name:"CustomerDetailPop",props:{title:{type:String},id:{type:String},mode:{type:String}},emits:["saved","close-dialog"],setup(F,{emit:L}){const g=r(!1),{userId:_,memberNm:w}=h(),{vError:N,vInfo:M,vWarning:S}=K(),v=L,V=F,b=r([]),i=r([]),k=r([]),t=Q({customerType:"",customerCd:"",customerName:"",memberCd:"",memberName:"",businessItem:"",businessType:"",president:"",tel:"",fax:"",presidentTel:"",email:"",customerManager:"",customerManagerTel:"",zipCode:"",address:"",tradingMethod:"",customerGrp1:"",customerGrp2:"",bankName:"",accountNo:"",searchText:"",memo:"",userId:_}),E=async()=>{try{const s={...t},l=await G.saveCustomerInfo(s);v("saved",l),v("close-dialog")}catch(s){N(s.message)}};X(async()=>{if(b.value=await I.getCodeList("CUSTOMER_TYPE"),i.value=await I.getCodeList("CUSTOMER_GRP1"),k.value=await I.getCodeList("CUSTOMER_GRP2"),V.mode==="U"){const s=await G.getCustomerInfo(V.id);Object.assign(t,s)}else t.memberName=w,t.memberCd=_});const P=s=>{t.memberCd=s.userId,t.memberName=s.memberNm},$=async()=>{await G.getCheckCustomerCd(t.customerCd)==="N"?M("사용할 수 있는 번호입니다."):(S("사용할 수 없는 번호입니다."),t.customerCd="")},c=()=>{g.value=!0};return(s,l)=>{const A=d("v-toolbar-title"),U=d("v-spacer"),x=d("v-icon"),f=d("v-btn"),B=d("v-toolbar"),y=d("v-select"),n=d("v-col"),u=d("v-text-field"),p=d("v-row"),R=d("v-textarea"),j=d("v-form"),m=d("v-card-text"),C=d("v-dialog"),O=d("v-card");return T(),Y(O,null,{default:o(()=>[e(B,{height:"40",class:"d-flex align-center justify-space-between px-2 toolbar-Head"},{default:o(()=>[e(A,null,{default:o(()=>l[26]||(l[26]=[z("성분코드조회")])),_:1}),e(U),e(f,{icon:"",onClick:l[0]||(l[0]=a=>v("close-dialog"))},{default:o(()=>[e(x,null,{default:o(()=>l[27]||(l[27]=[z("mdi-close")])),_:1})]),_:1})]),_:1}),e(m,null,{default:o(()=>[e(j,{ref:"vform",onSubmit:Z(E,["prevent"])},{default:o(()=>[e(p,{class:"mt-3"},{default:o(()=>[e(n,null,{default:o(()=>[e(y,{modelValue:t.customerType,"onUpdate:modelValue":l[1]||(l[1]=a=>t.customerType=a),label:"거래처구분",items:b.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(n,null,{default:o(()=>[e(u,{modelValue:t.customerCd,"onUpdate:modelValue":l[2]||(l[2]=a=>t.customerCd=a),label:"사업자번호",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[V.mode==="N"?(T(),Y(f,{key:0,text:"중복확인",onClick:$})):ee("",!0)]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(u,{modelValue:t.customerName,"onUpdate:modelValue":l[3]||(l[3]=a=>t.customerName=a),label:"상호명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:o(()=>[e(n,null,{default:o(()=>[e(u,{modelValue:t.memberName,"onUpdate:modelValue":l[4]||(l[4]=a=>t.memberName=a),label:"담당자",variant:"underlined",density:"compact","append-inner-icon":"mdi-magnify","onClick:appendInner":c},null,8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(u,{modelValue:t.businessType,"onUpdate:modelValue":l[5]||(l[5]=a=>t.businessType=a),label:"업태",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(u,{modelValue:t.businessItem,"onUpdate:modelValue":l[6]||(l[6]=a=>t.businessItem=a),label:"종목",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(u,{modelValue:t.president,"onUpdate:modelValue":l[7]||(l[7]=a=>t.president=a),label:"대표자명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:o(()=>[e(n,null,{default:o(()=>[e(u,{modelValue:t.tel,"onUpdate:modelValue":l[8]||(l[8]=a=>t.tel=a),label:"전화",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(u,{modelValue:t.fax,"onUpdate:modelValue":l[9]||(l[9]=a=>t.fax=a),label:"팩스",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(u,{modelValue:t.presidentTel,"onUpdate:modelValue":l[10]||(l[10]=a=>t.presidentTel=a),label:"휴대폰",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(u,{modelValue:t.email,"onUpdate:modelValue":l[11]||(l[11]=a=>t.email=a),label:"이메일",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:o(()=>[e(n,{cols:"3"},{default:o(()=>[e(u,{modelValue:t.customerManager,"onUpdate:modelValue":l[12]||(l[12]=a=>t.customerManager=a),label:"거래처담당자",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,{cols:"3"},{default:o(()=>[e(u,{modelValue:t.customerManagerTel,"onUpdate:modelValue":l[13]||(l[13]=a=>t.customerManagerTel=a),label:"담당자핸드폰",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(y,{modelValue:t.customerGrp1,"onUpdate:modelValue":l[14]||(l[14]=a=>t.customerGrp1=a),label:"그룹유형1",items:i.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(n,null,{default:o(()=>[e(y,{modelValue:t.customerGrp2,"onUpdate:modelValue":l[15]||(l[15]=a=>t.customerGrp2=a),label:"그룹유형2",items:k.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(p,null,{default:o(()=>[e(n,{cols:"3"},{default:o(()=>[e(u,{modelValue:t.zipCode,"onUpdate:modelValue":l[16]||(l[16]=a=>t.zipCode=a),label:"우편번호",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,{cols:"3"},{default:o(()=>[e(u,{modelValue:t.tradingMethod,"onUpdate:modelValue":l[17]||(l[17]=a=>t.tradingMethod=a),label:"거래방법",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(u,{modelValue:t.address,"onUpdate:modelValue":l[18]||(l[18]=a=>t.address=a),label:"주소",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:o(()=>[e(n,null,{default:o(()=>[e(u,{modelValue:t.bankName,"onUpdate:modelValue":l[19]||(l[19]=a=>t.bankName=a),label:"은행명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(u,{modelValue:t.accountNo,"onUpdate:modelValue":l[20]||(l[20]=a=>t.accountNo=a),label:"계좌번호",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6"},{default:o(()=>[e(u,{modelValue:t.searchText,"onUpdate:modelValue":l[21]||(l[21]=a=>t.searchText=a),label:"검색창내용",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:o(()=>[e(n,null,{default:o(()=>[e(R,{modelValue:t.memo,"onUpdate:modelValue":l[22]||(l[22]=a=>t.memo=a),label:"비고","row-height":"15",rows:"2",variant:"outlined","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:o(()=>[e(n,{class:"d-flex ga-3 justify-end"},{default:o(()=>[e(f,{color:"indigo-darken-4",text:"저장",variant:"tonal",type:"submit",depressed:""}),e(f,{text:"닫기",variant:"tonal",onClick:l[23]||(l[23]=a=>v("close-dialog"))})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(C,{modelValue:g.value,"onUpdate:modelValue":l[25]||(l[25]=a=>g.value=a),height:"800",width:"900px",persistent:""},{default:o(()=>[e(oe,{onSelected:P,onCloseDialog:l[24]||(l[24]=a=>g.value=!1)})]),_:1},8,["modelValue"])]),_:1})}}},de=J(ne,[["__scopeId","data-v-43e60cd7"]]),se=["onClick"],ue={__name:"CustomerList",setup(F){const{vError:L,vSuccess:g}=K(),_=r(!1),w=r(!1),N=r([]),M=r([]),S=r(""),v=r(""),V=r(""),b=r(""),i=Q({customerType:"",customerCd:"",customerName:"",customerManager:""}),k=r([{title:"구분",key:"customerTypeName",align:"center",width:"60px"},{title:"거래처명",key:"customerName",align:"left",width:"280px"},{title:"주소",key:"address",align:"left",width:"250px"},{title:"대표자명",key:"president",align:"center",width:"70px"},{title:"사업자번호",key:"businessNo",align:"center",width:"120px"},{title:"전화번호",key:"tel",align:"center",width:"120px"},{title:"거래처담당자",key:"customerManager",align:"center",width:"90px"},{title:"이메일",key:"email",align:"center",width:"90px"},{title:"핸드폰번호",key:"customerManagerTel",align:"center",width:"120px"},{title:"담당자명",key:"memberName",align:"center",width:"70px"}]);X(async()=>{M.value=await I.getCodeList("CUSTOMER_TYPE"),t()});const t=async()=>{w.value=!0;try{const c={...i};N.value=await G.getCustomerList(c)}catch(c){L("조회 실패 : "+c.message)}finally{w.value=!1}},E=c=>{ae.isEmpty(c)?(b.value="거래처 신규",v.value="N",V.value=""):(b.value="거래처 상세",v.value="U",V.value=c.customerCd),_.value=!0},P=c=>{g(c),t()},$=()=>{te(k,N.value,"거래처_목록")};return(c,s)=>{const l=d("v-breadcrumbs"),A=d("v-select"),U=d("v-text-field"),x=d("v-btn"),f=d("v-col"),B=d("v-form"),y=d("v-row"),n=d("v-card-text"),u=d("v-card"),p=d("v-spacer"),R=d("v-data-table"),j=d("v-dialog");return T(),D(H,null,[e(l,{items:["MES","기본관리","거래처관리"],class:"custom-breadcrumbs"}),e(u,{class:"pa-1",style:{height:"60px"}},{default:o(()=>[e(n,null,{default:o(()=>[e(y,null,{default:o(()=>[e(B,{ref_key:"srhForm",ref:S,onSubmit:Z(t,["prevent"])},{default:o(()=>[e(f,{class:"d-flex ga-4"},{default:o(()=>[e(A,{modelValue:i.customerType,"onUpdate:modelValue":s[0]||(s[0]=m=>i.customerType=m),label:"거래처구분",items:M.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"130px"}},null,8,["modelValue","items"]),e(U,{modelValue:i.customerName,"onUpdate:modelValue":s[1]||(s[1]=m=>i.customerName=m),density:"compact",label:"거래처명",placeholder:"거래처명 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(U,{modelValue:i.customerCd,"onUpdate:modelValue":s[2]||(s[2]=m=>i.customerCd=m),density:"compact",label:"거래처코드",placeholder:"거래처코드를 입력해주세요",variant:"underlined",style:{width:"150px"}},null,8,["modelValue"]),e(U,{modelValue:i.customerManager,"onUpdate:modelValue":s[3]||(s[3]=m=>i.customerManager=m),density:"compact",label:"거래처담당자",placeholder:"거래처담당자를 입력해주세요",variant:"underlined",style:{width:"120px"}},null,8,["modelValue"]),e(x,{color:"#EFEBE9",type:"submit",text:"조회"}),e(x,{class:"mr-2",text:"초기화",onClick:s[4]||(s[4]=m=>S.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(p),e(y,null,{default:o(()=>[e(f,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:o(()=>[e(x,{color:"brown-lighten-4",text:"신규",onClick:E}),e(x,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:$})]),_:1})]),_:1}),e(y,null,{default:o(()=>[e(f,{class:"pa-0"},{default:o(()=>[e(R,{headers:k.value,items:N.value,loading:w.value,"items-per-page":15,density:"compact","fixed-header":"",height:"650px","return-object":""},{headers:o(({columns:m})=>[W("tr",null,[(T(!0),D(H,null,le(m,C=>(T(),D("th",{key:C.key,class:"custom-header pa-1"},q(C.title),1))),128))])]),"item.customerName":o(({item:m,index:C})=>[W("div",{style:{cursor:"pointer","text-decoration":"underline"},onClick:O=>E(m,C)},q(m.customerName),9,se)]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),e(j,{modelValue:_.value,"onUpdate:modelValue":s[6]||(s[6]=m=>_.value=m),width:"1200px",height:"750px",persistent:""},{default:o(()=>[e(de,{id:V.value,mode:v.value,title:b.value,onSaved:P,onCloseDialog:s[5]||(s[5]=m=>_.value=!1)},null,8,["id","mode","title"])]),_:1},8,["modelValue"])],64)}}},fe=J(ue,[["__scopeId","data-v-eeadef0d"]]);export{fe as default};
