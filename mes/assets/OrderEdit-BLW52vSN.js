import{_ as j}from"./DateSinglePicker-kvIHF26v.js";import{_ as U}from"./SingleFileUpload-DoyY-8JZ.js";import{D as O}from"./DownLoadLink-C2awnyfz.js";import{_ as L,u as Q,a as M,p as R,r as v,m as G,c as u,f as e,g as s,d as h,w as m,F as J,e as T,G as z,o as r,h as f,t as o,B as H,b as P,A as K}from"./index-4poL43z0.js";import{A as C}from"./apiOrders-BSRsZ7m5.js";import"./format-CBpsKyOP.js";import"./filedownLoad-COWTO6ry.js";const W=["id"],X={class:"d-flex justify-end"},Y={class:"approval-user"},Z={style:{height:"80px"}},ee={class:"approval-date"},te={style:{height:"30px"}},le={style:{height:"30px"}},ae={key:0},oe={key:1},se={style:{height:"30px"}},ne={key:0},re={key:1},de={style:{height:"30px"}},ue={key:0},ie={key:1},pe={style:{height:"30px"}},me={key:0},ve={key:1},he={style:{height:"30px"}},fe={key:0},ce={key:1},ye={colspan:"3"},xe={colspan:"4",style:{height:"120px","text-align":"center"}},_e={key:1},be={key:1},ge={class:"d-flex ga-4 justify-end"},Fe={__name:"OrderEdit",setup(Ie){const b=R(),g=T(),{vSuccess:D,vError:N}=Q(),{userId:Ae,memberNm:De}=M(),S=b.params.id,k=v(!1),V=v(!1),y=v(null),x=v(null),l=v({customerNm:"",itemName:"",orderQty:"",dueDate:"",approvalId:""}),n=v({businessUserId:"",productUserId:"",purchaseUserId:"",qcUserId:"",labUserId:"",businessApprovalDate:"",productApprovalDate:"",purchaseApprovalDate:"",qcApprovalDate:"",labApprovalDate:""}),p=v({orderFileName:"",orderFilePath:"",prodFileName:"",prodFilePath:""}),q=async()=>{const a=new FormData;a.append("orderInfo",JSON.stringify(l.value)),a.append("board",null),a.append("approval",null);const t=y.value instanceof File,c=x.value instanceof File;t?a.append("orderFile",y.value):a.append("orderAttachFileId",l.value.orderAttachFileId),c?a.append("prodFile",x.value):a.append("prodAttachFileId",l.value.prodAttachFileId);try{const i=await C.saveOrderInfo(a);D(i),g.push({name:"OrderDetail",params:{id:b.params.id}})}catch(i){N(i)}};G(async()=>{const a=await C.getOrderInfo(S);Object.assign(l.value,a.orderInfo),Object.assign(n.value,a.approvalInfo),B(a)});const B=a=>{a.orderAttachFileInfo===null?k.value=!0:(p.value.orderFileName=a.orderAttachFileInfo.fileName,p.value.orderFilePath=a.orderAttachFileInfo.filePath),a.prodAttachFileInfo===null?V.value=!0:(p.value.prodFileName=a.prodAttachFileInfo.fileName,p.value.prodFilePath=a.prodAttachFileInfo.filePath)},w=async a=>{let t="";a==="o"?(t=l.value.orderAttachFileId,l.value.orderAttachFileId=null):(t=l.value.prodAttachFileId,l.value.prodAttachFileId=null);const c=1;try{const i=await K.deleteFile(t,c);D(i),g.push({name:"OrderDetail",params:{id:b.params.id}})}catch(i){N(i)}},E=()=>{g.push({name:"OrderList"})};return(a,t)=>{const c=h("v-breadcrumbs"),i=h("v-table"),F=h("v-col"),I=h("v-row"),A=h("v-text-field"),_=h("v-btn"),$=z("comma-number");return r(),u(J,null,[e("div",{id:a.$attrs.id},null,8,W),s(c,{items:["MES","발주관리","발주 수정"]}),s(I,null,{default:m(()=>[s(F,null,{default:m(()=>[e("div",X,[s(i,{class:"approval-table"},{default:m(()=>[e("tbody",null,[t[8]||(t[8]=e("tr",null,[e("th",{style:{width:"10px"},rowspan:"3"},[f("결"),e("br"),e("br"),e("br"),f("재")]),e("th",{style:{height:"30px","text-align":"center"}},"기안자"),e("th",{style:{height:"30px","text-align":"center"}},"영업관리"),e("th",{style:{height:"30px","text-align":"center"}},"생산관리"),e("th",{style:{height:"30px","text-align":"center"}},"구매부"),e("th",{style:{height:"30px","text-align":"center"}},"품질관리"),e("th",{style:{height:"30px","text-align":"center"}},"연구소")],-1)),e("tr",Y,[e("td",Z,o(l.value.draftNm),1),e("td",null,o(n.value.businessUserId),1),e("td",null,o(n.value.productUserId),1),e("td",null,o(n.value.purchaseUserId),1),e("td",null,o(n.value.qcUserId),1),e("td",null,o(n.value.labUserId),1)]),e("tr",ee,[e("td",te,o(l.value.draftDate),1),e("td",le,[n.value.businessApprovalDate?(r(),u("span",oe,o(n.value.businessApprovalDate),1)):(r(),u("span",ae," 결제일자 "))]),e("td",se,[n.value.productApprovalDate?(r(),u("span",re,o(n.value.productApprovalDate),1)):(r(),u("span",ne," 결제일자 "))]),e("td",de,[n.value.purchaseApprovalDate?(r(),u("span",ie,o(n.value.purchaseApprovalDate),1)):(r(),u("span",ue," 결제일자 "))]),e("td",pe,[n.value.qcApprovalDate?(r(),u("span",ve,o(n.value.qcApprovalDate),1)):(r(),u("span",me," 결제일자 "))]),e("td",he,[n.value.labApprovalDate?(r(),u("span",ce,o(n.value.labApprovalDate),1)):(r(),u("span",fe," 결제일자 "))])])])]),_:1})])]),_:1})]),_:1}),s(I,null,{default:m(()=>[s(F,null,{default:m(()=>[s(i,{class:"order-table"},{default:m(()=>[e("tbody",null,[e("tr",null,[t[9]||(t[9]=e("th",null,"문서번호",-1)),e("td",null,o(l.value.orderNm),1),t[10]||(t[10]=e("th",null,"처리기한",-1)),t[11]||(t[11]=e("td",null,"즉시",-1))]),e("tr",null,[t[12]||(t[12]=e("th",null,"보존년한",-1)),t[13]||(t[13]=e("td",null,"5년",-1)),t[14]||(t[14]=e("th",null,"기안일자",-1)),e("td",null,o(l.value.draftDate),1)]),e("tr",null,[t[15]||(t[15]=e("th",null,"기안부서",-1)),e("td",null,o(l.value.draftDept),1),t[16]||(t[16]=e("th",null,"기안자",-1)),e("td",null,o(l.value.draftNm),1)]),e("tr",null,[t[17]||(t[17]=e("th",null,"제목",-1)),e("td",ye,o(l.value.customerNm)+"   "+o(l.value.itemName)+"    발주서 및 제품 사양서 검토 요청의 건 ",1)]),e("tr",null,[e("td",xe,[f(o(l.value.customerNm)+"    "+o(l.value.itemName)+"    발주서 및 제품 사양서 기안하오니 검토하여 주시기 바랍니다.",1),t[18]||(t[18]=e("br",null,null,-1)),t[19]||(t[19]=e("br",null,null,-1)),t[20]||(t[20]=f(" - 아 래- "))])]),e("tr",null,[t[21]||(t[21]=e("th",null,"고객사명",-1)),e("td",null,[s(A,{modelValue:l.value.customerNm,"onUpdate:modelValue":t[0]||(t[0]=d=>l.value.customerNm=d),style:{width:"500px",height:"20px"},density:"compact",class:"mb-4"},null,8,["modelValue"])]),t[22]||(t[22]=e("th",null,"품목",-1)),e("td",null,[s(A,{modelValue:l.value.itemName,"onUpdate:modelValue":t[1]||(t[1]=d=>l.value.itemName=d),style:{width:"500px",height:"20px","vertical-align":"center"},density:"compact",class:"mb-4"},null,8,["modelValue"])])]),e("tr",null,[t[23]||(t[23]=e("th",null,"발주수량",-1)),e("td",null,[H(s(A,{modelValue:l.value.orderQty,"onUpdate:modelValue":t[2]||(t[2]=d=>l.value.orderQty=d),density:"compact",style:{width:"500px",height:"20px"},class:"mb-4"},null,8,["modelValue"]),[[$]])]),t[24]||(t[24]=e("th",null,"납기일자",-1)),e("td",null,[s(j,{modelValue:l.value.dueDate,"onUpdate:modelValue":t[3]||(t[3]=d=>l.value.dueDate=d),title:"납기일자",style:{width:"500px",height:"20px","vertical-align":"middle"},class:"mb-10"},null,8,["modelValue"])])]),e("tr",null,[t[27]||(t[27]=e("th",null,"발주서 첨부파일",-1)),e("td",null,[k.value?(r(),P(U,{key:0,modelValue:y.value,"onUpdate:modelValue":t[4]||(t[4]=d=>y.value=d),style:{height:"20px",width:"500px"},class:"mb-4"},null,8,["modelValue"])):(r(),u("div",_e,[s(O,{filepath:p.value.orderFilePath||"",fileName:p.value.orderFileName||""},null,8,["filepath","fileName"]),t[25]||(t[25]=f("      ")),s(_,{text:"삭제",onClick:t[5]||(t[5]=d=>w("o"))})]))]),t[28]||(t[28]=e("th",null,"제품사양서",-1)),e("td",null,[V.value?(r(),P(U,{key:0,modelValue:x.value,"onUpdate:modelValue":t[6]||(t[6]=d=>x.value=d),style:{height:"20px",width:"500px"},class:"mb-4"},null,8,["modelValue"])):(r(),u("div",be,[s(O,{filepath:p.value.prodFilePath||"",fileName:p.value.prodFileName||""},null,8,["filepath","fileName"]),t[26]||(t[26]=f("      ")),s(_,{text:"삭제",density:"compact",onClick:t[7]||(t[7]=d=>w("p"))})]))])])])]),_:1})]),_:1})]),_:1}),s(I,null,{default:m(()=>[s(F,null,{default:m(()=>[e("div",ge,[s(_,{text:"저장",class:"gt-2",onClick:q}),s(_,{text:"목록",class:"mr-3",onClick:E})])]),_:1})]),_:1})],64)}}},Ce=L(Fe,[["__scopeId","data-v-c626e7be"]]);export{Ce as default};
