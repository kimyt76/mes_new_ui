import{u as B,r as i,k as T,m as K,A as R,c as q,g as e,d as n,w as o,F as z,K as G,o as H,j as J,h as O,t as g,f as V,U as Q}from"./index-DbwVXjcr.js";import{e as W}from"./exportToExcel-Kkbtezxo.js";import{i as X}from"./common-BCog4hmn.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const Z=["onClick"],ee=["onClick"],ie={__name:"UserMgmtList",setup(te){const{vError:C,vSuccess:N}=B(),r=i(!1),h=i(!1),w=i(null),c=i([]),U=i([]),m=i(""),p=i("N"),v=i(""),s=T({userId:"",deptNm:"",jobPosition:"",useYn:""}),I=[{text:"재직",value:"Y"},{text:"퇴직",value:"N"}],_=(a,l)=>{X(a.userId)?(p.value="N",v.value="사용자 등록",m.value=""):(p.value="U",m.value=a.userId,v.value="사용자 상세정보"),r.value=!0},k=i([{title:"사용자ID",key:"userId",align:"center",width:"120px"},{title:"사용자명",key:"memberNm",align:"center",width:"150px"},{title:"부서",key:"deptNm",align:"center",width:"170px"},{title:"직급",key:"jobPosition",align:"center",width:"100px"},{title:"전화번호",key:"phone",align:"center",width:"130px"},{title:"이메일",key:"email",align:"center",width:"150px"},{title:"재직여부",key:"useYn",align:"center",width:"70px"},{title:"비고",key:"etc",align:"center",width:"150px"}]),x=async()=>{h.value=!0;try{const a={...s};c.value=await G.getUserList(a)}catch(a){C(a)}finally{h.value=!1}},Y=a=>{N(a),x()};K(async()=>{U.value=await R.getCodeList("use_yn"),x()});const S=()=>{W(k,c.value,"사용자_목록")};return(a,l)=>{const j=n("v-breadcrumbs"),f=n("v-text-field"),E=n("v-select"),d=n("v-btn"),y=n("v-col"),L=n("v-form"),b=n("v-row"),P=n("v-card-text"),A=n("v-card"),D=n("v-spacer"),F=n("v-data-table"),M=n("v-dialog");return H(),q(z,null,[e(j,{items:["MES","시스템관리","사용자 관리"],class:"custom-breadcrumbs"}),e(A,{class:"pa-1",style:{height:"60px"}},{default:o(()=>[e(P,null,{default:o(()=>[e(b,null,{default:o(()=>[e(L,{ref_key:"srhForm",ref:w,onSubmit:J(x,["prevent"])},{default:o(()=>[e(y,{class:"d-flex ga-4"},{default:o(()=>[e(f,{modelValue:s.userId,"onUpdate:modelValue":l[0]||(l[0]=t=>s.userId=t),label:"사용자 이름",placeholder:"사용자 이름 입력해주세요",variant:"underlined",density:"compact",style:{width:"200px"}},null,8,["modelValue"]),e(f,{modelValue:s.jobPosition,"onUpdate:modelValue":l[1]||(l[1]=t=>s.jobPosition=t),label:"직급",placeholder:"직급을 입력해주세요",variant:"underlined",density:"compact",style:{width:"200px"}},null,8,["modelValue"]),e(f,{modelValue:s.deptNm,"onUpdate:modelValue":l[2]||(l[2]=t=>s.deptNm=t),label:"부서",placeholder:"부서를 입력해주세요",variant:"underlined",density:"compact",style:{width:"200px"}},null,8,["modelValue"]),e(E,{modelValue:s.useYn,"onUpdate:modelValue":l[3]||(l[3]=t=>s.useYn=t),label:"재직여부",items:I,"item-title":"text","item-value":"value",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue"]),e(d,{text:"조회",color:"brown-lighten-4",type:"submit"}),e(d,{text:"초기화",onClick:l[4]||(l[4]=t=>w.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(D),e(b,null,{default:o(()=>[e(y,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:o(()=>[e(d,{color:"brown-lighten-4",text:"신규",onClick:_}),e(d,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:S})]),_:1})]),_:1}),e(b,null,{default:o(()=>[e(y,{class:"pa-0"},{default:o(()=>[e(F,{headers:k.value,items:c.value,"items-per-page":15,density:"compact","fixed-header":"",height:"700px",class:"custom-table","return-object":""},{"item.userId":o(({item:t,index:u})=>[V("div",{style:{cursor:"pointer","text-decoration":"underline"},onClick:$=>_(t,u)},g(t.userId),9,Z)]),"item.memberNm":o(({item:t,index:u})=>[V("div",{style:{cursor:"pointer","text-decoration":"underline"},onClick:$=>_(t,u)},g(t.memberNm),9,ee)]),"item.useYn":o(({item:t,index:u})=>[O(g(t.useYn==="Y"?"재직":"퇴직"),1)]),_:1},8,["headers","items"])]),_:1})]),_:1}),e(M,{modelValue:r.value,"onUpdate:modelValue":l[6]||(l[6]=t=>r.value=t),"max-width":"800px",persistent:""},{default:o(()=>[e(Q,{mode:p.value,id:m.value,title:v.value,onSaved:Y,onCloseDialog:l[5]||(l[5]=t=>r.value=!1)},null,8,["mode","id","title"])]),_:1},8,["modelValue"])],64)}}};export{ie as default};
