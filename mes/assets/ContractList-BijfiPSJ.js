import{u as M,r as d,k as Q,m as R,A as $,c as g,g as t,d as o,w as a,F as V,e as j,o as f,j as z,f as m,H as S,h,t as i,i as T,n as G}from"./index-mUQ3O7M_.js";import{A as H}from"./apiOrders-T4pvcm4d.js";import{e as O}from"./exportToExcel-Kkbtezxo.js";import{f as A,i as J}from"./common-BfWOXsz0.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const K=["onClick"],W=["onClick"],le={__name:"ContractList",setup(X){const w=j(),{vError:D}=M(),F=d(!1),p=d([]),k=d([]),b=d(""),l=Q({itemName:"",managerName:"",customerName:"",statusType:""}),C=[{title:"일자-No.",key:"contractDateSeq",align:"center",width:"100px"},{title:"품목명",key:"itemName",align:"start",width:"380px"},{title:"납기일자",key:"dueDate",align:"center",width:"100px"},{title:"담당자명",key:"managerName",align:"center",width:"100px"},{title:"거래처명",key:"customerName",align:"start",width:"200px"},{title:"주문수량합계",key:"totQty",align:"end",width:"100px"},{title:"주문공급가액합계",key:"totSupplyPrice",align:"end",width:"120px"},{title:"진행상태",key:"statusType",align:"center",width:"70px"},{title:"인쇄",key:"printYn",align:"center",width:"40px"}],u=(s,n)=>{J(s.contractId)?w.push({name:"ContractReg"}):w.push({name:"ContractDetail",params:{id:s.contractId}})},N=async()=>{try{const s={...l};p.value=await H.getContractList(s)}catch(s){D(s.message)}finally{}};R(async()=>{k.value=await $.getCodeList("status_type"),N()});const L=()=>{O(C,p.value,"수주_목록")};return(s,n)=>{const E=o("v-breadcrumbs"),y=o("v-text-field"),P=o("v-select"),c=o("v-btn"),x=o("v-col"),B=o("v-form"),_=o("v-row"),U=o("v-card-text"),Y=o("v-card"),q=o("v-spacer"),I=o("v-data-table");return f(),g(V,null,[t(E,{items:["MES","영업관리","수주관리"],class:"custom-breadcrumbs"}),t(Y,{class:"pa-1",style:{height:"60px"}},{default:a(()=>[t(U,null,{default:a(()=>[t(_,null,{default:a(()=>[t(B,{ref_key:"srhForm",ref:b,onSubmit:z(N,["prevent"])},{default:a(()=>[t(x,{class:"d-flex flex-row ga-3"},{default:a(()=>[t(y,{modelValue:l.itemName,"onUpdate:modelValue":n[0]||(n[0]=e=>l.itemName=e),dense:"",density:"compact",label:"품목명",placeholder:"품목명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),t(y,{modelValue:l.managerName,"onUpdate:modelValue":n[1]||(n[1]=e=>l.managerName=e),dense:"",density:"compact",label:"담당자명",placeholder:"담당자명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),t(y,{modelValue:l.customerName,"onUpdate:modelValue":n[2]||(n[2]=e=>l.customerName=e),dense:"",density:"compact",label:"거래처명",placeholder:"거래처명을 입력해주세요",variant:"underlined",style:{width:"150px"}},null,8,["modelValue"]),t(P,{modelValue:l.statusType,"onUpdate:modelValue":n[3]||(n[3]=e=>l.statusType=e),label:"진행상태",items:k.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"100px"}},null,8,["modelValue","items"]),t(c,{text:"조회",color:"brown-lighten-4",type:"submit"}),t(c,{text:"초기화",onClick:n[4]||(n[4]=e=>b.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),t(q),t(_,null,{default:a(()=>[t(x,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:a(()=>[t(c,{color:"brown-lighten-4",text:"신규",onClick:u}),t(c,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:L})]),_:1})]),_:1}),t(_,null,{default:a(()=>[t(x,{class:"pa-0"},{default:a(()=>[t(I,{headers:C,items:p.value,loading:F.value,"items-per-page":15,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요",density:"compact","fixed-header":"",height:"690px"},{headers:a(({columns:e})=>[m("tr",null,[(f(!0),g(V,null,G(e,r=>(f(),g("th",{key:r.key,class:"custom-header",style:S([{height:"40px"},{textAlign:"center"}])},i(r.title),1))),128))])]),"item.contractDateSeq":a(({item:e,index:r})=>[m("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:v=>u(e,r)},i(e.contractDateSeq),9,K)]),"item.itemName":a(({item:e,index:r})=>[m("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:v=>u(e,r)},i(e.itemName),9,W)]),"item.totQty":a(({item:e})=>[h(i(T(A)(e.totQty)),1)]),"item.totSupplyPrice":a(({item:e})=>[h(i(T(A)(e.totSupplyPrice)),1)]),"item.statusType":a(({item:e,index:r})=>[h(i(e.statusType==="ING"?"진행중":"종료"),1)]),"item.printYn":a(({item:e,index:r})=>[m("p",{style:S([{padding:"4px","text-align":"center",cursor:"pointer"},{backgroundColor:e.printYn==="Y"?"#FFAB91":"transparent"}]),onClick:n[5]||(n[5]=(...v)=>s.onPrint&&s.onPrint(...v))},"인쇄 ",4)]),_:1},8,["items","loading"])]),_:1})]),_:1})],64)}}};export{le as default};
