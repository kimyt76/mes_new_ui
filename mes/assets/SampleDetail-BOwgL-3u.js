import{_ as B,a as T,u as Y,p as Q,r as p,B as j,k as F,q as O,m as z,A as f,c as K,f as g,g as e,d as u,w as n,F as P,e as W,o as $,i as G}from"./index-DjI8e8VZ.js";import{A as v}from"./apiLab-C2sC-jhp.js";import{d as H,i as N,e as x}from"./common-DeQ1G7iv.js";import"./format-DWu4U6B8.js";const J=["id"],X={__name:"SampleDetail",setup(Z){const C=W(),{userId:U}=T(),{vError:w,vSuccess:M,vWarning:h}=Y(),V=Q(),c=V.params.id,y=p([]),r=p([]),q=p([]),I=j(()=>["MES","연구관리관리",!!V.params.id?"샘플상세":"샘플등록"]),S=p(["신규","개선","추가"]),l=F({areaCd:"",clientName:"",itemName:"",businessManagerName:"",formulation:"",formulationCd:"",labManagerName:"",reqDate:"",prodMgmtNo:"",countQty:0,qty:0,etc:"",confirmYn:"",endReason:"",sampleId:c,userId:U});O(()=>l.formulation,o=>{console.log("newVal",o),N(o)||(l.formulationCd=o)});const A=async()=>{try{const o={...l};o.reqDate=x(l.reqDate);const a=await v.saveSampleInfo(o);M("저장되었습니다."),_()}catch{w("샘플정보 저장 중 오류가 발생했습니다.");return}};z(async()=>{if(y.value=await f.getCodeList("formulation_cd"),q.value=await f.getCodeList("use_yn"),r.value=await f.getCodeList("AREA"),r.value=r.value.filter(o=>!["A003"].includes(o.code)),l.reqDate=H(),N(c))l.prodMgmtNo=await v.getNextProdMgmtNo();else{const o=await v.getSampleInfo(c);Object.assign(l,o),l.formulation=o.formulationCd}});const _=()=>{C.push({name:"SampleList"})};return(o,a)=>{const D=u("v-breadcrumbs"),i=u("v-select"),d=u("v-col"),s=u("v-text-field"),m=u("v-row"),L=u("v-date-input"),R=u("v-textarea"),b=u("v-btn"),k=u("v-card-text"),E=u("v-card");return $(),K(P,null,[g("div",{id:o.$attrs.id},null,8,J),e(D,{items:I.value,class:"custom-breadcrumbs"},null,8,["items"]),e(E,null,{default:n(()=>[e(k,null,{default:n(()=>[e(m,{class:"d-flex",dense:""},{default:n(()=>[e(d,null,{default:n(()=>[e(i,{modelValue:l.areaCd,"onUpdate:modelValue":a[0]||(a[0]=t=>l.areaCd=t),items:r.value,label:"공장명","item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(d,null,{default:n(()=>[e(s,{modelValue:l.clientName,"onUpdate:modelValue":a[1]||(a[1]=t=>l.clientName=t),label:"업체명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(d,null,{default:n(()=>[e(s,{modelValue:l.itemName,"onUpdate:modelValue":a[2]||(a[2]=t=>l.itemName=t),label:"품목명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(d,null,{default:n(()=>[e(s,{modelValue:l.businessManagerName,"onUpdate:modelValue":a[3]||(a[3]=t=>l.businessManagerName=t),label:"영업담당자명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,null,{default:n(()=>[e(d,null,{default:n(()=>[e(L,{modelValue:l.reqDate,"onUpdate:modelValue":a[4]||(a[4]=t=>l.reqDate=t),label:"의뢰일자","display-format":G(x),variant:"underlined",density:"compact","prepend-icon":"","append-inner-icon":"mdi-calendar"},null,8,["modelValue","display-format"])]),_:1}),e(d,{class:"d-flex",style:{gap:"8px"}},{default:n(()=>[e(i,{modelValue:l.formulation,"onUpdate:modelValue":a[5]||(a[5]=t=>l.formulation=t),items:y.value,label:"제형품목","item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"260px"}},null,8,["modelValue","items"]),e(s,{modelValue:l.formulationCd,"onUpdate:modelValue":a[6]||(a[6]=t=>l.formulationCd=t),label:"제형",variant:"underlined",density:"compact",style:{width:"60px"},readOnly:""},null,8,["modelValue"])]),_:1}),e(d,null,{default:n(()=>[e(s,{modelValue:l.labManagerName,"onUpdate:modelValue":a[7]||(a[7]=t=>l.labManagerName=t),label:"연구담당자명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(d,null,{default:n(()=>[e(i,{modelValue:l.confirmYn,"onUpdate:modelValue":a[8]||(a[8]=t=>l.confirmYn=t),items:["확정","미확정"],label:"확정여부",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,null,{default:n(()=>[e(d,null,{default:n(()=>[e(s,{modelValue:l.prodMgmtNo,"onUpdate:modelValue":a[9]||(a[9]=t=>l.prodMgmtNo=t),label:"제품관리번호",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(d,null,{default:n(()=>[e(i,{modelValue:l.statusType,"onUpdate:modelValue":a[10]||(a[10]=t=>l.statusType=t),items:S.value,label:"상태유형",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(d,{class:"d-flex"},{default:n(()=>[e(s,{modelValue:l.countQty,"onUpdate:modelValue":a[11]||(a[11]=t=>l.countQty=t),label:"횟수",type:"number",variant:"underlined",density:"compact",class:"ea-field"},null,8,["modelValue"]),e(s,{modelValue:l.qty,"onUpdate:modelValue":a[12]||(a[12]=t=>l.qty=t),label:"수량",type:"number",variant:"underlined",density:"compact",class:"ea-field",style:{"text-align":"right"}},{"append-inner":n(()=>a[15]||(a[15]=[g("span",{style:{"font-size":"14px",color:"gray"}},"ea",-1)])),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:n(()=>[e(s,{modelValue:l.endReason,"onUpdate:modelValue":a[13]||(a[13]=t=>l.endReason=t),label:"종료사유",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,null,{default:n(()=>[e(d,{cols:"12"},{default:n(()=>[e(R,{modelValue:l.etc,"onUpdate:modelValue":a[14]||(a[14]=t=>l.etc=t),label:"진행 및 특이사항/비고(사양 및 셋팅값)",variant:"underlined",density:"compact",rows:"1"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,null,{default:n(()=>[e(d,{class:"d-flex justify-end"},{default:n(()=>[e(b,{color:"brown-lighten-4",text:"저장",class:"mr-2",onClick:A}),e(b,{text:"목록",onClick:_})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}},ne=B(X,[["__scopeId","data-v-048a90db"]]);export{ne as default};
