import{r,n as B,d as l,c as V,o as I,g as e,w as t,h as w,t as m,f as p,i as D,F as j,m as G,e as z,j as H,G as A,v as O}from"./index-nF4TROGP.js";import{A as E}from"./apiOrders-BdegjJ-D.js";import{e as J}from"./exportToExcel-Kkbtezxo.js";import{f as U,i as K}from"./common-DgUt4mpn.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const W={class:"wrap-cell text-right"},X={__name:"ShipmentPop",props:{id:{type:String},no:{type:String}},emits:["close-dialog"],setup(T,{emit:b}){const u=b,_=r([]),d=T,v=[{title:"품목코드",key:"itemCd",align:"center",width:"120px"},{title:"품목명",key:"itemName",align:"start",width:"250px"},{title:"수량",key:"qty",align:"end",width:"120px"},{title:"판매",key:"saleDateSeq",align:"center",width:"110px"}],k=async()=>{_.value=await E.getShipmentItemList(d.id)};return B(async()=>{k()}),(N,o)=>{const S=l("v-toolbar-title"),C=l("v-spacer"),x=l("v-icon"),h=l("v-btn"),q=l("v-toolbar"),i=l("v-card-subtitle"),a=l("v-card-item"),L=l("v-data-table-virtual"),g=l("v-col"),c=l("v-row"),f=l("v-card");return I(),V(j,null,[e(q,{height:"40",class:"d-flex align-center justify-space-between px-2 toolbar-Head"},{default:t(()=>[e(S,null,{default:t(()=>o[2]||(o[2]=[w("판매 목록")])),_:1}),e(C),e(h,{icon:"",onClick:o[0]||(o[0]=y=>u("close-dialog"))},{default:t(()=>[e(x,null,{default:t(()=>o[3]||(o[3]=[w("mdi-close")])),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(C),e(a,null,{default:t(()=>[e(i,null,{default:t(()=>[w(" 판매조회 : "+m(d.no),1)]),_:1})]),_:1}),e(a,null,{default:t(()=>[e(L,{headers:v,items:_.value,density:"compact","fixed-header":"",height:"300px",class:"custom-table"},{"item.qty":t(({item:y})=>[p("div",W,m(D(U)(y.qty)),1)]),_:1},8,["items"])]),_:1}),e(c,null,{default:t(()=>[e(g,{class:"d-flex justify-end"},{default:t(()=>[e(h,{text:"닫기",variant:"tonal",class:"mb-4 mr-4",onClick:o[1]||(o[1]=y=>u("close-dialog"))})]),_:1})]),_:1})]),_:1})],64)}}},Z=["onClick"],ee=["onClick"],se={__name:"ShipmentList",setup(T){let b=r(""),u=r("");const _=z(),d=r(!1),v=r(!1),k=r(""),N=r([]),o=G({itemName:"",managerName:"",managerId:"",customerName:"",customerCd:""}),S=r([{title:"일자-No.",key:"shipmentDateSeq",align:"center",width:"120px"},{title:"품목명",key:"itemName",align:"start",width:"350px"},{title:"거래처명",key:"customerName",align:"start",width:"200px"},{title:"담당자명",key:"managerName",align:"center",width:"90px"},{title:"수량합계",key:"totQty",align:"end",width:"100px"},{title:"출하예정일",key:"dueDate",align:"center",width:"100px"},{title:"출고시간",key:"releaseTiem",align:"center",width:"100px"},{title:"창고명",key:"descStorageName",align:"center",width:"100px"},{title:"인쇄",key:"printYn",align:"center",width:"100px"},{title:"판매",key:"shipmentId",align:"center",width:"100px"}]),C=(i,a)=>{u.value=i.shipmentId,b.value=i.shipmentDateSeq,d.value=!0},x=(i,a)=>{K(i.shipmentId)?_.push({name:"ShipmentReg"}):_.push({name:"ShipmentDetail",params:{id:i.shipmentId}})},h=async()=>{try{v.value=!0;const i={...o};N.value=await E.getShipmentList(i)}catch{}finally{v.value=!1}};B(async()=>{h()});const q=()=>{J(S,N.value,"출하지시서_목록")};return(i,a)=>{const L=l("v-breadcrumbs"),g=l("v-text-field"),c=l("v-btn"),f=l("v-col"),y=l("v-form"),$=l("v-row"),Y=l("v-card-text"),M=l("v-card"),P=l("v-spacer"),Q=l("v-data-table"),R=l("v-dialog");return I(),V(j,null,[e(L,{items:["MES","영업관리","출하지시서관리"],class:"custom-breadcrumbs"}),e(M,{class:"pa-1",style:{height:"60px"}},{default:t(()=>[e(Y,null,{default:t(()=>[e($,null,{default:t(()=>[e(y,{ref_key:"srhForm",ref:k,onSubmit:H(h,["prevent"])},{default:t(()=>[e(f,{class:"d-flex flex-row ga-3"},{default:t(()=>[e(g,{modelValue:o.itemName,"onUpdate:modelValue":a[0]||(a[0]=n=>o.itemName=n),dense:"",density:"compact",label:"품목명",placeholder:"품목명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(g,{modelValue:o.managerName,"onUpdate:modelValue":a[1]||(a[1]=n=>o.managerName=n),dense:"",density:"compact",label:"담당자명",placeholder:"담당자명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(g,{modelValue:o.customerName,"onUpdate:modelValue":a[2]||(a[2]=n=>o.customerName=n),dense:"",density:"compact",label:"거래처명",placeholder:"거래처명을 입력해주세요",variant:"underlined",style:{width:"150px"}},null,8,["modelValue"]),e(c,{text:"조회",color:"brown-lighten-4",type:"submit"}),e(c,{text:"초기화",onClick:a[3]||(a[3]=n=>k.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(P),e($,null,{default:t(()=>[e(f,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:t(()=>[e(c,{color:"brown-lighten-4",text:"신규",onClick:x}),e(c,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:q})]),_:1})]),_:1}),e($,null,{default:t(()=>[e(f,{class:"pa-0"},{default:t(()=>[e(Q,{headers:S.value,items:N.value,loading:v.value,"items-per-page":15,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요",density:"compact","fixed-header":"",height:"690px","return-object":""},{headers:t(({columns:n})=>[p("tr",null,[(I(!0),V(j,null,O(n,s=>(I(),V("th",{key:s.key,class:"custom-header",style:A([{height:"40px"},{textAlign:"center"}])},m(s.title),1))),128))])]),"item.shipmentDateSeq":t(({item:n,index:s})=>[p("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:F=>x(n,s)},m(n.shipmentDateSeq),9,Z)]),"item.itemName":t(({item:n,index:s})=>[p("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:F=>x(n,s)},m(n.itemName),9,ee)]),"item.totQty":t(({item:n})=>[w(m(D(U)(n.totQty)),1)]),"item.statusType":t(({item:n,index:s})=>[w(m(n.statusType==="ING"?"진행중":"종료"),1)]),"item.printYn":t(({item:n,index:s})=>[p("p",{style:A([{padding:"4px","text-align":"center",cursor:"pointer"},{backgroundColor:n.printYn==="Y"?"#FFAB91":"transparent"}]),onClick:a[4]||(a[4]=(...F)=>i.onPrint&&i.onPrint(...F))},"인쇄 ",4)]),"item.shipmentId":t(({item:n,index:s})=>[p("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:C}," 판매 ")]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),e(R,{modelValue:d.value,"onUpdate:modelValue":a[6]||(a[6]=n=>d.value=n),width:"900px",height:"400px",persistent:""},{default:t(()=>[e(X,{id:D(u),no:D(b),onCloseDialog:a[5]||(a[5]=n=>d.value=!1)},null,8,["id","no"])]),_:1},8,["modelValue"])],64)}}};export{se as default};
