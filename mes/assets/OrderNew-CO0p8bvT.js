import{_ as E,r as i,a as L,u as J,m as M,c as G,g as s,d,w as r,F as H,e as R,G as T,o as z,f as l,h as f,t as n,i as D,B as K}from"./index-4poL43z0.js";import{j as A,k as P}from"./common-BYhKLuQs.js";import{_ as W}from"./DateSinglePicker-kvIHF26v.js";import{_ as S}from"./SingleFileUpload-DoyY-8JZ.js";import{A as V}from"./apiOrders-BSRsZ7m5.js";import{_ as X}from"./UserListPop-CdidCHTm.js";import"./format-CBpsKyOP.js";const Y={class:"d-flex justify-end"},Z={class:"approval-user"},c={style:{height:"80px"}},tt={class:"approval-date"},lt={style:{height:"30px"}},et={colspan:"3"},st={colspan:"4",style:{height:"120px","text-align":"center"}},nt={class:"d-flex ga-4 justify-end"},ot={__name:"OrderNew",setup(at){const p=i(!1),{userId:O,memberNm:x,deptNm:w}=L(),{vError:C,vSuccess:k}=J(),e=i({orderDate:A(),seq:"",customerNm:"",itemName:"",orderQty:0,dueDate:"",draftNm:"",draftDept:"",draftDate:"",draftUserId:""}),u=i({businessUserId:"",productUserId:"",purchaseUserId:"",qcUserId:"",labUserId:"",businessApprovalDate:"",productApprovalDate:"",purchaseApprovalDate:"",qcApprovalDate:"",labApprovalDate:""}),N=i(""),m=i(null),v=i(null),q=(a,t)=>{N.value=t,u.value.labUserId=a},F=async()=>{e.value.draftNm=x,e.value.draftDept=w,e.value.draftDate=A(),e.value.draftUserId=O,e.value.orderQty=P(e.value.orderQty);const a=new FormData;a.append("orderInfo",JSON.stringify(e.value)),a.append("approval",JSON.stringify(u.value)),m.value&&a.append("orderFile",m.value),v.value&&a.append("prodFile",v.value);try{const t=await V.saveOrderInfo(a);k(t),I.push({name:"OrderList"})}catch(t){C(t.response)}};M(async()=>{e.value.seq=await V.getSeq();const a=await V.getApprovalInfo();Object.assign(u.value,a)});const Q=()=>{e.value.orderQty===0&&(e.value.orderQty="")},I=R(),_=()=>{I.push({name:"OrderList"})};return(a,t)=>{const $=d("v-breadcrumbs"),g=d("v-btn"),U=d("v-table"),y=d("v-col"),b=d("v-row"),h=d("v-text-field"),j=d("v-dialog"),B=T("comma-number");return z(),G(H,null,[s($,{items:["MES","발주관리","발주 등록"]}),s(b,{class:"flex-wrap"},{default:r(()=>[s(y,null,{default:r(()=>[l("div",Y,[s(U,{class:"approval-table"},{default:r(()=>[l("tbody",null,[t[14]||(t[14]=l("tr",null,[l("th",{style:{width:"10px"},rowspan:"3"},[f("결"),l("br"),l("br"),l("br"),f("재")]),l("th",{style:{height:"30px","text-align":"center"}},"기안자"),l("th",{style:{height:"30px","text-align":"center"}},"영업관리"),l("th",{style:{height:"30px","text-align":"center"}},"생산관리"),l("th",{style:{height:"30px","text-align":"center"}},"구매부"),l("th",{style:{height:"30px","text-align":"center"}},"품질관리"),l("th",{style:{height:"30px","text-align":"center"}},"연구소")],-1)),l("tr",Z,[l("td",c,n(D(x)),1),l("td",null,[l("span",null,n(u.value.businessUserId),1)]),l("td",null,[l("span",null,n(u.value.productUserId),1)]),l("td",null,[l("span",null,n(u.value.purchaseUserId),1)]),l("td",null,[l("span",null,n(u.value.qcUserId),1)]),l("td",null,[l("span",null,n(N.value),1),s(g,{width:"20px",text:"결제자",onClick:t[0]||(t[0]=o=>p.value=!0)})])]),l("tr",tt,[l("td",lt,n(e.value.orderDate),1),t[9]||(t[9]=l("td",{style:{height:"30px"}},"결제일자",-1)),t[10]||(t[10]=l("td",{style:{height:"30px"}},"결제일자",-1)),t[11]||(t[11]=l("td",{style:{height:"30px"}},"결제일자",-1)),t[12]||(t[12]=l("td",{style:{height:"30px"}},"결제일자",-1)),t[13]||(t[13]=l("td",{style:{height:"30px"}},"결제일자",-1))])])]),_:1})])]),_:1})]),_:1}),s(b,null,{default:r(()=>[s(y,null,{default:r(()=>[s(U,{class:"order-table"},{default:r(()=>[l("tbody",null,[l("tr",null,[t[15]||(t[15]=l("th",null,"문서번호",-1)),l("td",null,n(e.value.orderDate)+" - "+n(e.value.seq),1),t[16]||(t[16]=l("th",null,"처리기한",-1)),t[17]||(t[17]=l("td",null,"즉시",-1))]),l("tr",null,[t[18]||(t[18]=l("th",null,"보존년한",-1)),t[19]||(t[19]=l("td",null,"5년",-1)),t[20]||(t[20]=l("th",null,"기안일자",-1)),l("td",null,n(e.value.orderDate),1)]),l("tr",null,[t[21]||(t[21]=l("th",null,"기안부서",-1)),l("td",null,n(D(w)),1),t[22]||(t[22]=l("th",null,"기안자",-1)),l("td",null,n(D(x)),1)]),l("tr",null,[t[23]||(t[23]=l("th",null,"제목",-1)),l("td",et,n(e.value.customerNm)+"   "+n(e.value.itemName)+"    발주서 및 제품 사양서 검토 요청의 건 ",1)]),l("tr",null,[l("td",st,[f(n(e.value.customerNm)+"    "+n(e.value.itemName)+"    발주서 및 제품 사양서 기안하오니 검토하여 주시기 바랍니다.",1),t[24]||(t[24]=l("br",null,null,-1)),t[25]||(t[25]=l("br",null,null,-1)),t[26]||(t[26]=f(" - 아 래- "))])]),l("tr",null,[t[27]||(t[27]=l("th",null,"고객사명",-1)),l("td",null,[s(h,{modelValue:e.value.customerNm,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.customerNm=o),style:{width:"500px",height:"20px"},density:"compact",class:"mb-4",label:"고객사명"},null,8,["modelValue"])]),t[28]||(t[28]=l("th",null,"품목",-1)),l("td",null,[s(h,{modelValue:e.value.itemName,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.itemName=o),style:{width:"500px",height:"20px","vertical-align":"center"},density:"compact",class:"mb-4",label:"품명"},null,8,["modelValue"])])]),l("tr",null,[t[29]||(t[29]=l("th",null,"발주수량",-1)),l("td",null,[K(s(h,{modelValue:e.value.orderQty,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.orderQty=o),density:"compact",style:{width:"500px",height:"20px","text-align":"right"},class:"mb-4",label:"발주수량",onClick:Q},null,8,["modelValue"]),[[B]])]),t[30]||(t[30]=l("th",null,"납기일자",-1)),l("td",null,[s(W,{modelValue:e.value.dueDate,"onUpdate:modelValue":t[4]||(t[4]=o=>e.value.dueDate=o),title:"납기일자",style:{width:"500px",height:"20px","vertical-align":"middle"},class:"mb-10"},null,8,["modelValue"])])]),l("tr",null,[t[31]||(t[31]=l("th",null,"발주서 첨부파일",-1)),l("td",null,[s(S,{modelValue:m.value,"onUpdate:modelValue":t[5]||(t[5]=o=>m.value=o),style:{height:"20px",width:"500px"},class:"mb-4"},null,8,["modelValue"])]),t[32]||(t[32]=l("th",null,"제품사양서",-1)),l("td",null,[s(S,{modelValue:v.value,"onUpdate:modelValue":t[6]||(t[6]=o=>v.value=o),style:{height:"20px",width:"500px"},class:"mb-4"},null,8,["modelValue"])])])])]),_:1})]),_:1})]),_:1}),s(b,null,{default:r(()=>[s(y,null,{default:r(()=>[l("div",nt,[s(g,{text:"저장",class:"gt-2",color:"brown-lighten-4",onClick:F}),s(g,{text:"목록",class:"mr-3",onClick:_})])]),_:1})]),_:1}),s(j,{modelValue:p.value,"onUpdate:modelValue":t[8]||(t[8]=o=>p.value=o),height:"700",width:"900px",persistent:""},{default:r(()=>[s(X,{onSelected:q,onCloseDialog:t[7]||(t[7]=o=>p.value=!1)})]),_:1},8,["modelValue"])],64)}}},ft=E(ot,[["__scopeId","data-v-9f2f33c4"]]);export{ft as default};
