import{u as $,r as s,k as G,m as J,A as f,c as _,g as t,d as o,w as n,F as L,e as Q,o as w,j as W,i as r,V as A,f as h,H as q,h as V,t as m,n as X}from"./index-CHPVuy_C.js";import{A as Z}from"./apiOrders-CWQXsSrH.js";import{e as ee}from"./exportToExcel-Kkbtezxo.js";import{d as u,e as F,f as k,i as te}from"./common-B57YTEDc.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const ae=["onClick"],me={__name:"ContractList",setup(le){const b=Q(),{vError:E}=$(),B=s(!1),y=s([]),C=s([]),N=s([]),D=s([]),T=s(""),a=G({strDate:"",toDate:"",itemCd:"",itemName:"",managerName:"",customerName:"",orderType:"",vatType:"",statusType:""}),P=[{title:"일자-No",key:"contractDateSeq",align:"center",width:"100px"},{title:"PO No",key:"poNo",align:"center",width:"120px"},{title:"품목코드",key:"itemCd",align:"center",width:"120px"},{title:"품목명",key:"itemName",align:"start",width:"380px"},{title:"납기예정일자",key:"expectedDueDate",align:"center",width:"90px"},{title:"고객사명",key:"clientName",align:"center",width:"200px"},{title:"담당자명",key:"managerName",align:"center",width:"100px"},{title:"수주유형",key:"orderType",align:"center",width:"80px"},{title:"수량",key:"qty",align:"end",width:"80px"},{title:"단가",key:"unitPrice",align:"end",width:"80px"},{title:"공급가액",key:"supplyPrice",align:"end",width:"100px"},{title:"제품유형",key:"prodType",align:"center",width:"100px"},{title:"진행상태",key:"statusType",align:"center",width:"80px"},{title:"결재조건",key:"paymentCondition",align:"center",width:"80px"}],S=(i,l)=>{te(i.contractId)?b.push({name:"ContractReg"}):b.push({name:"ContractDetail",params:{id:i.contractId}})},I=async()=>{try{const i={...a};y.value=await Z.getContractList(i)}catch(i){E(i.message)}finally{}};J(async()=>{C.value=await f.getCodeList("status_type"),D.value=await f.getCodeList("order_type"),N.value=await f.getCodeList("vat_type"),a.strDate=u(),a.toDate=u()});const M=()=>{T.value.reset(),a.strDate=u(),a.toDate=u()},R=()=>{ee(P,y.value,"수주_목록")};return(i,l)=>{const Y=o("v-breadcrumbs"),p=o("v-text-field"),v=o("v-select"),c=o("v-btn"),x=o("v-col"),j=o("v-form"),g=o("v-row"),O=o("v-card-text"),z=o("v-card"),H=o("v-spacer"),K=o("v-data-table");return w(),_(L,null,[t(Y,{items:["MES","영업관리","수주관리"],class:"custom-breadcrumbs"}),t(z,{class:"pa-1",style:{height:"60px"}},{default:n(()=>[t(O,null,{default:n(()=>[t(g,null,{default:n(()=>[t(j,{ref_key:"srhForm",ref:T,onSubmit:W(I,["prevent"])},{default:n(()=>[t(x,{class:"d-flex flex-row ga-3"},{default:n(()=>[t(r(A),{modelValue:a.strDate,"onUpdate:modelValue":l[0]||(l[0]=e=>a.strDate=e),label:"주문일자","display-format":r(F),density:"compact",variant:"underlined",style:{width:"150px"}},null,8,["modelValue","display-format"]),t(r(A),{modelValue:a.toDate,"onUpdate:modelValue":l[1]||(l[1]=e=>a.toDate=e),label:"주문일자","display-format":r(F),density:"compact",variant:"underlined",style:{width:"150px"}},null,8,["modelValue","display-format"]),t(p,{modelValue:a.itemCd,"onUpdate:modelValue":l[2]||(l[2]=e=>a.itemCd=e),dense:"",density:"compact",label:"품목코드",placeholder:"품목코드를 입력해주세요",variant:"underlined",style:{width:"120px"}},null,8,["modelValue"]),t(p,{modelValue:a.itemName,"onUpdate:modelValue":l[3]||(l[3]=e=>a.itemName=e),dense:"",density:"compact",label:"품목명",placeholder:"품목명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),t(p,{modelValue:a.managerName,"onUpdate:modelValue":l[4]||(l[4]=e=>a.managerName=e),dense:"",density:"compact",label:"담당자명",placeholder:"담당자명을 입력해주세요",variant:"underlined",style:{width:"120px"}},null,8,["modelValue"]),t(p,{modelValue:a.clientName,"onUpdate:modelValue":l[5]||(l[5]=e=>a.clientName=e),dense:"",density:"compact",label:"고객사명",placeholder:"고객사명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),t(v,{modelValue:a.statusType,"onUpdate:modelValue":l[6]||(l[6]=e=>a.statusType=e),label:"진행상태",items:C.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"100px"}},null,8,["modelValue","items"]),t(v,{modelValue:a.orderType,"onUpdate:modelValue":l[7]||(l[7]=e=>a.orderType=e),label:"수주유형",items:D.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"100px"}},null,8,["modelValue","items"]),t(v,{modelValue:a.vatType,"onUpdate:modelValue":l[8]||(l[8]=e=>a.vatType=e),label:"거래유형",items:N.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"100px"}},null,8,["modelValue","items"]),t(c,{text:"조회",color:"brown-lighten-4",type:"submit"}),t(c,{text:"초기화",onClick:M})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),t(H),t(g,null,{default:n(()=>[t(x,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:n(()=>[t(c,{color:"brown-lighten-4",text:"신규",onClick:S}),t(c,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:R})]),_:1})]),_:1}),t(g,null,{default:n(()=>[t(x,{class:"pa-0"},{default:n(()=>[t(K,{headers:P,items:y.value,loading:B.value,"items-per-page":15,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요",density:"compact","fixed-header":"",height:"690px"},{headers:n(({columns:e})=>[h("tr",null,[(w(!0),_(L,null,X(e,d=>(w(),_("th",{key:d.key,class:"custom-header",style:q([{height:"40px"},{textAlign:"center"}])},m(d.title),1))),128))])]),"item.contractDateSeq":n(({item:e,index:d})=>[h("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:U=>S(e,d)},m(e.contractDateSeq),9,ae)]),"item.qty":n(({item:e})=>[V(m(r(k)(e.qty)),1)]),"item.unitPrice":n(({item:e})=>[V(m(r(k)(e.unitPrice)),1)]),"item.supplyPrice":n(({item:e})=>[V(m(r(k)(e.supplyPrice)),1)]),"item.printYn":n(({item:e,index:d})=>[h("p",{style:q([{padding:"4px","text-align":"center",cursor:"pointer"},{backgroundColor:e.printYn==="Y"?"#FFAB91":"transparent"}]),onClick:l[9]||(l[9]=(...U)=>i.onPrint&&i.onPrint(...U))},"인쇄 ",4)]),_:1},8,["items","loading"])]),_:1})]),_:1})],64)}}};export{me as default};
