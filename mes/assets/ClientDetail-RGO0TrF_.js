import{_ as me,u as re,a as pe,r as v,p as ce,z as ye,k as ve,q as fe,m as Ve,A as D,c as ge,f as c,g as e,d as r,w as a,F as we,e as xe,o as P,j as _e,i as M,b as be,s as Ne,h as B,B as f,C as V}from"./index-CqvXi43z.js";import{A as L}from"./apiBase-C2orPCTb.js";import{i as _,e as b}from"./common-0uT6ImM2.js";import{_ as he}from"./UserListPop-DSe5Bofp.js";import"./format-CBpsKyOP.js";const Ce=["id"],Ue=["onUpdate:modelValue"],ke=["onUpdate:modelValue"],Ie=["onUpdate:modelValue"],Te=["onUpdate:modelValue"],De=["onUpdate:modelValue"],Me=["onUpdate:modelValue"],Be=["onUpdate:modelValue"],Le=["onUpdate:modelValue"],Se=["onUpdate:modelValue"],ze={__name:"ClientDetail",setup(Ae){const{vError:Re,vSuccess:$e,vInfo:x}=re(),{userId:E}=pe(),F=xe(),Y=ce(),S=v([]),z=v([]),A=v([]),u=v([]),g=v([]),y=v([]),h=v(!1),N=v(!1),R=v(null),C=Y.params.id,q=ye(()=>["MES","기본관리",_(C)?"고객사 신규":"고객사 상세"]),K=[{title:"변경일.",key:"changeDate",align:"center",width:"100px"},{title:"변경내용.",key:"historyContents",align:"center",width:"500px"},{title:"-",key:"actions",align:"center",width:"10px"}],O=[{title:"주소.",key:"address",align:"center",width:"500px"},{title:"-",key:"actions",align:"center",width:"10px"}],G=[{title:"부서",key:"deptName",align:"center",width:"150px"},{title:"이름",key:"managerName",align:"center",width:"80px"},{title:"직책",key:"jobPosition",align:"center",width:"80px"},{title:"연락처",key:"tel",align:"center",width:"100px"},{title:"직통번호",key:"directTel",align:"center",width:"100px"},{title:"이메일번호",key:"email",align:"center",width:"120px"},{title:"-",key:"actions",align:"center",width:"10px"}],n=ve({clientId:"",businessNo:"",clientName:"",clientType:"",clientTypeName:"",tradeType:"",regDate:"",responSalesBiz:"",establishDate:"",president:"",businessType:"",businessItem:"",telNo:"",faxNo:"",homepage:"",addressId:"",managerId:"",paymentCondition:"",saleManagerId:"",saleManagerIdB:"",groupCd:"",groupName:"",groupsCd:"",groupsName:"",paymentCd:"",paymentName:"",useYn:"",saleManagerName:"",saleManagerNameB:"",userId:E}),J=async()=>{if(_(n.clientName)){x("고객사명을 입력하세요.");return}if(_(n.businessNo)){x("사업자번호를 입력하세요.");return}const o={saleInfo:n,clientManagerList:u.value,clinetAddressList:g.value,clinetHistroryList:y.value};o.saleInfo.regDate=b(o.saleInfo.regDate),o.saleInfo.establishDate=b(o.saleInfo.establishDate),console.log("params",o),await L.saveClient(o)};fe(()=>n.clientType,async o=>{n.clientType==="E"?h.value=!0:h.value=!1});const Q=()=>{let o=u.value.length;u.value.push({id:o++,deptName:"",managerName:"",jobPosition:"",tel:"",directTel:"",email:""})},W=()=>{let o=g.value.length;g.value.push({id:o++,address:""})},X=()=>{let o=y.value.length;y.value.push({id:o++,changeDate:"",historyContents:""})},Z=o=>{u.value.splice(o,1)},ee=o=>{g.value.splice(o,1)},le=o=>{y.value.splice(o,1)};Ve(async()=>{S.value=await D.getCodeList("trade_type"),z.value=await D.getCodeList("client_type"),A.value=await D.getCodeList("respon_sales_biz"),_(C)||await L.getClientList(C)});const $=o=>{R.value=o,N.value=!0},te=o=>{R.value==="M"?(n.saleManagerId=o.userId,n.saleManagerName=o.memberNm):(n.saleManagerIdB=o.userId,n.saleManagerNameB=o.memberNm)},ae=o=>{},ne=async()=>{if(_(n.businessNo))return x("사업자 번호를 입력하세요");if(await L.getBusinessNoChecked(n.businessNo)==="Y"){x("등록 가능한 사업자 번호입니다.");return}else{x("등록된 사업자 번호입니다.");return}},de=()=>{F.push({name:"ClientList"})};return(o,t)=>{const oe=r("v-breadcrumbs"),s=r("v-text-field"),w=r("v-btn"),d=r("v-col"),p=r("v-row"),j=r("v-date-input"),U=r("v-select"),k=r("v-card-title"),I=r("v-icon"),T=r("v-data-table-virtual"),H=r("v-card-text"),ie=r("v-form"),se=r("v-card"),ue=r("v-dialog");return P(),ge(we,null,[c("div",{id:o.$attrs.id},null,8,Ce),e(oe,{items:q.value},null,8,["items"]),e(se,null,{default:a(()=>[e(ie,{onSubmit:_e(J,["prevent"])},{default:a(()=>[e(H,null,{default:a(()=>[e(p,null,{default:a(()=>[e(d,{class:"d-flex"},{default:a(()=>[e(s,{modelValue:n.businessNo,"onUpdate:modelValue":t[0]||(t[0]=l=>n.businessNo=l),label:"사업자번호",variant:"underlined",density:"compact",style:{width:"200px"}},null,8,["modelValue"]),e(w,{text:"중복체크",color:"brown-lighten-4",density:"compact",onClick:ne}),t[28]||(t[28]=c("span",null,"  번호만 입력하세요 ('-' 제외)",-1))]),_:1}),e(d),e(d)]),_:1}),e(p,null,{default:a(()=>[e(d,{col:"2"},{default:a(()=>[e(s,{modelValue:n.clientName,"onUpdate:modelValue":t[1]||(t[1]=l=>n.clientName=l),label:"고객사명(상호)",variant:"underlined",density:"compact",style:{width:"780px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(j,{modelValue:n.regDate,"onUpdate:modelValue":t[2]||(t[2]=l=>n.regDate=l),label:"등록일자","display-format":M(b),density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","display-format"])]),_:1}),e(d,null,{default:a(()=>[e(j,{modelValue:n.establishDate,"onUpdate:modelValue":t[3]||(t[3]=l=>n.establishDate=l),label:"설립일자","display-format":M(b),density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","display-format"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(d,null,{default:a(()=>[e(U,{modelValue:n.clientType,"onUpdate:modelValue":t[4]||(t[4]=l=>n.clientType=l),items:z.value,"item-title":"codeNm","item-value":"code",label:"사업자구분",density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","items"])]),_:1}),e(d,null,{default:a(()=>[h.value?(P(),be(s,{key:0,modelValue:n.clientTypeName,"onUpdate:modelValue":t[5]||(t[5]=l=>n.clientTypeName=l),label:"기타",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])):Ne("",!0)]),_:1}),e(d,null,{default:a(()=>[e(U,{modelValue:n.tradeType,"onUpdate:modelValue":t[6]||(t[6]=l=>n.tradeType=l),items:S.value,"item-title":"codeNm","item-value":"code",label:"거래구분",density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","items"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.firstTradeDate,"onUpdate:modelValue":t[7]||(t[7]=l=>n.firstTradeDate=l),label:"최초거래일자","display-format":M(b),density:"compact",variant:"underlined",style:{width:"300px"},readonly:""},null,8,["modelValue","display-format"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(d,null,{default:a(()=>[e(s,{modelValue:n.president,"onUpdate:modelValue":t[8]||(t[8]=l=>n.president=l),label:"대표자명",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.businessType,"onUpdate:modelValue":t[9]||(t[9]=l=>n.businessType=l),label:"업태",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.businessItem,"onUpdate:modelValue":t[10]||(t[10]=l=>n.businessItem=l),label:"종목",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.paymentCondition,"onUpdate:modelValue":t[11]||(t[11]=l=>n.paymentCondition=l),label:"결제조건",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(d,null,{default:a(()=>[e(s,{modelValue:n.telNo,"onUpdate:modelValue":t[12]||(t[12]=l=>n.telNo=l),label:"대표 전화",variant:"underlined",density:"compact",style:{width:"300px"},onOnKeyup:ae},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.faxNo,"onUpdate:modelValue":t[13]||(t[13]=l=>n.faxNo=l),label:"대표 팩스",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.homepage,"onUpdate:modelValue":t[14]||(t[14]=l=>n.homepage=l),label:"홈페이지",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(U,{modelValue:n.responSalesBiz,"onUpdate:modelValue":t[15]||(t[15]=l=>n.responSalesBiz=l),items:A.value,"item-title":"codeNm","item-value":"code",label:"책임판매업",density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","items"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(d,null,{default:a(()=>[e(s,{modelValue:n.saleManagerName,"onUpdate:modelValue":t[16]||(t[16]=l=>n.saleManagerName=l),label:"영업담당자(정)",variant:"underlined",density:"compact",style:{width:"300px"},"append-inner-icon":"mdi-magnify","onClick:appendInner":t[17]||(t[17]=l=>$("M"))},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.saleManagerNameB,"onUpdate:modelValue":t[18]||(t[18]=l=>n.saleManagerNameB=l),label:"영업담당자(부)",variant:"underlined",density:"compact",style:{width:"300px"},"append-inner-icon":"mdi-magnify","onClick:appendInner":t[19]||(t[19]=l=>$("S"))},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.groupCd,"onUpdate:modelValue":t[20]||(t[20]=l=>n.groupCd=l),label:"그룹코드",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.groupName,"onUpdate:modelValue":t[21]||(t[21]=l=>n.groupName=l),label:"그룹",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(d,null,{default:a(()=>[e(s,{modelValue:n.groupCds,"onUpdate:modelValue":t[22]||(t[22]=l=>n.groupCds=l),label:"그룹사코드",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.groupsName,"onUpdate:modelValue":t[23]||(t[23]=l=>n.groupsName=l),label:"그룹사명",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.paymentCd,"onUpdate:modelValue":t[24]||(t[24]=l=>n.paymentCd=l),label:"결제회사코드",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(s,{modelValue:n.paymentName,"onUpdate:modelValue":t[25]||(t[25]=l=>n.paymentName=l),label:"결제회사",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(d,null,{default:a(()=>[e(k,null,{default:a(()=>t[29]||(t[29]=[B("담당자")])),_:1})]),_:1}),e(d,{class:"d-flex justify-end"},{default:a(()=>[e(w,{text:"추가+",onClick:Q})]),_:1}),e(T,{headers:G,items:u.value,class:"custom-table"},{"item.deptName":a(({item:l,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].deptName=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Ue),[[V,u.value[i].deptName]])]),"item.managerName":a(({item:l,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].managerName=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,ke),[[V,u.value[i].managerName]])]),"item.jobPosition":a(({item:l,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].jobPosition=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Ie),[[V,u.value[i].jobPosition]])]),"item.tel":a(({item:l,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].tel=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Te),[[V,u.value[i].tel]])]),"item.directTel":a(({item:l,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].directTel=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,De),[[V,u.value[i].directTel]])]),"item.email":a(({item:l,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].email=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Me),[[V,u.value[i].email]])]),"item.actions":a(({item:l})=>[e(I,{color:"medium-emphasis",icon:"mdi-delete",size:"small",onClick:i=>Z(l)},null,8,["onClick"])]),_:1},8,["items"])]),_:1}),e(p,null,{default:a(()=>[e(d,null,{default:a(()=>[e(k,null,{default:a(()=>t[30]||(t[30]=[B("주소")])),_:1})]),_:1}),e(d,{class:"d-flex justify-end"},{default:a(()=>[e(w,{text:"추가+",onClick:W})]),_:1}),e(T,{headers:O,items:g.value,class:"custom-table"},{"item.address":a(({item:l,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>g.value[i].address=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Be),[[V,g.value[i].address]])]),"item.actions":a(({item:l})=>[e(I,{color:"medium-emphasis",icon:"mdi-delete",size:"small",onClick:i=>ee(l)},null,8,["onClick"])]),_:1},8,["items"])]),_:1}),e(p,null,{default:a(()=>[e(d,null,{default:a(()=>[e(k,null,{default:a(()=>t[31]||(t[31]=[B("변경이력")])),_:1})]),_:1}),e(d,{class:"d-flex justify-end"},{default:a(()=>[e(w,{text:"추가+",onClick:X})]),_:1}),e(T,{headers:K,items:y.value,class:"custom-table"},{"item.changeDate":a(({item:l,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>y.value[i].changeDate=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Le),[[V,y.value[i].changeDate]])]),"item.historyContents":a(({item:l,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>y.value[i].historyContents=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Se),[[V,y.value[i].historyContents]])]),"item.actions":a(({item:l})=>[e(I,{color:"medium-emphasis",icon:"mdi-delete",size:"small",onClick:i=>le(l)},null,8,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1}),e(H,null,{default:a(()=>[e(p,null,{default:a(()=>[e(d,{class:"d-flex justify-end ga-4"},{default:a(()=>[e(w,{text:"저장",color:"brown-lighten-4",type:"submit"}),e(w,{text:"목록",onClick:de})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(ue,{modelValue:N.value,"onUpdate:modelValue":t[27]||(t[27]=l=>N.value=l),height:"800",width:"900px",persistent:""},{default:a(()=>[e(he,{onSelected:te,onCloseDialog:t[26]||(t[26]=l=>N.value=!1)})]),_:1},8,["modelValue"])],64)}}},Ye=me(ze,[["__scopeId","data-v-dfc97a7c"]]);export{Ye as default};
