import{A as r,L as j,M as H,W as J,a1 as O,H as z,J as K,e as Q,h,p as e,k as m,l as o,F as X,N as Z,o as ee,a2 as p,P as te}from"./index-BCdxernO.js";import{A as _}from"./apiCommon-DQdCmI3G.js";import{A as c}from"./apiItem-B0JHHkd5.js";import{p as U,f as P,t as le,r as ae}from"./common-Ctgf_4Dl.js";import{l as oe}from"./lodash-_VgbIgF1.js";import{_ as ne}from"./CustomerPop-BkXt7x33.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./index-CEOpAmiF.js";import"./index-CLRf2YcQ.js";import"./index-WWuz9eST.js";import"./index-CKfU0QJd.js";import"./index-DhHuXiFi.js";import"./apiBase-DJzL_JWR.js";const ie=["id"],me={class:"d-flex ga-4 justify-end"},be={__name:"ItemSubCd",setup(de){const v=r([]),g=r([]),C=r([]),V=r([]),x=r([]),{vError:w,vSuccess:M,vInfo:k,vWarning:S}=j(),{userId:G}=H(),b=O(),T=Z(),E=[{text:"사용",value:"Y"},{text:"미사용",value:"N"}],t=J({itemCd:"",itemName:"",itemTypeCd:"",useCate:"",itemCategory1:"",itemCategory2:"",customerCd:"",customerName:"",unit:"",spec:"",inPrice:"",outPrice:"",itemGrp1:"",itemGrp2:"",etc:"",useYn:"Y",userId:G}),f=r(!1),N=b.query.id;z(async()=>{const i=await c.getItemInfo(N);v.value=await _.getCodeList("ITEM_TYPE_CD"),v.value=v.value.filter(l=>!["M1","M2","M4","M7"].includes(l.code)),V.value=await _.getCodeList("ITEM_GRP1"),x.value=await _.getCodeList("ITEM_GRP2"),g.value=await c.getProdLList(),C.value=await c.getProdMList(i.itemCategory1),Object.assign(t,oe.omit(i,["itemTypeCd"]))}),K(()=>t.itemTypeCd,i=>{t.itemCd=N+le(i),t.itemName=ae(t.itemName,i)});const L=async()=>{try{const i={...t},l=await c.saveItemInfo(i);M(l),I()}catch{w("저장에 실패했습니다.")}},A=()=>{f.value=!0},Y=async()=>{await c.getItemCdCheck(t.itemCd)==="Y"?S("중복된 품목코드입니다."):k("사용가능한 품목코드입니다.")},R=i=>{t.customerCd=i.customerCd,t.customerName=i.customerName},I=()=>{T.push({name:"ItemList"})};return(i,l)=>{const B=m("v-breadcrumbs"),$=m("v-card-item"),s=m("v-select"),n=m("v-col"),y=m("v-btn"),u=m("v-row"),d=m("v-text-field"),q=m("v-form"),D=m("v-card-text"),F=m("v-card"),W=m("v-dialog");return ee(),Q(X,null,[h("div",{id:i.$attrs.id},null,8,ie),e(B,{items:["MES","기본관리","품목코드 신규(S)"]}),e(F,null,{default:o(()=>[e($,{title:p(b).query.id},null,8,["title"]),e(D,null,{default:o(()=>[e(q,{onSubmit:te(L,["prevent"])},{default:o(()=>[e(u,null,{default:o(()=>[e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:t.itemTypeCd,"onUpdate:modelValue":l[0]||(l[0]=a=>t.itemTypeCd=a),label:"품목구분",items:v.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(y,{text:"중복확인",density:"compact",onClick:Y})]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:t.itemCategory1,"onUpdate:modelValue":l[1]||(l[1]=a=>t.itemCategory1=a),label:"제품유형(대)",items:g.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",readonly:""},null,8,["modelValue","items"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:t.itemCategory2,"onUpdate:modelValue":l[2]||(l[2]=a=>t.itemCategory2=a),label:"제품유형(중)",items:C.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",readonly:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,{cols:"3",style:{height:"60px"}},{default:o(()=>[e(d,{modelValue:t.itemCd,"onUpdate:modelValue":l[3]||(l[3]=a=>t.itemCd=a),label:"품목코드",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,{cols:"9",style:{height:"60px"}},{default:o(()=>[e(d,{modelValue:t.itemName,"onUpdate:modelValue":l[4]||(l[4]=a=>t.itemName=a),label:"품목명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,{style:{height:"60px"}},{default:o(()=>[e(d,{modelValue:t.customerName,"onUpdate:modelValue":l[5]||(l[5]=a=>t.customerName=a),label:"거래처명",variant:"underlined",density:"compact","append-inner-icon":"mdi-magnify","onClick:appendInner":A},null,8,["modelValue"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:t.itemGrp1,"onUpdate:modelValue":l[6]||(l[6]=a=>t.itemGrp1=a),label:"거래유형",items:V.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:t.itemGrp2,"onUpdate:modelValue":l[7]||(l[7]=a=>t.itemGrp2=a),label:"제품유형",items:x.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(d,{modelValue:t.unit,"onUpdate:modelValue":l[8]||(l[8]=a=>t.unit=a),label:"단위",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,{style:{height:"60px"}},{default:o(()=>[e(d,{modelValue:t.spec,"onUpdate:modelValue":l[9]||(l[9]=a=>t.spec=a),label:"SPEC",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(d,{"model-value":p(P)(t.inPrice),label:"입고단가",variant:"underlined",density:"compact","onUpdate:modelValue":l[10]||(l[10]=a=>t.inPrice=p(U)(a))},null,8,["model-value"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(d,{"model-value":p(P)(t.outPrice),label:"출고단가",variant:"underlined",density:"compact","onUpdate:modelValue":l[11]||(l[11]=a=>t.outPrice=p(U)(a))},null,8,["model-value"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:t.useYn,"onUpdate:modelValue":l[12]||(l[12]=a=>t.useYn=a),label:"사용유무",items:E,"item-title":"text","item-value":"value",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,{style:{height:"60px"}},{default:o(()=>[e(d,{modelValue:t.etc,"onUpdate:modelValue":l[13]||(l[13]=a=>t.etc=a),label:"비고",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,null,{default:o(()=>[h("div",me,[e(y,{color:"indigo-darken-4",text:"저장",variant:"tonal",type:"submit"}),e(y,{text:"목록",variant:"tonal",onClick:I})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(W,{modelValue:f.value,"onUpdate:modelValue":l[15]||(l[15]=a=>f.value=a),"max-width":"800px",height:"800px",persistent:""},{default:o(()=>[e(ne,{onSelected:R,onCloseDialog:l[14]||(l[14]=a=>f.value=!1)})]),_:1},8,["modelValue"])],64)}}};export{be as default};
