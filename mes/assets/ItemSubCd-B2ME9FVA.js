import{r,u as O,a as W,m as z,k as H,n as J,q as K,c as Q,f as h,g as e,d,w as o,F as X,e as Z,o as ee,i as p,j as te}from"./index-B3k6qWTO.js";import{A as g}from"./apiCommon-Cgp-9u3n.js";import{A as c}from"./apiItem-BPoKeJui.js";import{C as le}from"./CustomerListPop-Bo34R7Zz.js";import{l as ae}from"./lodash-DR4aaNSv.js";import{p as U,f as w,a as oe,r as ne}from"./common-5ptPHjCv.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const ie=["id"],de={class:"d-flex ga-4 justify-end"},ge={__name:"ItemSubCd",setup(me){const v=r([]),C=r([]),_=r([]),V=r([]),x=r([]),{vError:P,vSuccess:k,vInfo:M,vWarning:S}=O(),{userId:G}=W(),b=H(),T=Z(),E=[{text:"사용",value:"Y"},{text:"미사용",value:"N"}],l=z({itemCd:"",itemName:"",itemTypeCd:"",useCate:"",itemCategory1:"",itemCategory2:"",customerCd:"",customerName:"",unit:"",spec:"",inPrice:"",outPrice:"",itemGrp1:"",itemGrp2:"",etc:"",useYn:"Y",userId:G}),f=r(!1),I=b.query.id;J(async()=>{const i=await c.getItemInfo(I);v.value=await g.getCodeList("ITEM_TYPE_CD"),v.value=v.value.filter(t=>!["M1","M2","M4","M7"].includes(t.code)),V.value=await g.getCodeList("ITEM_GRP1"),x.value=await g.getCodeList("ITEM_GRP2"),C.value=await c.getProdLList(),_.value=await c.getProdMList(i.itemCategory1),Object.assign(l,ae.omit(i,["itemTypeCd"]))}),K(()=>l.itemTypeCd,i=>{l.itemCd=I+oe(i),l.itemName=ne(l.itemName,i)});const L=async()=>{try{const i={...l},t=await c.saveItemInfo(i);k(t),N()}catch{P("저장에 실패했습니다.")}},Y=()=>{f.value=!0},A=async()=>{await c.getItemCdCheck(l.itemCd)==="Y"?S("중복된 품목코드입니다."):M("사용가능한 품목코드입니다.")},R=(i,t)=>{l.customerCd=i,l.customerName=t},N=()=>{T.push({name:"ItemList"})};return(i,t)=>{const j=d("v-breadcrumbs"),q=d("v-card-item"),s=d("v-select"),n=d("v-col"),y=d("v-btn"),u=d("v-row"),m=d("v-text-field"),B=d("v-form"),D=d("v-card-text"),F=d("v-card"),$=d("v-dialog");return ee(),Q(X,null,[h("div",{id:i.$attrs.id},null,8,ie),e(j,{items:["MES","기본관리","품목코드 신규(S)"]}),e(F,null,{default:o(()=>[e(q,{title:p(b).query.id},null,8,["title"]),e(D,null,{default:o(()=>[e(B,{onSubmit:te(L,["prevent"])},{default:o(()=>[e(u,null,{default:o(()=>[e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:l.itemTypeCd,"onUpdate:modelValue":t[0]||(t[0]=a=>l.itemTypeCd=a),label:"품목구분",items:v.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(y,{text:"중복확인",density:"compact",onClick:A})]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:l.itemCategory1,"onUpdate:modelValue":t[1]||(t[1]=a=>l.itemCategory1=a),label:"제품유형(대)",items:C.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",readonly:""},null,8,["modelValue","items"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:l.itemCategory2,"onUpdate:modelValue":t[2]||(t[2]=a=>l.itemCategory2=a),label:"제품유형(중)",items:_.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",readonly:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,{cols:"3",style:{height:"60px"}},{default:o(()=>[e(m,{modelValue:l.itemCd,"onUpdate:modelValue":t[3]||(t[3]=a=>l.itemCd=a),label:"품목코드",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,{cols:"9",style:{height:"60px"}},{default:o(()=>[e(m,{modelValue:l.itemName,"onUpdate:modelValue":t[4]||(t[4]=a=>l.itemName=a),label:"품목명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,{style:{height:"60px"}},{default:o(()=>[e(m,{modelValue:l.customerName,"onUpdate:modelValue":t[5]||(t[5]=a=>l.customerName=a),label:"거래처명",variant:"underlined",density:"compact","append-inner-icon":"mdi-magnify","onClick:appendInner":Y},null,8,["modelValue"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:l.itemGrp1,"onUpdate:modelValue":t[6]||(t[6]=a=>l.itemGrp1=a),label:"거래유형",items:V.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:l.itemGrp2,"onUpdate:modelValue":t[7]||(t[7]=a=>l.itemGrp2=a),label:"제품유형",items:x.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(m,{modelValue:l.unit,"onUpdate:modelValue":t[8]||(t[8]=a=>l.unit=a),label:"단위",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,{style:{height:"60px"}},{default:o(()=>[e(m,{modelValue:l.spec,"onUpdate:modelValue":t[9]||(t[9]=a=>l.spec=a),label:"SPEC",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(m,{"model-value":p(w)(l.inPrice),label:"입고단가",variant:"underlined",density:"compact","onUpdate:modelValue":t[10]||(t[10]=a=>l.inPrice=p(U)(a))},null,8,["model-value"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(m,{"model-value":p(w)(l.outPrice),label:"출고단가",variant:"underlined",density:"compact","onUpdate:modelValue":t[11]||(t[11]=a=>l.outPrice=p(U)(a))},null,8,["model-value"])]),_:1}),e(n,{style:{height:"60px"}},{default:o(()=>[e(s,{modelValue:l.useYn,"onUpdate:modelValue":t[12]||(t[12]=a=>l.useYn=a),label:"사용유무",items:E,"item-title":"text","item-value":"value",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,{style:{height:"60px"}},{default:o(()=>[e(m,{modelValue:l.etc,"onUpdate:modelValue":t[13]||(t[13]=a=>l.etc=a),label:"비고",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(n,null,{default:o(()=>[h("div",de,[e(y,{color:"indigo-darken-4",text:"저장",variant:"tonal",type:"submit"}),e(y,{text:"목록",variant:"tonal",onClick:N})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e($,{modelValue:f.value,"onUpdate:modelValue":t[15]||(t[15]=a=>f.value=a),"max-width":"800px",height:"700px",persistent:""},{default:o(()=>[e(le,{onSelected:R,onCloseDialog:t[14]||(t[14]=a=>f.value=!1)})]),_:1},8,["modelValue"])],64)}}};export{ge as default};
