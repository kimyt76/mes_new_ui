import{_ as ce,u as ye,a as ve,r as v,p as fe,z as Ve,k as ge,q as we,m as xe,A as D,c as _e,f as c,g as e,d as r,w as n,F as be,e as Ne,o as P,j as he,i as M,b as Ce,s as Ue,h as B,B as f,C as V}from"./index-mUQ3O7M_.js";import{A as L}from"./apiBase-ZN922kEJ.js";import{i as x,e as _}from"./common-BfWOXsz0.js";import{_ as Ie}from"./UserListPop-DHOypsRj.js";import"./format-CBpsKyOP.js";const ke=["id"],Te=["onUpdate:modelValue"],De=["onUpdate:modelValue"],Me=["onUpdate:modelValue"],Be=["onUpdate:modelValue"],Le=["onUpdate:modelValue"],Se=["onUpdate:modelValue"],Ae=["onUpdate:modelValue"],ze=["onUpdate:modelValue"],je=["onUpdate:modelValue"],He={__name:"ClientDetail",setup(Re){const{vError:E,vSuccess:F,vInfo:b,vWarning:O}=ye(),{userId:Y}=ve(),q=Ne(),K=fe(),S=v([]),A=v([]),z=v([]),u=v([]),g=v([]),y=v([]),h=v(!1),N=v(!1),j=v(null),C=K.params.id,W=Ve(()=>["MES","기본관리",x(C)?"고객사 신규":"고객사 상세"]),G=[{title:"변경일.",key:"changeDate",align:"center",width:"100px"},{title:"변경내용.",key:"historyContents",align:"center",width:"500px"},{title:"-",key:"actions",align:"center",width:"10px"}],J=[{title:"주소.",key:"address",align:"center",width:"500px"},{title:"-",key:"actions",align:"center",width:"10px"}],Q=[{title:"부서",key:"deptName",align:"center",width:"150px"},{title:"이름",key:"managerName",align:"center",width:"80px"},{title:"직책",key:"jobPosition",align:"center",width:"80px"},{title:"연락처",key:"tel",align:"center",width:"100px"},{title:"직통번호",key:"directTel",align:"center",width:"100px"},{title:"이메일번호",key:"email",align:"center",width:"120px"},{title:"-",key:"actions",align:"center",width:"10px"}],a=ge({clientId:"",businessNo:"",clientName:"",clientType:"",clientTypeName:"",tradeType:"",regDate:"",responSalesBiz:"",establishDate:"",president:"",businessType:"",businessItem:"",telNo:"",faxNo:"",homepage:"",addressId:"",managerId:"",paymentCondition:"",saleManagerId:"",saleManagerIdB:"",groupCd:"",groupName:"",groupsCd:"",groupsName:"",paymentCd:"",paymentName:"",useYn:"",saleManagerName:"",saleManagerNameB:"",userId:Y}),X=async()=>{if(x(a.clientName)){b("고객사명을 입력하세요.");return}if(x(a.businessNo)){b("사업자번호를 입력하세요.");return}const d={clientInfo:a,clientManagerList:u.value,clinetAddressList:g.value,clinetHistroryList:y.value};d.clientInfo.regDate=_(d.clientInfo.regDate),d.clientInfo.establishDate=_(d.clientInfo.establishDate);try{const l=await L.saveClientInfo(d);F(l),x(a.clientId)&&(a.clientId=l.clientId)}catch{E(res.message)}};we(()=>a.clientType,async d=>{a.clientType==="E"?h.value=!0:h.value=!1});const Z=()=>{let d=u.value.length;u.value.push({id:d++,deptName:"",managerName:"",jobPosition:"",tel:"",directTel:"",email:""})},ee=()=>{let d=g.value.length;g.value.push({id:d++,address:""})},le=()=>{let d=y.value.length;y.value.push({id:d++,changeDate:"",historyContents:""})},te=d=>{console.log("index",d),u.value.splice(d,1)},ae=d=>{g.value.splice(d,1)},ne=d=>{y.value.splice(d,1)};xe(async()=>{if(S.value=await D.getCodeList("trade_type"),A.value=await D.getCodeList("client_type"),z.value=await D.getCodeList("respon_sales_biz"),!x(C)){const d=await L.getClientInfo(C);Object.assign(a,d.clientInfo),u.value=d.clientManagerList,y.value=d.clientHistoryList,g.value=d.clinetAddressList}});const H=d=>{j.value=d,N.value=!0},de=d=>{j.value==="M"?(a.saleManagerId=d.userId,a.saleManagerName=d.memberNm):(a.saleManagerIdB=d.userId,a.saleManagerNameB=d.memberNm)},ie=d=>{},oe=async()=>{if(x(a.businessNo))return b("사업자 번호를 입력하세요");const d=await L.getBusinessNoChecked(a.businessNo);if(console.log("checkVal",d),d==="Y"){b("등록 가능한 사업자 번호입니다.");return}else{O("등록된 사업자 번호입니다."),a.businessNo="";return}},se=()=>{q.push({name:"ClientList"})};return(d,l)=>{const ue=r("v-breadcrumbs"),s=r("v-text-field"),w=r("v-btn"),i=r("v-col"),p=r("v-row"),R=r("v-date-input"),U=r("v-select"),I=r("v-card-title"),k=r("v-icon"),T=r("v-data-table-virtual"),$=r("v-card-text"),me=r("v-form"),re=r("v-card"),pe=r("v-dialog");return P(),_e(be,null,[c("div",{id:d.$attrs.id},null,8,ke),e(ue,{items:W.value},null,8,["items"]),e(re,null,{default:n(()=>[e(me,{onSubmit:he(X,["prevent"])},{default:n(()=>[e($,null,{default:n(()=>[e(p,null,{default:n(()=>[e(i,{class:"d-flex"},{default:n(()=>[e(s,{modelValue:a.businessNo,"onUpdate:modelValue":l[0]||(l[0]=t=>a.businessNo=t),label:"사업자번호",variant:"underlined",density:"compact",style:{width:"200px"}},null,8,["modelValue"]),e(w,{text:"중복체크",color:"brown-lighten-4",density:"compact",onClick:oe}),l[28]||(l[28]=c("span",null,"  번호만 입력하세요 ('-' 제외)",-1))]),_:1}),e(i),e(i)]),_:1}),e(p,null,{default:n(()=>[e(i,{col:"2"},{default:n(()=>[e(s,{modelValue:a.clientName,"onUpdate:modelValue":l[1]||(l[1]=t=>a.clientName=t),label:"고객사명(상호)",variant:"underlined",density:"compact",style:{width:"780px"}},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(R,{modelValue:a.regDate,"onUpdate:modelValue":l[2]||(l[2]=t=>a.regDate=t),label:"등록일자","display-format":M(_),density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","display-format"])]),_:1}),e(i,null,{default:n(()=>[e(R,{modelValue:a.establishDate,"onUpdate:modelValue":l[3]||(l[3]=t=>a.establishDate=t),label:"설립일자","display-format":M(_),density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","display-format"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(i,null,{default:n(()=>[e(U,{modelValue:a.clientType,"onUpdate:modelValue":l[4]||(l[4]=t=>a.clientType=t),items:A.value,"item-title":"codeNm","item-value":"code",label:"사업자구분",density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","items"])]),_:1}),e(i,null,{default:n(()=>[h.value?(P(),Ce(s,{key:0,modelValue:a.clientTypeName,"onUpdate:modelValue":l[5]||(l[5]=t=>a.clientTypeName=t),label:"기타",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])):Ue("",!0)]),_:1}),e(i,null,{default:n(()=>[e(U,{modelValue:a.tradeType,"onUpdate:modelValue":l[6]||(l[6]=t=>a.tradeType=t),items:S.value,"item-title":"codeNm","item-value":"code",label:"거래구분",density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","items"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.firstTradeDate,"onUpdate:modelValue":l[7]||(l[7]=t=>a.firstTradeDate=t),label:"최초거래일자","display-format":M(_),density:"compact",variant:"underlined",style:{width:"300px"},readonly:""},null,8,["modelValue","display-format"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(i,null,{default:n(()=>[e(s,{modelValue:a.president,"onUpdate:modelValue":l[8]||(l[8]=t=>a.president=t),label:"대표자명",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.businessType,"onUpdate:modelValue":l[9]||(l[9]=t=>a.businessType=t),label:"업태",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.businessItem,"onUpdate:modelValue":l[10]||(l[10]=t=>a.businessItem=t),label:"종목",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.paymentCondition,"onUpdate:modelValue":l[11]||(l[11]=t=>a.paymentCondition=t),label:"결제조건",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(i,null,{default:n(()=>[e(s,{modelValue:a.telNo,"onUpdate:modelValue":l[12]||(l[12]=t=>a.telNo=t),label:"대표 전화",variant:"underlined",density:"compact",style:{width:"300px"},onOnKeyup:ie},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.faxNo,"onUpdate:modelValue":l[13]||(l[13]=t=>a.faxNo=t),label:"대표 팩스",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.homepage,"onUpdate:modelValue":l[14]||(l[14]=t=>a.homepage=t),label:"홈페이지",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(U,{modelValue:a.responSalesBiz,"onUpdate:modelValue":l[15]||(l[15]=t=>a.responSalesBiz=t),items:z.value,"item-title":"codeNm","item-value":"code",label:"책임판매업",density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","items"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(i,null,{default:n(()=>[e(s,{modelValue:a.saleManagerName,"onUpdate:modelValue":l[16]||(l[16]=t=>a.saleManagerName=t),label:"영업담당자(정)",variant:"underlined",density:"compact",style:{width:"300px"},"append-inner-icon":"mdi-magnify","onClick:appendInner":l[17]||(l[17]=t=>H("M"))},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.saleManagerNameB,"onUpdate:modelValue":l[18]||(l[18]=t=>a.saleManagerNameB=t),label:"영업담당자(부)",variant:"underlined",density:"compact",style:{width:"300px"},"append-inner-icon":"mdi-magnify","onClick:appendInner":l[19]||(l[19]=t=>H("S"))},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.groupCd,"onUpdate:modelValue":l[20]||(l[20]=t=>a.groupCd=t),label:"그룹코드",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.groupName,"onUpdate:modelValue":l[21]||(l[21]=t=>a.groupName=t),label:"그룹",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(i,null,{default:n(()=>[e(s,{modelValue:a.groupCds,"onUpdate:modelValue":l[22]||(l[22]=t=>a.groupCds=t),label:"그룹사코드",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.groupsName,"onUpdate:modelValue":l[23]||(l[23]=t=>a.groupsName=t),label:"그룹사명",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.paymentCd,"onUpdate:modelValue":l[24]||(l[24]=t=>a.paymentCd=t),label:"결제회사코드",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(s,{modelValue:a.paymentName,"onUpdate:modelValue":l[25]||(l[25]=t=>a.paymentName=t),label:"결제회사",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(i,null,{default:n(()=>[e(I,null,{default:n(()=>l[29]||(l[29]=[B("담당자")])),_:1})]),_:1}),e(i,{class:"d-flex justify-end"},{default:n(()=>[e(w,{text:"추가+",onClick:Z})]),_:1}),e(T,{headers:Q,items:u.value,class:"custom-table"},{"item.deptName":n(({item:t,index:o})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[o].deptName=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Te),[[V,u.value[o].deptName]])]),"item.managerName":n(({item:t,index:o})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[o].managerName=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,De),[[V,u.value[o].managerName]])]),"item.jobPosition":n(({item:t,index:o})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[o].jobPosition=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Me),[[V,u.value[o].jobPosition]])]),"item.tel":n(({item:t,index:o})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[o].tel=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Be),[[V,u.value[o].tel]])]),"item.directTel":n(({item:t,index:o})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[o].directTel=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Le),[[V,u.value[o].directTel]])]),"item.email":n(({item:t,index:o})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[o].email=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Se),[[V,u.value[o].email]])]),"item.actions":n(({item:t})=>[e(k,{color:"medium-emphasis",icon:"mdi-delete",size:"small",onClick:o=>te(t)},null,8,["onClick"])]),_:1},8,["items"])]),_:1}),e(p,null,{default:n(()=>[e(i,null,{default:n(()=>[e(I,null,{default:n(()=>l[30]||(l[30]=[B("주소")])),_:1})]),_:1}),e(i,{class:"d-flex justify-end"},{default:n(()=>[e(w,{text:"추가+",onClick:ee})]),_:1}),e(T,{headers:J,items:g.value,class:"custom-table"},{"item.address":n(({item:t,index:o})=>[f(c("input",{"onUpdate:modelValue":m=>g.value[o].address=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Ae),[[V,g.value[o].address]])]),"item.actions":n(({item:t})=>[e(k,{color:"medium-emphasis",icon:"mdi-delete",size:"small",onClick:o=>ae(t)},null,8,["onClick"])]),_:1},8,["items"])]),_:1}),e(p,null,{default:n(()=>[e(i,null,{default:n(()=>[e(I,null,{default:n(()=>l[31]||(l[31]=[B("변경이력")])),_:1})]),_:1}),e(i,{class:"d-flex justify-end"},{default:n(()=>[e(w,{text:"추가+",onClick:le})]),_:1}),e(T,{headers:G,items:y.value,class:"custom-table"},{"item.changeDate":n(({item:t,index:o})=>[f(c("input",{"onUpdate:modelValue":m=>y.value[o].changeDate=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,ze),[[V,y.value[o].changeDate]])]),"item.historyContents":n(({item:t,index:o})=>[f(c("input",{"onUpdate:modelValue":m=>y.value[o].historyContents=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,je),[[V,y.value[o].historyContents]])]),"item.actions":n(({item:t})=>[e(k,{color:"medium-emphasis",icon:"mdi-delete",size:"small",onClick:o=>ne(t)},null,8,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1}),e($,null,{default:n(()=>[e(p,null,{default:n(()=>[e(i,{class:"d-flex justify-end ga-4"},{default:n(()=>[e(w,{text:"저장",color:"brown-lighten-4",type:"submit"}),e(w,{text:"목록",onClick:se})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(pe,{modelValue:N.value,"onUpdate:modelValue":l[27]||(l[27]=t=>N.value=t),height:"800",width:"900px",persistent:""},{default:n(()=>[e(Ie,{onSelected:de,onCloseDialog:l[26]||(l[26]=t=>N.value=!1)})]),_:1},8,["modelValue"])],64)}}},Ye=ce(He,[["__scopeId","data-v-81b25827"]]);export{Ye as default};
