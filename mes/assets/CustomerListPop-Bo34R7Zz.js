import{A as k,_ as P,u as S,r,m as I,n as j,d as a,b as O,o as v,w as l,g as e,j as T,f as g,c as V,F as D,t as $,v as q}from"./index-B3k6qWTO.js";import{A as L}from"./apiCommon-Cgp-9u3n.js";const z={getItemList:async i=>{try{return(await k.post("/base/getItemList",i)).data}catch(n){throw n.response}},getCustomerList:async i=>{try{return(await k.post("/customer/getCustomerList",i)).data}catch(n){throw n.response}}},H={class:"d-flex ga-4 mt-6 ml-4"},J={class:"d-flex ga-4 justify-end"},K={__name:"CustomerListPop",emits:["selected","close-dialog"],setup(i,{emit:n}){const{vError:G}=S(),d=n,f=r(""),u=r(!1),o=I({customerGrp1:"",customerGrp2:"",businessCd:"",customerName:""}),y=r([]),C=r([]),h=r([]),N=r([{title:"거래처코드",key:"customerCd",align:"center"},{title:"거래처명",key:"customerName",align:"center"},{title:"담당자",key:"customerManager",align:"center"},{title:"전화번호",key:"tel",align:"center"}]);j(async()=>{C.value=await L.getCodeList("CUSTOMER_GRP1"),h.value=await L.getCodeList("CUSTOMER_GRP2")});const E=async()=>{u.value=!0;try{const c={...o};y.value=await z.getCustomerList(c)}catch(c){G("조회에 실패했습니다."+c)}finally{u.value=!1}},U=(c,t)=>{d("selected",t.item.customerCd,t.item.customerName),d("close-dialog")},A=()=>{f.value.remove()};return(c,t)=>{const B=a("v-card-item"),x=a("v-select"),b=a("v-text-field"),m=a("v-btn"),R=a("v-form"),p=a("v-col"),_=a("v-row"),F=a("v-data-table"),M=a("v-card");return v(),O(M,{class:"pa-3"},{default:l(()=>[e(B,{title:"거래처 조회"}),e(_,null,{default:l(()=>[e(p,{style:{height:"30px",padding:"3px"}},{default:l(()=>[e(R,{ref_key:"srhForm",ref:f,onSubmit:T(E,["prevent"])},{default:l(()=>[g("div",H,[e(x,{modelValue:o.customerGrp1,"onUpdate:modelValue":t[0]||(t[0]=s=>o.customerGrp1=s),label:"거래유형",items:C.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"]),e(x,{modelValue:o.customerGrp2,"onUpdate:modelValue":t[1]||(t[1]=s=>o.customerGrp2=s),label:"업무유형",items:h.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"]),e(b,{modelValue:o.businessCd,"onUpdate:modelValue":t[2]||(t[2]=s=>o.businessCd=s),label:"사업자번호",placeholder:"사업자번호를 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"]),e(b,{modelValue:o.customerName,"onUpdate:modelValue":t[3]||(t[3]=s=>o.customerName=s),label:"거래처명",placeholder:"거래처명을 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"]),e(m,{color:"#EFEBE9",text:"조회",type:"submit"}),e(m,{class:"mr-3",text:"초기화",onClick:A})])]),_:1},512)]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(p,null,{default:l(()=>[e(F,{headers:N.value,items:y.value,loading:u.value,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요","items-per-page":15,style:{height:"400px"},"onClick:row":U},{headers:l(({columns:s})=>[g("tr",null,[(v(!0),V(D,null,$(s,w=>(v(),V("th",{key:w.key,class:"custom-header"},q(w.title),1))),128))])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),e(_,{class:"mt-1",style:{height:"70px"}},{default:l(()=>[e(p,null,{default:l(()=>[g("div",J,[e(m,{dense:"",text:"선택",color:"brown-lighten-4"}),e(m,{text:"닫기",variant:"tonal",onClick:t[4]||(t[4]=s=>d("close-dialog"))})])]),_:1})]),_:1})]),_:1})}}},X=P(K,[["__scopeId","data-v-f2a50b08"]]);export{X as C};
