import{z as L,r as u,p as S,s as I,d as r,c as w,o as M,g as e,f as N,w as o,A,h,_ as P,u as $,m as z,n as q,F as B,e as G,j as H,v as J,t as K}from"./index-C0I8_ih4.js";import{A as Q}from"./apiOrders-CDUwT9YC.js";import{e as W}from"./exportToExcel-Kkbtezxo.js";import{f as _}from"./format-CBpsKyOP.js";import{d as X,e as Y}from"./common-Dg66kV3l.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./apiCommon-kSGeiy8j.js";const Z={class:"d-flex align-center date-picker-wrapper mt-2"},ee={__name:"DateRangePicker",props:{fromDate:{},fromDateModifiers:{},toDate:{},toDateModifiers:{}},emits:["update:fromDate","update:toDate"],setup(C){const p=L(C,"fromDate"),c=L(C,"toDate"),v=u(p.value||""),d=u(_(new Date,"yyyy-MM-dd")),s=u(!1),f=u(c.value||""),m=u(_(new Date,"yyyy-MM-dd")),D=u(!1),g=()=>{d.value=""},k=()=>{m.value=""},U=n=>{v.value=n,d.value=_(new Date(n),"yyyy-MM-dd"),s.value=!1,p.value=d.value},F=n=>{f.value=n,m.value=_(new Date(n),"yyyy-MM-dd"),D.value=!1,c.value=m.value};return S(v,n=>{n&&(d.value=_(new Date(n),"yyyy-MM-dd"))}),S(f,n=>{n&&(m.value=_(new Date(n),"yyyy-MM-dd"))}),I(()=>{p.value&&(v.value=p.value,d.value=_(new Date(p.value),"yyyy-MM-dd"),p.value=d.value),c.value&&(f.value=c.value,m.value=_(new Date(c.value),"yyyy-MM-dd"),c.value=m.value)}),(n,t)=>{const y=r("v-text-field"),a=r("v-icon"),b=r("v-btn"),V=r("v-date-picker"),x=r("v-menu");return M(),w("div",Z,[e(y,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),label:"시작일",mask:"date",density:"compact",width:"120px",height:"40px",onClick:g,style:{"max-width":"120px"}},null,8,["modelValue"]),e(x,{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value=l),"close-on-content-click":!1,location:"bottom start"},{activator:o(({props:l})=>[e(b,A(l,{icon:"",variant:"text",class:"calendar-icon-btn"}),{default:o(()=>[e(a,null,{default:o(()=>t[6]||(t[6]=[h("mdi-calendar")])),_:1})]),_:2},1040)]),default:o(()=>[e(V,{modelValue:v.value,"onUpdate:modelValue":[t[1]||(t[1]=l=>v.value=l),U],"hide-header":!0},null,8,["modelValue"])]),_:1},8,["modelValue"]),t[8]||(t[8]=N("span",{class:"mr-2 mb-3"},"~",-1)),e(y,{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=l=>m.value=l),label:"종료일",density:"compact",width:"120px",onClick:k,style:{"max-width":"200px"}},null,8,["modelValue"]),e(x,{modelValue:D.value,"onUpdate:modelValue":t[5]||(t[5]=l=>D.value=l),"close-on-content-click":!1,location:"bottom start","offset-y":""},{activator:o(({props:l})=>[e(b,A(l,{icon:"",variant:"text",class:"calendar-icon-btn"}),{default:o(()=>[e(a,null,{default:o(()=>t[7]||(t[7]=[h("mdi-calendar")])),_:1})]),_:2},1040)]),default:o(()=>[e(V,{modelValue:f.value,"onUpdate:modelValue":[t[4]||(t[4]=l=>f.value=l),F],"hide-header":!0},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}},te={class:"d-flex ga-3"},ae={class:"d-flex ga-4 justify-end"},le={style:{height:"20px"}},oe={__name:"OrderList",setup(C){const{vError:p}=$(),c=G(),v=u(X()),d=u(Y()),s=z({fromDate:"",toDate:"",customerNm:null,itemName:null,draftNm:null}),f=u(!1),m=u(null),D=u([]),g=async()=>{f.value=!0,s.fromDate=v.value,s.toDate=d.value;try{const y={...s};D.value=await Q.getOrderList(y)}catch(y){p("조회중 오류가 발생하였습니다."+y)}finally{f.value=!1}},k=u([{title:"기안일자",key:"draftDate",align:"center"},{title:"문서번호",key:"orderNm",align:"center"},{title:"고객사명",key:"customerNm",align:"center"},{title:"품목명",key:"itemName",align:"center"},{title:"기안자",key:"draftNm",align:"center"}]),U=()=>{c.push({name:"OrderNew"})},F=(y,a)=>{c.push({name:"OrderDetail",params:{id:a.item.orderId}})},n=()=>{m.value.reset()},t=()=>{W(k,D.value,"발주_목록")};return q(g),(y,a)=>{const b=r("v-breadcrumbs"),V=r("v-text-field"),x=r("v-btn"),l=r("v-form"),E=r("v-col"),O=r("v-row"),R=r("v-card"),j=r("v-data-table");return M(),w(B,null,[e(b,{items:["MES","발주관리","발주목록"]}),e(R,{class:"pa-3",style:{height:"80px"}},{default:o(()=>[e(O,null,{default:o(()=>[e(E,null,{default:o(()=>[e(l,{ref_key:"srhForm",ref:m,onSubmit:H(g,["prevent"])},{default:o(()=>[N("div",te,[e(ee,{fromDate:v.value,"onUpdate:fromDate":a[0]||(a[0]=i=>v.value=i),toDate:d.value,"onUpdate:toDate":a[1]||(a[1]=i=>d.value=i),class:"input-align"},null,8,["fromDate","toDate"]),e(V,{modelValue:s.customerNm,"onUpdate:modelValue":a[2]||(a[2]=i=>s.customerNm=i),density:"compact",label:"고객사명",placeholder:"고객사명을 입력해주세요",variant:"underlined"},null,8,["modelValue"]),e(V,{modelValue:s.itemName,"onUpdate:modelValue":a[3]||(a[3]=i=>s.itemName=i),density:"compact",label:"품목명",placeholder:"품목명을 입력해주세요",variant:"underlined"},null,8,["modelValue"]),e(V,{modelValue:s.draftNm,"onUpdate:modelValue":a[4]||(a[4]=i=>s.draftNm=i),density:"compact",label:"기안자",placeholder:"기안자명을 입력해주세요",variant:"underlined"},null,8,["modelValue"]),e(x,{color:"#EFEBE9",class:"mt-3",type:"submit"},{default:o(()=>a[5]||(a[5]=[h("조회")])),_:1}),e(x,{class:"mt-3",onClick:n},{default:o(()=>a[6]||(a[6]=[h("초기화")])),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1}),e(O,{class:"mb-1",style:{height:"70px"}},{default:o(()=>[e(E,null,{default:o(()=>[N("div",ae,[e(x,{color:"brown-lighten-4",class:"mt-3",text:"신규",onClick:U}),e(x,{class:"mt-3 mr-3 excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:t})])]),_:1})]),_:1}),e(j,{headers:k.value,items:D.value,loading:f.value,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요","items-per-page":25,"onClick:row":F},{headers:o(({columns:i})=>[N("tr",le,[(M(!0),w(B,null,J(i,T=>(M(),w("th",{key:T.key,class:"custom-header",style:{height:"40px","text-align":"center"}},K(T.title),1))),128))])]),_:1},8,["headers","items","loading"])],64)}}},ce=P(oe,[["__scopeId","data-v-50c32f46"]]);export{ce as default};
