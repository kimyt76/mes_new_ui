import{_ as R,a as $,r as i,k as G,m as z,A as I,c as f,g as t,d as n,w as a,F as T,e as H,o as x,j as J,h,t as d,i as L,f as M,n as K}from"./index-C5cV9Y6n.js";import{e as O}from"./exportToExcel-Kkbtezxo.js";import{A as Q}from"./apiItem-BwY03PTJ.js";import{f as Y,i as W}from"./common-Wz1MS7oe.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const X=["onClick"],Z={__name:"ItemList",setup(ee){const{userId:P}=$(),r=H(),p=i(!1),g=i(null),_=i([]),m=i(null),w=i([]),C=i([]),s=G({itemTypeCd:"",itemName:"",itemCd:"",customerName:"",useYn:"",userId:P}),b=i([{title:"품목",key:"itemTypeName",align:"start",width:"80px"},{title:"품목코드",key:"itemCd",align:"center",width:"100px"},{title:"품목명",key:"itemName",align:"start",width:"250px"},{title:"단위",key:"unit",align:"center",width:"70px"},{title:"규격",key:"spec",align:"center",width:"100px"},{title:"구매처",key:"customerName",align:"left",width:"200px"},{title:"입고단가",key:"inPrice",align:"end",width:"100px"},{title:"출고단가",key:"outPrice",align:"end",width:"100px"},{title:"제품유형",key:"itemGrp2Name",align:"center",width:"110px"},{title:"사용",key:"useYn",align:"center",width:"70px"}]),S=()=>{if(W(m.value))r.push({name:"ItemNewCd"});else{const o=m.value[0].itemCd,l=m.value[0].itemTypeCd;l==="M4"?r.push({name:"ItemSubCd",query:{id:o,type:l}}):["M0","M3","M5","M6"].includes(l)&&r.push({name:"ItemThird",query:{id:o,type:l}})}},A=(o,l)=>{r.push({name:"ItemDetail",params:{id:o.itemCd}})},k=async()=>{try{p.value=!0;const o={...s};_.value=await Q.getItemList(o)}catch{}finally{p.value=!1}};z(async()=>{w.value=await I.getCodeList("item_Type_Cd"),C.value=await I.getCodeList("use_yn"),k()});const U=()=>{O(b,_.value,"품목정보_목록")};return(o,l)=>{const E=n("v-breadcrumbs"),N=n("v-select"),V=n("v-text-field"),c=n("v-btn"),v=n("v-col"),F=n("v-form"),y=n("v-row"),j=n("v-card-text"),B=n("v-card"),q=n("v-spacer"),D=n("v-data-table");return x(),f(T,null,[t(E,{items:["MES","기본관리","품목관리"],class:"custom-breadcrumbs"}),t(B,{class:"pa-1",style:{height:"60px"}},{default:a(()=>[t(j,null,{default:a(()=>[t(y,null,{default:a(()=>[t(F,{ref_key:"srhForm",ref:g,onSubmit:J(k,["prevent"])},{default:a(()=>[t(v,{class:"d-flex ga-4"},{default:a(()=>[t(N,{modelValue:s.itemTypeCd,"onUpdate:modelValue":l[0]||(l[0]=e=>s.itemTypeCd=e),label:"품목구분",density:"compact",items:w.value,"item-title":"codeNm","item-value":"code",variant:"underlined",style:{width:"150px"}},null,8,["modelValue","items"]),t(V,{modelValue:s.itemName,"onUpdate:modelValue":l[1]||(l[1]=e=>s.itemName=e),label:"품목명",placeholder:"품목명을 입력해주세요",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue"]),t(V,{modelValue:s.customerName,"onUpdate:modelValue":l[2]||(l[2]=e=>s.customerName=e),label:"거래처명",placeholder:"거래처명을 입력해주세요",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue"]),t(N,{modelValue:s.useYn,"onUpdate:modelValue":l[3]||(l[3]=e=>s.useYn=e),label:"사용여부",density:"compact",items:C.value,"item-title":"codeNm","item-value":"code",variant:"underlined",style:{width:"150px"}},null,8,["modelValue","items"]),t(c,{text:"조회",color:"brown-lighten-4",type:"submit"}),t(c,{text:"초기화",onClick:l[4]||(l[4]=e=>g.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),t(q),t(y,null,{default:a(()=>[t(v,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:a(()=>[t(c,{color:"brown-lighten-4",text:"신규",onClick:S}),t(c,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:U})]),_:1})]),_:1}),t(y,null,{default:a(()=>[t(v,{class:"pa-0"},{default:a(()=>[t(D,{modelValue:m.value,"onUpdate:modelValue":l[5]||(l[5]=e=>m.value=e),headers:b.value,items:_.value,loading:p.value,"items-per-page":15,density:"compact","select-strategy":"single","show-select":"","fixed-header":"",height:"650px","return-object":"",class:"my-table",tableStyle:"table-layout: fixed; width: 100%"},{headers:a(({columns:e})=>[M("tr",null,[(x(!0),f(T,null,K(e,u=>(x(),f("th",{key:u.key,class:"custom-header"},d(u.title),1))),128))])]),"item.itemName":a(({item:e,index:u})=>[M("div",{style:{cursor:"pointer","text-decoration":"underline"},onClick:te=>A(e,u)},d(e.itemName),9,X)]),"item.inPrice":a(({item:e})=>[h(d(L(Y)(e.inPrice)),1)]),"item.outPrice":a(({item:e})=>[h(d(L(Y)(e.outPrice)),1)]),"item.useYn":a(({item:e})=>[h(d(e.useYn==="Y"?"사용":"미사용"),1)]),_:1},8,["modelValue","headers","items","loading"])]),_:1})]),_:1})],64)}}},me=R(Z,[["__scopeId","data-v-89769d05"]]);export{me as default};
