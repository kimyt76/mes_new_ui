import{_ as Q,a as W,u as G,r as c,k as J,m as K,A as q,d as a,b as R,o as g,w as t,g as e,h as C,t as L,f as $,c as k,F as E,n as T,j as X,H as Y}from"./index-Ccil-zV7.js";import{A as z}from"./apiLab-BsldDwKt.js";import{e as Z}from"./exportToExcel-Kkbtezxo.js";import{i as ee}from"./common-zapmyerY.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const te={class:"d-flex flex-wrap"},le={class:"d-flex flex-wrap"},ne={__name:"IngredientRegPop",props:{title:{type:String},id:{type:String},mode:{type:String}},emits:["saved","close-dialog"],setup(O,{emit:j}){const{userId:B}=W(),{vError:w}=G(),x=c([]),y=c([]),b=c([]),_=c([]),d=J({krIngredientName:"",enIngredientName:"",cnIngredientName:"",casNo:"",functionCd:"",etc:""}),f=O,r=j,I=async()=>{const m={...d,limitCountries:b.value,bannedCountries:_.value,userId:B};try{const l=await z.saveIngredientInfo(m);r("saved",l),r("close-dialog")}catch(l){w(l.message)}};return K(async()=>{if(x.value=await q.getCodeList("fn_Cd"),y.value=await q.getCodeList("country_cd"),f.mode==="U"){const m=await z.getIngredientInfo(f.id);Object.assign(d,m),b.value=m.limitCountries,_.value=m.bannedCountries}}),(m,l)=>{const N=a("v-toolbar-title"),h=a("v-spacer"),p=a("v-icon"),o=a("v-btn"),D=a("v-toolbar"),i=a("v-col"),u=a("v-row"),v=a("v-text-field"),F=a("v-select"),V=a("v-card-subtitle"),U=a("v-checkbox"),M=a("v-btn-toggle"),S=a("v-card-text"),H=a("v-card-actions"),P=a("v-form"),s=a("v-card");return g(),R(s,{class:"no-scroll"},{default:t(()=>[e(D,{height:"40",class:"d-flex align-center justify-space-between px-2 toolbar-Head"},{default:t(()=>[e(N,null,{default:t(()=>[C(L(f.title),1)]),_:1}),e(h),e(o,{icon:"",onClick:l[0]||(l[0]=n=>r("close-dialog"))},{default:t(()=>[e(p,null,{default:t(()=>l[11]||(l[11]=[C("mdi-close")])),_:1})]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(P,{ref:"vform"},{default:t(()=>[e(u,null,{default:t(()=>[e(i,{class:"mt-3"},{default:t(()=>[C(" - 성분코드 : "+L(f.id),1)]),_:1})]),_:1}),e(u,{class:"mr-1"},{default:t(()=>[e(i,{class:"mt-2 ml-3",style:{padding:"0px"}},{default:t(()=>[e(v,{modelValue:d.krIngredientName,"onUpdate:modelValue":l[1]||(l[1]=n=>d.krIngredientName=n),density:"compact",label:"국문 성분명",placeholder:"국문성분명을 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{class:"mr-1"},{default:t(()=>[e(i,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(v,{modelValue:d.enIngredientName,"onUpdate:modelValue":l[2]||(l[2]=n=>d.enIngredientName=n),density:"compact",label:"영문 성분명",placeholder:"영문성분명을 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{class:"mr-1"},{default:t(()=>[e(i,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(v,{modelValue:d.cnIngredientName,"onUpdate:modelValue":l[3]||(l[3]=n=>d.cnIngredientName=n),label:"중문 성분명",placeholder:"중문성분명을 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{class:"mr-1"},{default:t(()=>[e(i,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(v,{modelValue:d.casNo,"onUpdate:modelValue":l[4]||(l[4]=n=>d.casNo=n),label:"CAS No.",placeholder:"CAS No를 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{class:"mr-1"},{default:t(()=>[e(i,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(F,{modelValue:d.functionCd,"onUpdate:modelValue":l[5]||(l[5]=n=>d.functionCd=n),label:"function",items:x.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(u,{class:"mr-1"},{default:t(()=>[e(i,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(v,{modelValue:d.etc,"onUpdate:modelValue":l[6]||(l[6]=n=>d.etc=n),label:"비고",placeholder:"비고를 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(S,{style:{height:"60px"}},{default:t(()=>[e(u,null,{default:t(()=>[e(i,null,{default:t(()=>[e(V,null,{default:t(()=>l[12]||(l[12]=[C(" -한도 국가")])),_:1}),e(M,{modelValue:m.toggle,"onUpdate:modelValue":l[8]||(l[8]=n=>m.toggle=n),border:"",divided:""},{default:t(()=>[$("div",te,[(g(!0),k(E,null,T(y.value,n=>(g(),R(U,{key:n.code,label:n.codeNm,value:n.code,class:"ml-1",density:"compact",modelValue:b.value,"onUpdate:modelValue":l[7]||(l[7]=A=>b.value=A)},null,8,["label","value","modelValue"]))),128))])]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:t(()=>[e(V,null,{default:t(()=>l[13]||(l[13]=[C("-금지 국가")])),_:1}),$("div",le,[(g(!0),k(E,null,T(y.value,n=>(g(),R(U,{key:n.code,label:n.codeNm,value:n.code,class:"ml-1",density:"compact",modelValue:_.value,"onUpdate:modelValue":l[9]||(l[9]=A=>_.value=A)},null,8,["label","value","modelValue"]))),128))])]),_:1})]),_:1})]),_:1}),e(h),e(H,null,{default:t(()=>[e(u,null,{default:t(()=>[e(i,{class:"d-flex justify-end align-center mt-8",style:{gap:"5px"}},{default:t(()=>[e(o,{color:"indigo-darken-4",text:"저장",variant:"tonal",depressed:"",onClick:I}),e(o,{text:"닫기",variant:"tonal",onClick:l[10]||(l[10]=n=>r("close-dialog"))})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},ae=Q(ne,[["__scopeId","data-v-65f1eeef"]]),oe=["onClick"],me={__name:"IngredientList",setup(O){const{vError:j,vSuccess:B}=G(),w=c(""),x=c(!1),y=c(!1),b=c(null),_=c([]),d=c(""),f=c(""),r=J({ingredientCode:"",ingredientName:"",functionNm:"",regName:""}),I=c([{title:"성분코드",key:"ingredientCode",align:"center",width:"70px"},{title:"국문성분명",key:"krIngredientName",align:"start",width:"240px"},{title:"영문성분명",key:"enIngredientName",align:"start",width:"240px"},{title:"중문성분명",key:"cnIngredientName",align:"start",width:"250px"},{title:"CAS No",key:"casNo",align:"start",width:"150px"},{title:"function",key:"functionNm",align:"start",width:"150px"},{title:"등록자",key:"regName",align:"center",width:"70px"},{title:"수정자",key:"updName",align:"center",width:"70px"},{title:"수정일자",key:"updDate",align:"center",width:"100px"},{title:"비고",key:"etc",align:"start",width:"110px"}]),m=(p,o)=>{ee(p.ingredientCode)?(d.value="N",f.value="성분 등록"):(d.value="U",f.value="성분 상세정보",w.value=p.ingredientCode),x.value=!0},l=p=>{B(p),N()},N=async()=>{y.value=!0;try{const p={...r};_.value=await z.getIngredientList(p)}catch(p){j("조회 중 오류가 발생했습니다."+p)}finally{y.value=!1}};K(async()=>{N()});const h=()=>{Z(I,_.value,"성분_목록")};return(p,o)=>{const D=a("v-breadcrumbs"),i=a("v-text-field"),u=a("v-btn"),v=a("v-col"),F=a("v-form"),V=a("v-row"),U=a("v-card-text"),M=a("v-card"),S=a("v-spacer"),H=a("v-data-table"),P=a("v-dialog");return g(),k(E,null,[e(D,{items:["MES","연구관리","성분정보"],class:"custom-breadcrumbs"}),e(M,{class:"pa-1",style:{height:"60px"}},{default:t(()=>[e(U,null,{default:t(()=>[e(V,null,{default:t(()=>[e(F,{ref_key:"srhForm",ref:b,onSubmit:X(N,["prevent"])},{default:t(()=>[e(v,{class:"d-flex flex-row ga-3"},{default:t(()=>[e(i,{modelValue:r.ingredientCode,"onUpdate:modelValue":o[0]||(o[0]=s=>r.ingredientCode=s),density:"compact",label:"성분코드",placeholder:"성분코드를 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(i,{modelValue:r.ingredientName,"onUpdate:modelValue":o[1]||(o[1]=s=>r.ingredientName=s),density:"compact",label:"성분명",placeholder:"성분명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(i,{modelValue:r.functionNm,"onUpdate:modelValue":o[2]||(o[2]=s=>r.functionNm=s),density:"compact",label:"function명",placeholder:"function명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(i,{modelValue:r.regName,"onUpdate:modelValue":o[3]||(o[3]=s=>r.regName=s),density:"compact",label:"등록자",placeholder:"등록자명을 입력해주세요",variant:"underlined",style:{width:"150px"}},null,8,["modelValue"]),e(u,{text:"조회",color:"brown-lighten-4",type:"submit"}),e(u,{text:"초기화",onClick:o[4]||(o[4]=s=>b.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(S),e(V,null,{default:t(()=>[e(v,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:t(()=>[e(u,{color:"brown-lighten-4",text:"신규",onClick:m}),e(u,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:h})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(v,{class:"pa-0"},{default:t(()=>[e(H,{headers:I.value,items:_.value,loading:y.value,"items-per-page":15,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요",density:"compact","fixed-header":"",height:"690px"},{headers:t(({columns:s})=>[$("tr",null,[(g(!0),k(E,null,T(s,n=>(g(),k("th",{key:n.key,class:"custom-header",style:Y([{height:"40px"},{textAlign:"center"}])},L(n.title),1))),128))])]),"item.ingredientCode":t(({item:s,index:n})=>[$("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:A=>m(s,n)},L(s.ingredientCode),9,oe)]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),e(P,{modelValue:x.value,"onUpdate:modelValue":o[6]||(o[6]=s=>x.value=s),width:"800px",height:"600px",persistent:""},{default:t(()=>[e(ae,{title:f.value,mode:d.value,id:w.value,onSaved:l,onCloseDialog:o[5]||(o[5]=s=>x.value=!1)},null,8,["title","mode","id"])]),_:1},8,["modelValue"])],64)}}};export{me as default};
