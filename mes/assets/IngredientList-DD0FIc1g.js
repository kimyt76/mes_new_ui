import{_ as O,a as K,u as q,r as u,m as z,n as G,d as s,b as j,o as g,w as t,g as e,h as Q,v as p,f as d,c as S,F as L,t as M,j as W}from"./index-B3k6qWTO.js";import{A as P}from"./apiLab-Dd9xM-3p.js";import{e as X}from"./exportToExcel-CvGBOhcb.js";import{A as T}from"./apiCommon-Cgp-9u3n.js";import"./_commonjsHelpers-CZnAS8i4.js";const Y={class:"d-flex flex-wrap"},Z={class:"d-flex flex-wrap"},ee={__name:"IngredientRegPop",props:{title:{type:String},id:{type:String},mode:{type:String}},emits:["saved","close-dialog"],setup(R,{emit:F}){const{userId:$}=K(),{vError:V}=q(),x=u([]),y=u([]),h=u([]),_=u([]),o=z({krIngredientName:"",enIngredientName:"",cnIngredientName:"",casNo:"",functionCd:"",etc:""}),v=R,w=F,B=async()=>{const f={...o,limitCountries:h.value,bannedCountries:_.value,userId:$};try{const l=await P.saveIngredientInfo(f);w("saved",l),w("close-dialog")}catch(l){V(l.message)}};return G(async()=>{if(x.value=await T.getCodeList("fn_Cd"),y.value=await T.getCodeList("country_cd"),v.mode==="U"){const f=await P.getIngredientInfo(v.id);Object.assign(o,f),h.value=f.limitCountries,_.value=f.bannedCountries}}),(f,l)=>{const k=s("v-card-item"),c=s("v-col"),m=s("v-row"),b=s("v-text-field"),r=s("v-select"),i=s("v-card-text"),U=s("v-checkbox"),C=s("v-form"),N=s("v-btn"),E=s("v-card-actions"),A=s("v-card");return g(),j(A,null,{default:t(()=>[e(k,{title:v.title},null,8,["title"]),e(i,null,{default:t(()=>[e(C,{ref:"vform"},{default:t(()=>[e(m,null,{default:t(()=>[e(c,{class:"mt-3"},{default:t(()=>[Q(" - 성분코드 : "+p(v.id),1)]),_:1})]),_:1}),e(m,{class:"mr-1"},{default:t(()=>[e(c,{class:"mt-2 ml-3",style:{padding:"0px"}},{default:t(()=>[e(b,{modelValue:o.krIngredientName,"onUpdate:modelValue":l[0]||(l[0]=n=>o.krIngredientName=n),density:"compact",label:"국문 성분명",placeholder:"국문성분명을 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{class:"mr-1"},{default:t(()=>[e(c,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(b,{modelValue:o.enIngredientName,"onUpdate:modelValue":l[1]||(l[1]=n=>o.enIngredientName=n),density:"compact",label:"영문 성분명",placeholder:"영문성분명을 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{class:"mr-1"},{default:t(()=>[e(c,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(b,{modelValue:o.cnIngredientName,"onUpdate:modelValue":l[2]||(l[2]=n=>o.cnIngredientName=n),label:"중문 성분명",placeholder:"중문성분명을 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{class:"mr-1"},{default:t(()=>[e(c,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(b,{modelValue:o.casNo,"onUpdate:modelValue":l[3]||(l[3]=n=>o.casNo=n),label:"CAS No.",placeholder:"CAS No를 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{class:"mr-1"},{default:t(()=>[e(c,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(r,{modelValue:o.functionCd,"onUpdate:modelValue":l[4]||(l[4]=n=>o.functionCd=n),label:"function",items:x.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(m,{class:"mr-1"},{default:t(()=>[e(c,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(b,{modelValue:o.etc,"onUpdate:modelValue":l[5]||(l[5]=n=>o.etc=n),label:"비고",placeholder:"비고를 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{class:"mr-1"},{default:t(()=>[e(c,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(i,null,{default:t(()=>l[9]||(l[9]=[d("div",null,"한도 국가",-1)])),_:1}),d("div",Y,[(g(!0),S(L,null,M(y.value,n=>(g(),j(U,{key:n.code,label:n.codeNm,value:n.code,class:"ml-1",density:"compact",modelValue:h.value,"onUpdate:modelValue":l[6]||(l[6]=I=>h.value=I)},null,8,["label","value","modelValue"]))),128))])]),_:1})]),_:1}),e(m,{class:"mr-1"},{default:t(()=>[e(c,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(i,null,{default:t(()=>l[10]||(l[10]=[d("div",null,"금지 국가",-1)])),_:1}),d("div",Z,[(g(!0),S(L,null,M(y.value,n=>(g(),j(U,{key:n.code,label:n.codeNm,value:n.code,class:"ml-1",density:"compact",modelValue:_.value,"onUpdate:modelValue":l[7]||(l[7]=I=>_.value=I)},null,8,["label","value","modelValue"]))),128))])]),_:1})]),_:1})]),_:1},512)]),_:1}),e(E,null,{default:t(()=>[e(N,{color:"indigo-darken-4",text:"저장",variant:"tonal",depressed:"",onClick:B}),e(N,{text:"닫기",variant:"tonal",onClick:l[8]||(l[8]=n=>w("close-dialog"))})]),_:1})]),_:1})}}},te=O(ee,[["__scopeId","data-v-f782bce8"]]),le={class:"d-flex ga-4"},ne={class:"d-flex ga-4 justify-end"},oe={class:"table-wrapper"},ae={style:{height:"40px"}},se={style:{height:"30px"}},de=["onClick"],ie={style:{width:"200px",height:"30px"}},ce={style:{width:"200px",height:"30px"}},re={style:{width:"200px",height:"30px"}},ue={style:{width:"100px",height:"30px"}},me={style:{width:"150px",height:"30px"}},pe={class:"custom-row",style:{width:"100px",height:"30px"}},_e={class:"custom-row",style:{width:"100px",height:"30px"}},ve={style:{width:"100px",height:"30px"}},fe={__name:"IngredientList",setup(R){const{vError:F,vSuccess:$}=q(),V=u(""),x=u(!1),y=u(!1),h=u(null),_=u([]),o=z({ingredientName:"",functionNm:"",casNo:""}),v=async()=>{y.value=!0;try{const r={...o};_.value=await P.getIngredientList(r)}catch(r){F("조회 중 오류가 발생했습니다."+r)}finally{y.value=!1}},w=u([{title:"성분코드",key:"ingredientCode",width:100},{title:"국문성분명",key:"krIngredientName",width:200},{title:"영문성분명",key:"enIngredientName",width:200},{title:"중문성분명",key:"cnIngredientName",width:200},{title:"CAS No",key:"casNo",width:100},{title:"function",key:"functionNm",width:150},{title:"수정자",key:"updNm",width:100},{title:"수정일자",key:"updDate",width:100},{title:"비고",key:"etc",width:100}]),B=r=>{V.value=r,c("U")},f=r=>{$(r),v()},l=u(""),k=u(""),c=r=>{r==="N"?(l.value="N",k.value="성분 등록",V.value=""):(l.value="U",k.value="성분 상세정보"),x.value=!0};G(v);const m=()=>{X(w,_.value,"성분_목록")},b=()=>{h.value.reset()};return(r,i)=>{const U=s("v-breadcrumbs"),C=s("v-text-field"),N=s("v-btn"),E=s("v-col"),A=s("v-row"),n=s("v-form"),I=s("v-card"),H=s("v-data-table"),J=s("v-dialog");return g(),S(L,null,[e(U,{items:["MES","연구관리","성분정보"],class:"custom-breadcrumbs"}),e(I,{class:"pa-3",color:"blue-grey-lighten-5",style:{height:"60px"}},{default:t(()=>[e(n,{ref_key:"srhForm",ref:h,onSubmit:W(v,["prevent"])},{default:t(()=>[e(A,null,{default:t(()=>[e(E,{style:{"background-color":"#ECEFF1"}},{default:t(()=>[d("div",le,[e(C,{modelValue:o.ingredientName,"onUpdate:modelValue":i[0]||(i[0]=a=>o.ingredientName=a),label:"성분명",placeholder:"성분명을 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"]),e(C,{modelValue:o.functionNm,"onUpdate:modelValue":i[1]||(i[1]=a=>o.functionNm=a),label:"function명",placeholder:"function명을 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"]),e(C,{label:"등록자",placeholder:"등록자를 입력해주세요",variant:"underlined",density:"compact"}),e(N,{color:"#EFEBE9",class:"mt-2",type:"submit",density:"compact",text:"조회"}),e(N,{onClick:b,class:"mt-2",density:"compact",text:"초기화"})])]),_:1})]),_:1})]),_:1},512)]),_:1}),e(A,{class:"mb-1"},{default:t(()=>[e(E,null,{default:t(()=>[d("div",ne,[e(N,{color:"brown-lighten-4",class:"mt-3",density:"compact",onClick:i[2]||(i[2]=a=>c("N")),text:"신규"}),e(N,{onClick:m,class:"mt-3 mr-3",density:"compact",text:"엑셀"})])]),_:1})]),_:1}),d("div",oe,[e(H,{headers:w.value,loading:y.value,items:_.value,class:"scrollable-table",style:{height:"700px"},"items-per-page":25,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요"},{headers:t(({columns:a})=>[d("tr",ae,[(g(!0),S(L,null,M(a,D=>(g(),S("th",{key:D.key,class:"custom-header",style:{height:"40px"}},p(D.title),1))),128))])]),item:t(({item:a})=>[d("tr",se,[d("td",{class:"custom-row",style:{width:"100px",height:"30px",padding:"0",cursor:"pointer"},onClick:D=>B(a.ingredientCode)},p(a.ingredientCode),9,de),d("td",ie,p(a.krIngredientName),1),d("td",ce,p(a.enIngredientName),1),d("td",re,p(a.cnIngredientName),1),d("td",ue,p(a.casNo),1),d("td",me,p(a.functionNm),1),d("td",pe,p(a.updNm),1),d("td",_e,p(a.updDate),1),d("td",ve,p(a.etc),1)])]),_:1},8,["headers","loading","items"])]),e(J,{modelValue:x.value,"onUpdate:modelValue":i[4]||(i[4]=a=>x.value=a),"max-width":"800px",persistent:""},{default:t(()=>[e(te,{title:k.value,mode:l.value,id:V.value,onSaved:f,onCloseDialog:i[3]||(i[3]=a=>x.value=!1)},null,8,["title","mode","id"])]),_:1},8,["modelValue"])],64)}}},Ne=O(fe,[["__scopeId","data-v-2d736317"]]);export{Ne as default};
