import{_ as B,r as i,a as L,u as J,n as M,c as H,g as s,d,w as r,F as R,e as T,D as z,o as G,f as t,h as g,t as o,i as h,E as K}from"./index-BNL3Tgw5.js";import{e as A,g as P}from"./common-BOBTT4pT.js";import{_ as W}from"./DateSinglePicker-8DAkXH4C.js";import{_ as S}from"./SingleFileUpload-D8e_-dIt.js";import{A as w}from"./apiOrders-Whxuw2Cj.js";import{_ as X}from"./UserListPop-DEkQwN6k.js";import"./apiCommon-LY9rUrf-.js";import"./format-CBpsKyOP.js";const Y={class:"d-flex justify-end"},Z={class:"approval-user"},c={style:{height:"80px"}},ll={class:"approval-date"},tl={style:{height:"30px"}},el={colspan:"3"},sl={colspan:"4",style:{height:"120px","text-align":"center"}},nl={class:"d-flex ga-4 justify-end"},ol={__name:"OrderNew",setup(al){const p=i(!1),{userId:O,memberNm:x,deptNm:N}=L(),{vError:C,vSuccess:q}=J(),e=i({orderDate:A(),seq:"",customerNm:"",itemName:"",orderQty:0,dueDate:"",draftNm:"",draftDept:"",draftDate:"",draftUserId:""}),u=i({businessUserId:"",productUserId:"",purchaseUserId:"",qcUserId:"",labUserId:"",businessApprovalDate:"",productApprovalDate:"",purchaseApprovalDate:"",qcApprovalDate:"",labApprovalDate:""}),m=i(""),v=i(null),f=i(null),F=(a,l)=>{m.value=l,u.value.labUserId=a},Q=async()=>{e.value.draftNm=x,e.value.draftDept=N,e.value.draftDate=A(),e.value.draftUserId=O,e.value.orderQty=P(e.value.orderQty);const a=new FormData;a.append("orderInfo",JSON.stringify(e.value)),a.append("approval",JSON.stringify(u.value)),v.value&&a.append("orderFile",v.value),f.value&&a.append("prodFile",f.value);try{const l=await w.saveOrderInfo(a);q(l),U.push({name:"OrderList"})}catch(l){C(l.response)}};M(async()=>{e.value.seq=await w.getSeq();const a=await w.getApprovalInfo();Object.assign(u.value,a)});const k=()=>{e.value.orderQty===0&&(e.value.orderQty="")},U=T(),$=()=>{U.push({name:"OrderList"})};return(a,l)=>{const E=d("v-breadcrumbs"),y=d("v-btn"),I=d("v-table"),b=d("v-col"),V=d("v-row"),D=d("v-text-field"),_=d("v-dialog"),j=z("comma-number");return G(),H(R,null,[s(E,{items:["MES","발주관리","발주 등록"]}),s(V,{class:"flex-wrap"},{default:r(()=>[s(b,null,{default:r(()=>[t("div",Y,[s(I,{class:"approval-table"},{default:r(()=>[t("tbody",null,[l[15]||(l[15]=t("tr",null,[t("th",{style:{width:"10px"},rowspan:"3"},[g("결"),t("br"),t("br"),t("br"),g("재")]),t("th",{style:{height:"30px","text-align":"center"}},"기안자"),t("th",{style:{height:"30px","text-align":"center"}},"영업관리"),t("th",{style:{height:"30px","text-align":"center"}},"생산관리"),t("th",{style:{height:"30px","text-align":"center"}},"구매부"),t("th",{style:{height:"30px","text-align":"center"}},"품질관리"),t("th",{style:{height:"30px","text-align":"center"}},"연구소")],-1)),t("tr",Z,[t("td",c,o(h(x)),1),t("td",null,[t("span",null,o(u.value.businessUserId),1)]),t("td",null,[t("span",null,o(u.value.productUserId),1)]),t("td",null,[t("span",null,o(u.value.purchaseUserId),1)]),t("td",null,[t("span",null,o(u.value.qcUserId),1)]),t("td",null,[t("span",null,o(m.value),1),s(y,{width:"20px",text:"결재자",modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=n=>m.value=n),onClick:l[1]||(l[1]=n=>p.value=!0)},null,8,["modelValue"])])]),t("tr",ll,[t("td",tl,o(e.value.orderDate),1),l[10]||(l[10]=t("td",{style:{height:"30px"}},"결재일자",-1)),l[11]||(l[11]=t("td",{style:{height:"30px"}},"결재일자",-1)),l[12]||(l[12]=t("td",{style:{height:"30px"}},"결재일자",-1)),l[13]||(l[13]=t("td",{style:{height:"30px"}},"결재일자",-1)),l[14]||(l[14]=t("td",{style:{height:"30px"}},"결재일자",-1))])])]),_:1})])]),_:1})]),_:1}),s(V,null,{default:r(()=>[s(b,null,{default:r(()=>[s(I,{class:"order-table"},{default:r(()=>[t("tbody",null,[t("tr",null,[l[16]||(l[16]=t("th",null,"문서번호",-1)),t("td",null,o(e.value.orderDate)+" - "+o(e.value.seq),1),l[17]||(l[17]=t("th",null,"처리기한",-1)),l[18]||(l[18]=t("td",null,"즉시",-1))]),t("tr",null,[l[19]||(l[19]=t("th",null,"보존년한",-1)),l[20]||(l[20]=t("td",null,"5년",-1)),l[21]||(l[21]=t("th",null,"기안일자",-1)),t("td",null,o(e.value.orderDate),1)]),t("tr",null,[l[22]||(l[22]=t("th",null,"기안부서",-1)),t("td",null,o(h(N)),1),l[23]||(l[23]=t("th",null,"기안자",-1)),t("td",null,o(h(x)),1)]),t("tr",null,[l[24]||(l[24]=t("th",null,"제목",-1)),t("td",el,o(e.value.customerNm)+"   "+o(e.value.itemName)+"    발주서 및 제품 사양서 검토 요청의 건 ",1)]),t("tr",null,[t("td",sl,[g(o(e.value.customerNm)+"    "+o(e.value.itemName)+"    발주서 및 제품 사양서 기안하오니 검토하여 주시기 바랍니다.",1),l[25]||(l[25]=t("br",null,null,-1)),l[26]||(l[26]=t("br",null,null,-1)),l[27]||(l[27]=g(" - 아 래- "))])]),t("tr",null,[l[28]||(l[28]=t("th",null,"고객사명",-1)),t("td",null,[s(D,{modelValue:e.value.customerNm,"onUpdate:modelValue":l[2]||(l[2]=n=>e.value.customerNm=n),style:{width:"500px",height:"20px"},density:"compact",class:"mb-4",label:"고객사명"},null,8,["modelValue"])]),l[29]||(l[29]=t("th",null,"품목",-1)),t("td",null,[s(D,{modelValue:e.value.itemName,"onUpdate:modelValue":l[3]||(l[3]=n=>e.value.itemName=n),style:{width:"500px",height:"20px","vertical-align":"center"},density:"compact",class:"mb-4",label:"품명"},null,8,["modelValue"])])]),t("tr",null,[l[30]||(l[30]=t("th",null,"발주수량",-1)),t("td",null,[K(s(D,{modelValue:e.value.orderQty,"onUpdate:modelValue":l[4]||(l[4]=n=>e.value.orderQty=n),density:"compact",style:{width:"500px",height:"20px","text-align":"right"},class:"mb-4",label:"발주수량",onClick:k},null,8,["modelValue"]),[[j]])]),l[31]||(l[31]=t("th",null,"납기일자",-1)),t("td",null,[s(W,{modelValue:e.value.dueDate,"onUpdate:modelValue":l[5]||(l[5]=n=>e.value.dueDate=n),title:"납기일자",style:{width:"500px",height:"20px","vertical-align":"middle"},class:"mb-10"},null,8,["modelValue"])])]),t("tr",null,[l[32]||(l[32]=t("th",null,"발주서 첨부파일",-1)),t("td",null,[s(S,{modelValue:v.value,"onUpdate:modelValue":l[6]||(l[6]=n=>v.value=n),style:{height:"20px",width:"500px"},class:"mb-4"},null,8,["modelValue"])]),l[33]||(l[33]=t("th",null,"제품사양서",-1)),t("td",null,[s(S,{modelValue:f.value,"onUpdate:modelValue":l[7]||(l[7]=n=>f.value=n),style:{height:"20px",width:"500px"},class:"mb-4"},null,8,["modelValue"])])])])]),_:1})]),_:1})]),_:1}),s(V,null,{default:r(()=>[s(b,null,{default:r(()=>[t("div",nl,[s(y,{text:"저장",class:"gt-2",color:"brown-lighten-4",onClick:Q}),s(y,{text:"목록",class:"mr-3",onClick:$})])]),_:1})]),_:1}),s(_,{modelValue:p.value,"onUpdate:modelValue":l[9]||(l[9]=n=>p.value=n),height:"700",width:"900px",persistent:""},{default:r(()=>[s(X,{onSelected:F,onCloseDialog:l[8]||(l[8]=n=>p.value=!1)})]),_:1},8,["modelValue"])],64)}}},gl=B(ol,[["__scopeId","data-v-6164b6a3"]]);export{gl as default};
