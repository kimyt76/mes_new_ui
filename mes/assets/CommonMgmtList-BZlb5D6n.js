import{_ as q,a as z,u as E,k as j,m as L,A as b,d as o,b as G,o as $,w as t,g as e,h as A,r as p,c as H,F as J,j as K,t as I,f as Q}from"./index-DbwVXjcr.js";import{e as W}from"./exportToExcel-Kkbtezxo.js";import{i as X}from"./common-BCog4hmn.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const Z={__name:"CommonDetailPop",props:{title:{type:String},id:{type:String},mode:{type:String}},emits:["saved","close-dialog"],setup(Y,{emit:C}){const{userId:w}=z(),{vError:_}=E(),f=C,y=Y,n=j({comTypeCd:"",comTypeNm:"",code:"",codeNm:"",dispOrder:"",useYn:"",discription:"",userId:w}),g=[{text:"사용",value:"Y"},{text:"미사용",value:"N"}];L(async()=>{if(y.mode==="U"){const i=await b.getCommonInfo(y.id);Object.assign(n,i)}});const x=async()=>{try{const i={...n},l=await b.saveCommonInfo(i);f("saved",l),f("close-dialog")}catch(i){_(i.message)}};return(i,l)=>{const r=o("v-card-item"),u=o("v-text-field"),c=o("v-col"),v=o("v-row"),k=o("v-select"),N=o("v-spacer"),m=o("v-btn"),s=o("v-card-actions"),h=o("v-card");return $(),G(h,null,{default:t(()=>[e(r,{title:y.title,style:{height:"30px"}},null,8,["title"]),e(v,{class:"mt-3"},{default:t(()=>[e(c,{cols:"12",md:"4",sm:"6",class:"ml-4"},{default:t(()=>[e(u,{modelValue:n.comTypeCd,"onUpdate:modelValue":l[0]||(l[0]=a=>n.comTypeCd=a),density:"compact",label:"공통타입",placeholder:"공통타입을 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"4",md:"4",sm:"6"},{default:t(()=>[e(u,{modelValue:n.comTypeNm,"onUpdate:modelValue":l[1]||(l[1]=a=>n.comTypeNm=a),density:"compact",label:"공통타입명",placeholder:"공통타입 이름 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(c,{cols:"6",md:"4",sm:"6",class:"ml-4"},{default:t(()=>[e(u,{modelValue:n.code,"onUpdate:modelValue":l[2]||(l[2]=a=>n.code=a),density:"compact",label:"코드",placeholder:"코드를 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"6",md:"4",sm:"6"},{default:t(()=>[e(u,{modelValue:n.codeNm,"onUpdate:modelValue":l[3]||(l[3]=a=>n.codeNm=a),density:"compact",label:"코드명",placeholder:"코드명을 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(c,{cols:"6",md:"4",sm:"6",class:"ml-4"},{default:t(()=>[e(u,{modelValue:n.dispOrder,"onUpdate:modelValue":l[4]||(l[4]=a=>n.dispOrder=a),density:"compact",label:"순서",type:"number",placeholder:"순서를 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"4",sm:"6"},{default:t(()=>[e(k,{modelValue:n.useYn,"onUpdate:modelValue":l[5]||(l[5]=a=>n.useYn=a),items:g,"item-title":"text","item-value":"value",density:"compact",label:"사용유무",placeholder:"사용유무를 선택해주세요",variant:"underlined"},{default:t(()=>l[8]||(l[8]=[A(" >")])),_:1},8,["modelValue"])]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(c,{cols:"6",md:"4",sm:"6",class:"ml-4"},{default:t(()=>[e(u,{modelValue:n.discription,"onUpdate:modelValue":l[6]||(l[6]=a=>n.discription=a),density:"compact",label:"비고",placeholder:"비고를 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(N),e(m,{color:"indigo-darken-4",text:"저장",variant:"tonal",depressed:"",onClick:x}),e(m,{text:"닫기",variant:"tonal",onClick:l[7]||(l[7]=a=>f("close-dialog"))})]),_:1})]),_:1})}}},ee=q(Z,[["__scopeId","data-v-b9ed39e1"]]),te=["onClick"],me={__name:"CommonMgmtList",setup(Y){const{vError:C,vSuccess:w}=E(),_=p(!1),f=p(!1),y=p(null),n=p([]),g=p([]),x=p(""),i=p("N"),l=p(""),r=j({userId:"",deptNm:"",jobPosition:"",useYn:""}),u=(m,s)=>{X(m.comId)?(l.value="공통코드 등록",x.value=null):(i.value="U",x.value=m.comId,l.value="공통코드 수정"),_.value=!0},c=p([{title:"코드구분",key:"comTypeCd",align:"center",align:"center",width:"180px"},{title:"구분명",key:"comTypeNm",align:"center",align:"center",width:"120px"},{title:"코드",key:"code",align:"center",align:"center",width:"120px"},{title:"코드명",key:"codeNm",align:"center",align:"start",width:"180px"},{title:"사용여부",key:"useYn",align:"center",align:"center",width:"100px"},{title:"비고",key:"descrition",align:"center",align:"center",width:"150px"}]),v=async()=>{f.value=!0;try{const m={...r};n.value=await b.getCommonList(m)}catch(m){C(m)}finally{f.value=!1}},k=m=>{w(m),v()};L(async()=>{g.value=await b.getCodeList("use_yn"),v()});const N=()=>{W(c,n.value,"공통코드_목록")};return(m,s)=>{const h=o("v-breadcrumbs"),a=o("v-text-field"),B=o("v-select"),V=o("v-btn"),T=o("v-col"),D=o("v-form"),U=o("v-row"),F=o("v-card-text"),M=o("v-card"),O=o("v-spacer"),P=o("v-data-table"),R=o("v-dialog");return $(),H(J,null,[e(h,{items:["MES","시스템관리","공통코드 관리"],class:"custom-breadcrumbs"}),e(M,{class:"pa-1",style:{height:"60px"}},{default:t(()=>[e(F,null,{default:t(()=>[e(U,null,{default:t(()=>[e(D,{ref_key:"srhForm",ref:y,onSubmit:K(v,["prevent"])},{default:t(()=>[e(T,{class:"d-flex ga-4"},{default:t(()=>[e(a,{modelValue:r.comTypeCd,"onUpdate:modelValue":s[0]||(s[0]=d=>r.comTypeCd=d),label:"코드구분",placeholder:"코드구분명을 입력해주세요",variant:"underlined",density:"compact",style:{width:"200px"}},null,8,["modelValue"]),e(a,{modelValue:r.codeNm,"onUpdate:modelValue":s[1]||(s[1]=d=>r.codeNm=d),label:"코드명",placeholder:"코드명을 입력해주세요",variant:"underlined",density:"compact",style:{width:"200px"}},null,8,["modelValue"]),e(B,{modelValue:r.useYn,"onUpdate:modelValue":s[2]||(s[2]=d=>r.useYn=d),label:"사용여부",items:g.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue","items"]),e(V,{text:"조회",color:"brown-lighten-4",type:"submit"}),e(V,{text:"초기화",onClick:s[3]||(s[3]=d=>y.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(O),e(U,null,{default:t(()=>[e(T,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:t(()=>[e(V,{color:"brown-lighten-4",text:"신규",onClick:u}),e(V,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:N})]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(T,{class:"pa-0"},{default:t(()=>[e(P,{headers:c.value,items:n.value,"items-per-page":15,density:"compact","fixed-header":"",height:"700px",class:"custom-table","return-object":""},{"item.comTypeCd":t(({item:d,index:S})=>[Q("div",{style:{cursor:"pointer","text-decoration":"underline"},onClick:le=>u(d,S)},I(d.comTypeCd),9,te)]),"item.useYn":t(({item:d,index:S})=>[A(I(d.useYn==="Y"?"사용":"미사용"),1)]),_:1},8,["headers","items"])]),_:1})]),_:1}),e(R,{modelValue:_.value,"onUpdate:modelValue":s[5]||(s[5]=d=>_.value=d),"max-width":"600px",persistent:""},{default:t(()=>[e(ee,{title:l.value,mode:i.value,id:x.value,onSaved:k,onCloseDialog:s[4]||(s[4]=d=>_.value=!1)},null,8,["title","mode","id"])]),_:1},8,["modelValue"])],64)}}};export{me as default};
