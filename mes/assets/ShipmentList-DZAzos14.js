import{A as r,H as B,k as a,e as V,o as I,p as e,l as t,y as w,t as m,h as p,a2 as D,F as A,W as H,N as z,P as G,a0 as j,u as O}from"./index-BCdxernO.js";import{A as E}from"./apiOrders-LBbh7QBG.js";import{f as P,i as W}from"./common-Ctgf_4Dl.js";import{e as J}from"./exportToExcel-BIsrPQTg.js";const K={class:"wrap-cell text-right"},X={__name:"ShipmentPop",props:{id:{type:String},no:{type:String}},emits:["close-dialog"],setup(T,{emit:b}){const u=b,_=r([]),d=T,v=[{title:"품목코드",key:"itemCd",align:"center",width:"120px"},{title:"품목명",key:"itemName",align:"start",width:"250px"},{title:"수량",key:"qty",align:"end",width:"120px"},{title:"판매",key:"saleDateSeq",align:"center",width:"110px"}],k=async()=>{_.value=await E.getShipmentItemList(d.id)};return B(async()=>{k()}),(N,o)=>{const S=a("v-toolbar-title"),C=a("v-spacer"),x=a("v-icon"),h=a("v-btn"),q=a("v-toolbar"),i=a("v-card-subtitle"),l=a("v-card-item"),L=a("v-data-table-virtual"),g=a("v-col"),c=a("v-row"),f=a("v-card");return I(),V(A,null,[e(q,{height:"40",class:"d-flex align-center justify-space-between px-2 toolbar-Head"},{default:t(()=>[e(S,null,{default:t(()=>[...o[2]||(o[2]=[w("판매 목록",-1)])]),_:1}),e(C),e(h,{icon:"",onClick:o[0]||(o[0]=y=>u("close-dialog"))},{default:t(()=>[e(x,null,{default:t(()=>[...o[3]||(o[3]=[w("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(C),e(l,null,{default:t(()=>[e(i,null,{default:t(()=>[w(" 판매조회 : "+m(d.no),1)]),_:1})]),_:1}),e(l,null,{default:t(()=>[e(L,{headers:v,items:_.value,density:"compact","fixed-header":"",height:"300px",class:"custom-table"},{"item.qty":t(({item:y})=>[p("div",K,m(D(P)(y.qty)),1)]),_:1},8,["items"])]),_:1}),e(c,null,{default:t(()=>[e(g,{class:"d-flex justify-end"},{default:t(()=>[e(h,{text:"닫기",variant:"tonal",class:"mb-4 mr-4",onClick:o[1]||(o[1]=y=>u("close-dialog"))})]),_:1})]),_:1})]),_:1})],64)}}},Z=["onClick"],ee=["onClick"],oe={__name:"ShipmentList",setup(T){let b=r(""),u=r("");const _=z(),d=r(!1),v=r(!1),k=r(""),N=r([]),o=H({itemName:"",managerName:"",managerId:"",customerName:"",customerCd:""}),S=r([{title:"일자-No.",key:"shipmentDateSeq",align:"center",width:"120px"},{title:"품목명",key:"itemName",align:"start",width:"350px"},{title:"거래처명",key:"customerName",align:"start",width:"200px"},{title:"담당자명",key:"managerName",align:"center",width:"90px"},{title:"수량합계",key:"totQty",align:"end",width:"100px"},{title:"출하예정일",key:"dueDate",align:"center",width:"100px"},{title:"출고시간",key:"releaseTiem",align:"center",width:"100px"},{title:"창고명",key:"descStorageName",align:"center",width:"100px"},{title:"인쇄",key:"printYn",align:"center",width:"100px"},{title:"판매",key:"shipmentId",align:"center",width:"100px"}]),C=(i,l)=>{u.value=i.shipmentId,b.value=i.shipmentDateSeq,d.value=!0},x=(i,l)=>{W(i.shipmentId)?_.push({name:"ShipmentReg"}):_.push({name:"ShipmentDetail",params:{id:i.shipmentId}})},h=async()=>{try{v.value=!0;const i={...o};N.value=await E.getShipmentList(i)}catch{}finally{v.value=!1}};B(async()=>{h()});const q=()=>{J(S,N.value,"출하지시서_목록")};return(i,l)=>{const L=a("v-breadcrumbs"),g=a("v-text-field"),c=a("v-btn"),f=a("v-col"),y=a("v-form"),$=a("v-row"),U=a("v-card-text"),Y=a("v-card"),M=a("v-spacer"),Q=a("v-data-table"),R=a("v-dialog");return I(),V(A,null,[e(L,{items:["MES","영업관리","출하지시서관리"],class:"custom-breadcrumbs"}),e(Y,{class:"pa-1",style:{height:"60px"}},{default:t(()=>[e(U,null,{default:t(()=>[e($,null,{default:t(()=>[e(y,{ref_key:"srhForm",ref:k,onSubmit:G(h,["prevent"])},{default:t(()=>[e(f,{class:"d-flex flex-row ga-3"},{default:t(()=>[e(g,{modelValue:o.itemName,"onUpdate:modelValue":l[0]||(l[0]=n=>o.itemName=n),dense:"",density:"compact",label:"품목명",placeholder:"품목명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(g,{modelValue:o.managerName,"onUpdate:modelValue":l[1]||(l[1]=n=>o.managerName=n),dense:"",density:"compact",label:"담당자명",placeholder:"담당자명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(g,{modelValue:o.customerName,"onUpdate:modelValue":l[2]||(l[2]=n=>o.customerName=n),dense:"",density:"compact",label:"거래처명",placeholder:"거래처명을 입력해주세요",variant:"underlined",style:{width:"150px"}},null,8,["modelValue"]),e(c,{text:"조회",color:"brown-lighten-4",type:"submit"}),e(c,{text:"초기화",onClick:l[3]||(l[3]=n=>k.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(M),e($,null,{default:t(()=>[e(f,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:t(()=>[e(c,{color:"brown-lighten-4",text:"신규",onClick:x}),e(c,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:q})]),_:1})]),_:1}),e($,null,{default:t(()=>[e(f,{class:"pa-0"},{default:t(()=>[e(Q,{headers:S.value,items:N.value,loading:v.value,"items-per-page":15,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요",density:"compact","fixed-header":"",height:"690px","return-object":""},{headers:t(({columns:n})=>[p("tr",null,[(I(!0),V(A,null,O(n,s=>(I(),V("th",{key:s.key,class:"custom-header",style:j([{height:"40px"},{textAlign:"center"}])},m(s.title),1))),128))])]),"item.shipmentDateSeq":t(({item:n,index:s})=>[p("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:F=>x(n,s)},m(n.shipmentDateSeq),9,Z)]),"item.itemName":t(({item:n,index:s})=>[p("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:F=>x(n,s)},m(n.itemName),9,ee)]),"item.totQty":t(({item:n})=>[w(m(D(P)(n.totQty)),1)]),"item.statusType":t(({item:n,index:s})=>[w(m(n.statusType==="ING"?"진행중":"종료"),1)]),"item.printYn":t(({item:n,index:s})=>[p("p",{style:j([{padding:"4px","text-align":"center",cursor:"pointer"},{backgroundColor:n.printYn==="Y"?"#FFAB91":"transparent"}]),onClick:l[4]||(l[4]=(...F)=>i.onPrint&&i.onPrint(...F))},"인쇄 ",4)]),"item.shipmentId":t(({item:n,index:s})=>[p("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:C}," 판매 ")]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),e(R,{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=n=>d.value=n),width:"900px",height:"400px",persistent:""},{default:t(()=>[e(X,{id:D(u),no:D(b),onCloseDialog:l[5]||(l[5]=n=>d.value=!1)},null,8,["id","no"])]),_:1},8,["modelValue"])],64)}}};export{oe as default};
