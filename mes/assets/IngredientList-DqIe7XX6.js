import{_ as K,a as Q,u as q,r as u,k as G,m as J,A as O,d as a,b as P,o as g,w as t,g as e,h as k,t as A,f as L,c as w,F as $,n as R,j as W,H as X}from"./index-CqvXi43z.js";import{A as T}from"./apiLab-CE06DcsD.js";import{e as Y}from"./exportToExcel-Kkbtezxo.js";import{i as Z}from"./common-0uT6ImM2.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const ee={class:"d-flex flex-wrap"},te={class:"d-flex flex-wrap"},le={__name:"IngredientRegPop",props:{title:{type:String},id:{type:String},mode:{type:String}},emits:["saved","close-dialog"],setup(z,{emit:E}){const{userId:j}=Q(),{vError:C}=q(),x=u([]),y=u([]),b=u([]),v=u([]),o=G({krIngredientName:"",enIngredientName:"",cnIngredientName:"",casNo:"",functionCd:"",etc:""}),_=z,r=E,I=async()=>{const m={...o,limitCountries:b.value,bannedCountries:v.value,userId:j};try{const n=await T.saveIngredientInfo(m);r("saved",n),r("close-dialog")}catch(n){C(n.message)}};return J(async()=>{if(x.value=await O.getCodeList("fn_Cd"),y.value=await O.getCodeList("country_cd"),_.mode==="U"){const m=await T.getIngredientInfo(_.id);Object.assign(o,m),b.value=m.limitCountries,v.value=m.bannedCountries}}),(m,n)=>{const N=a("v-toolbar-title"),h=a("v-spacer"),c=a("v-icon"),d=a("v-btn"),B=a("v-toolbar"),s=a("v-col"),i=a("v-row"),p=a("v-text-field"),D=a("v-select"),V=a("v-card-subtitle"),S=a("v-checkbox"),U=a("v-card-text"),F=a("v-card-actions"),M=a("v-form"),H=a("v-card");return g(),P(H,{class:"no-scroll"},{default:t(()=>[e(B,{height:"40",class:"d-flex align-center justify-space-between px-2 toolbar-Head"},{default:t(()=>[e(N,null,{default:t(()=>[k(A(_.title),1)]),_:1}),e(h),e(d,{icon:"",onClick:n[0]||(n[0]=l=>r("close-dialog"))},{default:t(()=>[e(c,null,{default:t(()=>n[10]||(n[10]=[k("mdi-close")])),_:1})]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(M,{ref:"vform"},{default:t(()=>[e(i,null,{default:t(()=>[e(s,{class:"mt-3"},{default:t(()=>[k(" - 성분코드 : "+A(_.id),1)]),_:1})]),_:1}),e(i,{class:"mr-1"},{default:t(()=>[e(s,{class:"mt-2 ml-3",style:{padding:"0px"}},{default:t(()=>[e(p,{modelValue:o.krIngredientName,"onUpdate:modelValue":n[1]||(n[1]=l=>o.krIngredientName=l),density:"compact",label:"국문 성분명",placeholder:"국문성분명을 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{class:"mr-1"},{default:t(()=>[e(s,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(p,{modelValue:o.enIngredientName,"onUpdate:modelValue":n[2]||(n[2]=l=>o.enIngredientName=l),density:"compact",label:"영문 성분명",placeholder:"영문성분명을 입력해주세요",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{class:"mr-1"},{default:t(()=>[e(s,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(p,{modelValue:o.cnIngredientName,"onUpdate:modelValue":n[3]||(n[3]=l=>o.cnIngredientName=l),label:"중문 성분명",placeholder:"중문성분명을 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{class:"mr-1"},{default:t(()=>[e(s,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(p,{modelValue:o.casNo,"onUpdate:modelValue":n[4]||(n[4]=l=>o.casNo=l),label:"CAS No.",placeholder:"CAS No를 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{class:"mr-1"},{default:t(()=>[e(s,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(D,{modelValue:o.functionCd,"onUpdate:modelValue":n[5]||(n[5]=l=>o.functionCd=l),label:"function",items:x.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(i,{class:"mr-1"},{default:t(()=>[e(s,{class:"ml-3",style:{padding:"0px"}},{default:t(()=>[e(p,{modelValue:o.etc,"onUpdate:modelValue":n[6]||(n[6]=l=>o.etc=l),label:"비고",placeholder:"비고를 입력해주세요",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(U,{style:{height:"60px"}},{default:t(()=>[e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[e(V,null,{default:t(()=>n[11]||(n[11]=[k(" -한도 국가")])),_:1}),L("div",ee,[(g(!0),w($,null,R(y.value,l=>(g(),P(S,{key:l.code,label:l.codeNm,value:l.code,class:"ml-1",density:"compact",modelValue:b.value,"onUpdate:modelValue":n[7]||(n[7]=f=>b.value=f)},null,8,["label","value","modelValue"]))),128))])]),_:1}),e(s,null,{default:t(()=>[e(V,null,{default:t(()=>n[12]||(n[12]=[k("-금지 국가")])),_:1}),L("div",te,[(g(!0),w($,null,R(y.value,l=>(g(),P(S,{key:l.code,label:l.codeNm,value:l.code,class:"ml-1",density:"compact",modelValue:v.value,"onUpdate:modelValue":n[8]||(n[8]=f=>v.value=f)},null,8,["label","value","modelValue"]))),128))])]),_:1})]),_:1})]),_:1}),e(h),e(F,null,{default:t(()=>[e(i,null,{default:t(()=>[e(s,{class:"d-flex justify-end align-center mt-8",style:{gap:"5px"}},{default:t(()=>[e(d,{color:"indigo-darken-4",text:"저장",variant:"tonal",depressed:"",onClick:I}),e(d,{text:"닫기",variant:"tonal",onClick:n[9]||(n[9]=l=>r("close-dialog"))})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},ne=K(le,[["__scopeId","data-v-c23b95ee"]]),ae=["onClick"],me={__name:"IngredientList",setup(z){const{vError:E,vSuccess:j}=q(),C=u(""),x=u(!1),y=u(!1),b=u(null),v=u([]),o=u(""),_=u(""),r=G({ingredientName:"",functionNm:"",regName:""}),I=u([{title:"성분코드",key:"ingredientCode",align:"center",width:"70px"},{title:"국문성분명",key:"krIngredientName",align:"start",width:"240px"},{title:"영문성분명",key:"enIngredientName",align:"start",width:"240px"},{title:"중문성분명",key:"cnIngredientName",align:"start",width:"250px"},{title:"CAS No",key:"casNo",align:"start",width:"150px"},{title:"function",key:"functionNm",align:"start",width:"150px"},{title:"등록자",key:"regName",align:"center",width:"70px"},{title:"수정자",key:"updName",align:"center",width:"70px"},{title:"수정일자",key:"updDate",align:"center",width:"100px"},{title:"비고",key:"etc",align:"start",width:"110px"}]),m=(c,d)=>{Z(c.ingredientCode)?(o.value="N",_.value="성분 등록"):(o.value="U",_.value="성분 상세정보",C.value=c.ingredientCode),x.value=!0},n=c=>{j(c),N()},N=async()=>{y.value=!0;try{const c={...r};v.value=await T.getIngredientList(c)}catch(c){E("조회 중 오류가 발생했습니다."+c)}finally{y.value=!1}};J(async()=>{N()});const h=()=>{Y(I,v.value,"성분_목록")};return(c,d)=>{const B=a("v-breadcrumbs"),s=a("v-text-field"),i=a("v-btn"),p=a("v-col"),D=a("v-form"),V=a("v-row"),S=a("v-card-text"),U=a("v-card"),F=a("v-spacer"),M=a("v-data-table"),H=a("v-dialog");return g(),w($,null,[e(B,{items:["MES","연구관리","성분정보"],class:"custom-breadcrumbs"}),e(U,{class:"pa-1",style:{height:"60px"}},{default:t(()=>[e(S,null,{default:t(()=>[e(V,null,{default:t(()=>[e(D,{ref_key:"srhForm",ref:b,onSubmit:W(N,["prevent"])},{default:t(()=>[e(p,{class:"d-flex flex-row ga-3"},{default:t(()=>[e(s,{modelValue:r.ingredientName,"onUpdate:modelValue":d[0]||(d[0]=l=>r.ingredientName=l),density:"compact",label:"성분명",placeholder:"성분명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(s,{modelValue:r.functionNm,"onUpdate:modelValue":d[1]||(d[1]=l=>r.functionNm=l),density:"compact",label:"function명",placeholder:"function명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(s,{modelValue:r.regName,"onUpdate:modelValue":d[2]||(d[2]=l=>r.regName=l),density:"compact",label:"등록자",placeholder:"등록자명을 입력해주세요",variant:"underlined",style:{width:"150px"}},null,8,["modelValue"]),e(i,{text:"조회",color:"brown-lighten-4",type:"submit"}),e(i,{text:"초기화",onClick:d[3]||(d[3]=l=>b.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(F),e(V,null,{default:t(()=>[e(p,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:t(()=>[e(i,{color:"brown-lighten-4",text:"신규",onClick:m}),e(i,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:h})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(p,{class:"pa-0"},{default:t(()=>[e(M,{headers:I.value,items:v.value,loading:y.value,"items-per-page":15,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요",density:"compact","fixed-header":"",height:"690px"},{headers:t(({columns:l})=>[L("tr",null,[(g(!0),w($,null,R(l,f=>(g(),w("th",{key:f.key,class:"custom-header",style:X([{height:"40px"},{textAlign:"center"}])},A(f.title),1))),128))])]),"item.ingredientCode":t(({item:l,index:f})=>[L("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:oe=>m(l,f)},A(l.ingredientCode),9,ae)]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),e(H,{modelValue:x.value,"onUpdate:modelValue":d[5]||(d[5]=l=>x.value=l),width:"800px",height:"600px",persistent:""},{default:t(()=>[e(ne,{title:_.value,mode:o.value,id:C.value,onSaved:n,onCloseDialog:d[4]||(d[4]=l=>x.value=!1)},null,8,["title","mode","id"])]),_:1},8,["modelValue"])],64)}}};export{me as default};
