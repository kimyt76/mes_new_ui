import{a as E,r as f,m as T,n as I,c as w,g as a,d as l,w as t,F as P,o as k,j as M,f as p,E as C,h as d,t as i,i as c,v as Q}from"./index-Be8ZRtMe.js";import{A as U}from"./apiOrders-BV9f5KE8.js";import{f as m}from"./common-IBXzpVzr.js";import"./apiCommon-B9fwy2tv.js";import"./format-CBpsKyOP.js";const Y=["onClick"],$=["onClick"],J={__name:"ProgressList",setup(j){const{userId:V}=E(),u=f([]),y=f(!1),s=T({itemName:"",managerName:"",customerName:"",userId:V}),b=f([{title:"품목코드",key:"itemCd",align:"center",width:"110px"},{title:"품목명",key:"itemName",align:"start",width:"400px"},{title:"고객사",key:"customerName",align:"start",width:"200px"},{title:"수주일",key:"contractDate",align:"center",width:"120px"},{title:"판매일",key:"saleDate",align:"center",width:"120px"},{title:"출하일",key:"shipmentDate",align:"center",width:"120px"},{title:"총수량",key:"totQty",align:"end",width:"120px"},{title:"수량",key:"qty",align:"end",width:"120px"},{title:"단가",key:"unitPrice",align:"end",width:"120px"},{title:"공급가액",key:"supplyPrice",align:"end",width:"120px"},{title:"부가세",key:"vatPrice",align:"end",width:"120px"},{title:"합계금액",key:"totPrice",align:"end",width:"120px"},{title:"담당자",key:"managerName",align:"center",width:"90px"}]),N=async()=>{try{y.value=!0;const o={...s};u.value=await U.getProgressList(o)}catch{}finally{y.value=!1}};I(async()=>{N()});const S=()=>{exportToExcel(b,u.value,"수주진행현황_목록")};return(o,n)=>{const D=l("v-breadcrumbs"),x=l("v-text-field"),g=l("v-btn"),v=l("v-col"),F=l("v-form"),_=l("v-row"),q=l("v-card-text"),A=l("v-card"),L=l("v-spacer"),B=l("v-data-table");return k(),w(P,null,[a(D,{items:["MES","영업관리","진행현황"],class:"custom-breadcrumbs"}),a(A,{class:"pa-1",style:{height:"60px"}},{default:t(()=>[a(q,null,{default:t(()=>[a(_,null,{default:t(()=>[a(F,{ref:"srhForm",onSubmit:M(N,["prevent"])},{default:t(()=>[a(v,{class:"d-flex flex-row ga-3"},{default:t(()=>[a(x,{modelValue:s.itemName,"onUpdate:modelValue":n[0]||(n[0]=e=>s.itemName=e),density:"compact",label:"품목명",variant:"underlined",placeholder:"품목명을 입력해주세요",style:{width:"180px"}},null,8,["modelValue"]),a(x,{modelValue:s.managerName,"onUpdate:modelValue":n[1]||(n[1]=e=>s.managerName=e),density:"compact",label:"담당자",placeholder:"담당자를 입력해주세요",variant:"underlined",style:{width:"150px"}},null,8,["modelValue"]),a(x,{modelValue:s.customerName,"onUpdate:modelValue":n[2]||(n[2]=e=>s.customerName=e),density:"compact",label:"거래처명",placeholder:"거래처명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),a(g,{text:"조회",color:"brown-lighten-4",type:"submit"}),a(g,{text:"초기화",onClick:n[3]||(n[3]=e=>o.srhForm.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),a(L),a(_,null,{default:t(()=>[a(v,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:t(()=>[a(g,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:S})]),_:1})]),_:1}),a(_,null,{default:t(()=>[a(v,{class:"pa-0"},{default:t(()=>[a(B,{headers:b.value,items:u.value,loading:y.value,"items-per-page":15,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요",density:"compact","fixed-header":"",height:"690px",class:"table-wrapper"},{headers:t(({columns:e})=>[p("tr",null,[(k(!0),w(P,null,Q(e,r=>(k(),w("th",{key:r.key,class:"custom-header",style:C([{height:"40px"},{textAlign:"center"}])},i(r.title),1))),128))])]),"item.contractDateSeq":t(({item:e,index:r})=>[p("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:h=>o.selectRowClick(e,r)},i(e.contractDateSeq),9,Y)]),"item.itemName":t(({item:e,index:r})=>[p("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:h=>o.selectRowClick(e,r)},i(e.itemName),9,$)]),"item.totQty":t(({item:e})=>[d(i(c(m)(e.totQty)),1)]),"item.qty":t(({item:e})=>[d(i(c(m)(e.qty)),1)]),"item.unitPrice":t(({item:e})=>[d(i(c(m)(e.unitPrice)),1)]),"item.supplyPrice":t(({item:e})=>[d(i(c(m)(e.supplyPrice)),1)]),"item.vatPrice":t(({item:e})=>[d(i(c(m)(e.vatPrice)),1)]),"item.totPrice":t(({item:e})=>[d(i(c(m)(e.totPrice)),1)]),"item.statusType":t(({item:e,index:r})=>[d(i(e.statusType==="ING"?"진행중":"종료"),1)]),"item.printYn":t(({item:e,index:r})=>[p("p",{style:C([{padding:"4px","text-align":"center",cursor:"pointer"},{backgroundColor:e.printYn==="Y"?"#FFAB91":"transparent"}]),onClick:n[4]||(n[4]=(...h)=>o.onPrint&&o.onPrint(...h))},"인쇄 ",4)]),_:1},8,["headers","items","loading"])]),_:1})]),_:1})],64)}}};export{J as default};
