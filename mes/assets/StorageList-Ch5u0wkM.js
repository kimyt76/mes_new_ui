import{_ as J,u as O,a as K,r as u,k as Q,q as Z,m as W,A as T,d as a,b as H,o as C,w as t,g as e,f as R,c as L,F as q,n as X,j as ee,h as te,t as M}from"./index-WOYElqRf.js";import{A as z}from"./apiBase-BxtsCvh9.js";import{e as oe}from"./exportToExcel-Kkbtezxo.js";import{C as ae}from"./CustomerListPop-DY0fIeo2.js";import"./_commonjsHelpers-CZnAS8i4.js";const le={__name:"StorageRegPop",props:{title:{type:String},id:{type:String},mode:{type:String}},emits:"saved",setup(G,{emit:E}){const{vError:A,vInfo:f}=O(),{userId:b}=K(),c=u(!0),p=u(!0),m=u(!1),v=G,_=E,V=u([]),N=u([]),o=Q({storageCd:"",storageName:"",prodProcessCd:"",outCustomerName:"",outCustomerCd:"",userId:b});Z(()=>o.storageType,(r,l)=>{if(r==="S")c.value=!0,p.value=!0;else if(r==="F")c.value=!1,p.value=!0;else if(r==="O"){if(c.value=!1,p.value=!1,l===void 0)return;f(`공장(외주비관리)는 외주비 증빙 수령 시 사용합니다. 
 생산입고에서 외주비 관리를 하지 않을 경우 공장을 선택해 등록하시기 바랍니다.`)}});const S=r=>{o.outCustomerCd=r.customerCd,o.outCustomerName=r.customerName},h=async()=>{try{const r={...o},l=await z.saveStorageInfo(r);_("saved",l),_("close-dialog")}catch(r){A(r)}},w=()=>{m.value=!0};return W(async()=>{if(V.value=await T.getCodeList("storage_type"),N.value=await T.getCodeList("prod_process"),v.mode==="U"){const r=await z.getStorageInfo(v.id);Object.assign(o,r)}}),(r,l)=>{const B=a("v-card-item"),i=a("v-text-field"),s=a("v-col"),g=a("v-row"),P=a("v-radio"),U=a("v-radio-group"),y=a("v-select"),x=a("v-btn"),D=a("v-card-actions"),k=a("v-form"),F=a("v-card-text"),$=a("v-dialog"),j=a("v-card");return C(),H(j,null,{default:t(()=>[e(B,{title:v.title},null,8,["title"]),e(F,null,{default:t(()=>[e(k,{ref:"vform"},{default:t(()=>[e(g,{class:"mt-3"},{default:t(()=>[e(s,{cols:"3"},{default:t(()=>[e(i,{modelValue:o.storageCd,"onUpdate:modelValue":l[0]||(l[0]=n=>o.storageCd=n),label:"창고코드",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,{cols:"9"},{default:t(()=>[e(i,{modelValue:o.storageName,"onUpdate:modelValue":l[1]||(l[1]=n=>o.storageName=n),label:"창고명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(s,{class:"d-flex align-center gap-4"},{default:t(()=>[l[8]||(l[8]=R("div",{class:"font-weight-medium text-grey-darken-1"},"구분 :    ",-1)),e(U,{modelValue:o.storageType,"onUpdate:modelValue":l[2]||(l[2]=n=>o.storageType=n),inline:"",class:"d-flex"},{default:t(()=>[(C(!0),L(q,null,X(V.value,(n,Y)=>(C(),H(P,{key:Y,label:n.codeNm,value:n.code,class:"me-4"},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(s,null,{default:t(()=>[e(y,{modelValue:o.prodProcessCd,"onUpdate:modelValue":l[3]||(l[3]=n=>o.prodProcessCd=n),label:"생산공정",items:N.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",disabled:c.value},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(s,null,{default:t(()=>[e(i,{modelValue:o.outCustomerName,"onUpdate:modelValue":l[4]||(l[4]=n=>o.outCustomerName=n),label:"외주거래처명",variant:"underlined",density:"compact","append-inner-icon":"mdi-magnify","onClick:appendInner":w,disabled:p.value},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(s,{class:"d-flex justify-end align-center mr-2"},{default:t(()=>[e(D,null,{default:t(()=>[e(x,{color:"indigo-darken-4",text:"저장",variant:"tonal",depressed:"",onClick:h}),e(x,{text:"닫기",variant:"tonal",onClick:l[5]||(l[5]=n=>_("close-dialog"))})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e($,{modelValue:m.value,"onUpdate:modelValue":l[7]||(l[7]=n=>m.value=n),"max-width":"800px",height:"800px",persistent:""},{default:t(()=>[e(ae,{onSelected:S,onCloseDialog:l[6]||(l[6]=n=>m.value=!1)})]),_:1},8,["modelValue"])]),_:1})}}},se=J(le,[["__scopeId","data-v-a2b5a3c0"]]),ne=["onClick"],de={__name:"StorageList",setup(G){const{vError:E}=O(),{userId:A}=K(),f=u(!1),b=u(!1),c=u(""),p=u("N"),m=u(""),v=u(""),_=u([]),V=u([]),N=u([]),o=Q({storageName:"",outCustomerName:"",storageType:"",prodProcessCd:"",userId:A}),S=u([{title:"창고코드",key:"storageCd",align:"center",width:"60px"},{title:"창고명",key:"storageName",align:"start",width:"250px"},{title:"구분",key:"storageTypeName",align:"center",width:"120px"},{title:"생산공정명",key:"prodProcessName",align:"center",width:"150px"},{title:"외주거래처명",key:"outCustomerName",align:"start",width:"250px"},{title:"사용",key:"useYn",align:"center",width:"60px"},{title:"추가사업장명",key:"companyName",align:"center",width:"120px"}]),h=i=>{console.log("val",i.storageCd),i==="N"?(m.value="창고등록",v.value=""):(p.value="U",m.value="창고상세정보",v.value=i.storageCd),f.value=!0};W(async()=>{V.value=await T.getCodeList("storage_type"),N.value=await T.getCodeList("prod_process"),w()});const w=async()=>{b.value=!0;try{const i={...o};_.value=await z.getStorageList(i)}catch(i){E(i)}finally{b.value=!1}},{vSuccess:r}=O(),l=i=>{r(i),w()},B=()=>{oe(S,_.value,"창고정보_목록")};return(i,s)=>{const g=a("v-breadcrumbs"),P=a("v-text-field"),U=a("v-select"),y=a("v-btn"),x=a("v-col"),D=a("v-form"),k=a("v-row"),F=a("v-card-text"),$=a("v-card"),j=a("v-spacer"),n=a("v-data-table"),Y=a("v-dialog");return C(),L(q,null,[e(g,{items:["MES","기본관리","창고관리"],class:"custom-breadcrumbs"}),e($,{class:"pa-1",style:{height:"60px"}},{default:t(()=>[e(F,null,{default:t(()=>[e(k,null,{default:t(()=>[e(D,{ref_key:"srhForm",ref:c,onSubmit:ee(w,["prevent"])},{default:t(()=>[e(x,{class:"d-flex ga-4"},{default:t(()=>[e(P,{modelValue:o.storageName,"onUpdate:modelValue":s[0]||(s[0]=d=>o.storageName=d),density:"compact",label:"창고명",placeholder:"창고명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(P,{modelValue:o.outCustomerName,"onUpdate:modelValue":s[1]||(s[1]=d=>o.outCustomerName=d),density:"compact",label:"외주거래처명",placeholder:"외주거래처명을 입력해주세요",variant:"underlined",style:{width:"150px"}},null,8,["modelValue"]),e(U,{modelValue:o.storageType,"onUpdate:modelValue":s[2]||(s[2]=d=>o.storageType=d),label:"창고구분",items:V.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue","items"]),e(U,{modelValue:o.prodProcessCd,"onUpdate:modelValue":s[3]||(s[3]=d=>o.prodProcessCd=d),label:"생산공정",items:N.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue","items"]),e(y,{color:"#EFEBE9",type:"submit",text:"조회"}),e(y,{class:"mr-2",text:"초기화",onClick:s[4]||(s[4]=d=>c.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(j),e(k,null,{default:t(()=>[e(x,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:t(()=>[e(y,{color:"brown-lighten-4",text:"신규",onClick:h}),e(y,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:B})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(x,{class:"pa-0"},{default:t(()=>[e(n,{headers:S.value,items:_.value,loading:b.value,"items-per-page":15,density:"compact","fixed-header":"",height:"650px","return-object":""},{headers:t(({columns:d})=>[R("tr",null,[(C(!0),L(q,null,X(d,I=>(C(),L("th",{key:I.key,class:"custom-header pa-1"},M(I.title),1))),128))])]),"item.storageName":t(({item:d,index:I})=>[R("div",{style:{cursor:"pointer","text-decoration":"underline"},onClick:re=>h(d,I)},M(d.storageName),9,ne)]),"item.useYn":t(({item:d})=>[te(M(d.useYn==="Y"?"사용":"미사용"),1)]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),e(Y,{modelValue:f.value,"onUpdate:modelValue":s[6]||(s[6]=d=>f.value=d),height:"450",width:"700",persistent:""},{default:t(()=>[e(se,{id:v.value,mode:p.value,title:m.value,onSaved:l,onCloseDialog:s[5]||(s[5]=d=>f.value=!1)},null,8,["id","mode","title"])]),_:1},8,["modelValue"])],64)}}},ve=J(de,[["__scopeId","data-v-4fce89a9"]]);export{ve as default};
