import{a as A,s as R}from"./index-Z2YNGKhZ.js";import{s as z}from"./index-D49h5Cbk.js";import{V as O,L as G,A as v,W as H,H as W,i as U,o as V,l as d,h as o,e as L,g as $,p as l,G as D,K as J,U as K,P as q,F as Q,a0 as b,t as Y}from"./index-BCdxernO.js";import{s as S}from"./index-CKfU0QJd.js";import{s as B}from"./index-DhHuXiFi.js";import{s as E}from"./index-WWuz9eST.js";import{s as X}from"./index-BE87lW_G.js";import{A as x}from"./apiSystem-BBpYMteA.js";import{i as M}from"./common-Ctgf_4Dl.js";import{e as Z}from"./exportToExcel-BIsrPQTg.js";import{s as ee}from"./index-CEOpAmiF.js";import{s as le}from"./index-CLRf2YcQ.js";import{s as oe}from"./index-BO24il-T.js";import"./index-BGn1OEmN.js";const te={class:"grid mb-3"},se={class:"col-8 flex gap-2"},ne={class:"grid mb-3"},ae={class:"col-4"},de={class:"col-4"},ie={class:"col-4"},re={class:"grid mb-3"},ue={class:"col-4"},me={class:"col-4"},pe={class:"col-4"},ce={key:0,class:"grid mb-3"},fe={class:"col-4"},be={class:"col-4"},ve={class:"grid mb-3"},we={class:"col-12"},ye={class:"flex gap-2 justify-end pt-3"},_e={__name:"UserDtlPop",setup(T){const _=O("dialogRef"),{vError:I,vSuccess:w,vInfo:m,vWarning:N}=G(),f=v(!1),g=v(!1),C=[{codeNm:"재직",code:"Y"},{codeNm:"퇴직",code:"N"}],t=H({userId:null,deptNm:null,jobPosition:null,memberNm:null,phone:null,email:null,password:null,confirmPassword:null,useYn:"",etc:null}),k=async()=>{if(g.value=!0,!!p())try{const n={...t},e=await x.updateUserInfo(n);w(e.data),y()}catch(n){I(n.response.data.message)}};W(async()=>{if(!M(_.value.data)){const n=await x.getUserInfo(_.value.data);Object.assign(t,n),f.value=!0}});const p=()=>{const n=[];return t.userId||n.push("사용자 ID를 입력하세요."),t.memberNm||n.push("사용자명을 입력하세요."),f.value||(t.password?t.password.length<3&&n.push("패스워드는 3자리 이상이어야 합니다."):n.push("패스워드를 입력하세요."),t.password!==t.confirmPassword&&n.push("패스워드와 패스워드 확인이 일치하지 않습니다.")),n.length>0?(N(n.join(`
`)),!1):!0},s=()=>{x.passwordInit(t.userId).then(n=>{w(n.data)})},h=()=>{x.userCheck(t.userId).then(n=>{m(n.data)})},y=()=>{_.value.close()};return(n,e)=>{const c=E,u=B,r=D,j=S,i=oe,P=le,F=ee;return V(),U(F,{style:{width:"50rem",height:"27rem"}},{content:d(()=>[o("div",te,[o("div",se,[l(u,{variant:"on"},{default:d(()=>[l(c,{modelValue:t.userId,"onUpdate:modelValue":e[0]||(e[0]=a=>t.userId=a),inputId:"userId",class:"w-full",readonly:f.value},null,8,["modelValue","readonly"]),e[10]||(e[10]=o("label",{for:"userId",id:"lblUserId"},"사용자 ID",-1))]),_:1}),f.value?$("",!0):(V(),U(r,{key:0,label:"중복체크",class:"btn-check",onClick:h}))])]),o("div",ne,[o("div",ae,[l(u,{variant:"on"},{default:d(()=>[l(c,{modelValue:t.memberNm,"onUpdate:modelValue":e[1]||(e[1]=a=>t.memberNm=a),inputId:"memberNm",class:"w-full",readonly:!f.value},null,8,["modelValue","readonly"]),e[11]||(e[11]=o("label",{for:"memberNm",id:"lblMemberNm"},"사용자이름",-1))]),_:1})]),o("div",de,[l(u,{variant:"on"},{default:d(()=>[l(c,{modelValue:t.jobPosition,"onUpdate:modelValue":e[2]||(e[2]=a=>t.jobPosition=a),inputId:"jobPosition",class:"w-full"},null,8,["modelValue"]),e[12]||(e[12]=o("label",{for:"jobPosition",id:"lblJobPosition"},"직급",-1))]),_:1})]),o("div",ie,[l(u,{variant:"on"},{default:d(()=>[l(c,{modelValue:t.deptNm,"onUpdate:modelValue":e[3]||(e[3]=a=>t.deptNm=a),inputId:"deptNm",class:"w-full"},null,8,["modelValue"]),e[13]||(e[13]=o("label",{for:"deptNm",id:"lblDeptNm"},"부서",-1))]),_:1})])]),o("div",re,[o("div",ue,[l(u,{variant:"on"},{default:d(()=>[l(c,{modelValue:t.phone,"onUpdate:modelValue":e[4]||(e[4]=a=>t.phone=a),inputId:"phone",class:"w-full"},null,8,["modelValue"]),e[14]||(e[14]=o("label",{for:"phone",id:"lblPhone"},"연락처",-1))]),_:1})]),o("div",me,[l(u,{variant:"on"},{default:d(()=>[l(c,{modelValue:t.email,"onUpdate:modelValue":e[5]||(e[5]=a=>t.email=a),inputId:"email",class:"w-full"},null,8,["modelValue"]),e[15]||(e[15]=o("label",{for:"email",id:"lblEmail"},"이메일",-1))]),_:1})]),o("div",pe,[l(u,{variant:"on"},{default:d(()=>[l(j,{modelValue:t.useYn,"onUpdate:modelValue":e[6]||(e[6]=a=>t.useYn=a),options:C,optionLabel:"codeNm",optionValue:"code",class:"w-full",inputId:"useYn"},null,8,["modelValue"]),e[16]||(e[16]=o("label",{for:"useYn",id:"lblUseYn"},"재직여부",-1))]),_:1})])]),f.value?$("",!0):(V(),L("div",ce,[o("div",fe,[l(u,{variant:"on",class:"w-full"},{default:d(()=>[l(i,{modelValue:t.password,"onUpdate:modelValue":e[7]||(e[7]=a=>t.password=a),inputId:"password",toggleMask:"",feedback:!1,class:"w-full",inputClass:"w-full pr-8"},null,8,["modelValue"]),e[17]||(e[17]=o("label",{for:"password",id:"lblPassword"},"패스워드",-1))]),_:1})]),o("div",be,[l(u,{variant:"on",class:"w-full"},{default:d(()=>[l(i,{modelValue:t.confirmPassword,"onUpdate:modelValue":e[8]||(e[8]=a=>t.confirmPassword=a),inputId:"confirmPassword",toggleMask:"",feedback:!1,class:"w-full",inputClass:"w-full pr-8"},null,8,["modelValue"]),e[18]||(e[18]=o("label",{for:"confirmPassword",id:"lblConfirmPassword"}," 패스워드 확인 ",-1))]),_:1})])])),o("div",ve,[o("div",we,[l(u,{variant:"on"},{default:d(()=>[l(P,{modelValue:t.etc,"onUpdate:modelValue":e[9]||(e[9]=a=>t.etc=a),rows:"3",class:"w-full",style:{resize:"none"},inputId:"etc"},null,8,["modelValue"]),e[19]||(e[19]=o("label",{for:"etc",id:"lblEtc"},"비고",-1))]),_:1})])]),o("div",ye,[f.value?(V(),U(r,{key:0,label:"패스워드초기화",severity:"secondary",onClick:s})):$("",!0),l(r,{label:"저장",severity:"secondary",onClick:k}),l(r,{label:"닫기",onClick:y})])]),_:1})}}},ge={class:"flex flex-wrap items-center gap-2 w-full"},Ve={class:"flex items-center justify-end gap-2 mb-2"},xe=["onClick"],Ie=["onClick"],Ne={__name:"UserMgmtList",setup(T){const _=K(),I=v(null),w=v([]),m=H({memberNm:"",jobPosition:"",deptNm:"",useYn:""}),N=v([{codeNm:"재직",code:"Y"},{codeNm:"퇴직",code:"N"}]),f=async()=>{const p={...m};w.value=await x.getUserList(p)},g=p=>{let s="사용자 등록";M(p)||(s="사용자 상세"),_.open(_e,{props:{header:s,modal:!0,modal:!0,maximizable:!1,draggable:!0,style:{overflow:"hidden"},pt:{root:{style:{overflow:"hidden"}},content:{style:{overflow:"hidden"}}}},data:p})},C=v({icon:"pi pi-home"}),t=v([{label:"시스템관리"},{label:"사용자관리"},{label:"사용자목록"}]),k=()=>{var s;const p=((s=I.value)==null?void 0:s.columns)??[];if(!p.length){console.warn("No Columns Found");return}Z(w.value,"사용자 리스트",p)};return(p,s)=>{const h=X,y=E,n=B,e=S,c=D,u=z,r=R,j=A;return V(),L(Q,null,[l(h,{home:C.value,model:t.value},null,8,["home","model"]),o("form",{onSubmit:q(f,["prevent"]),class:"space-y-4"},[l(u,{class:"flex flex-wrap mt-2 mb-2 gap-1 w-full"},{start:d(()=>[o("div",ge,[l(n,{variant:"on"},{default:d(()=>[l(y,{modelValue:m.memberNm,"onUpdate:modelValue":s[0]||(s[0]=i=>m.memberNm=i),style:{width:"150px"}},null,8,["modelValue"]),s[5]||(s[5]=o("label",{for:"on_label"},"사용자 이름",-1))]),_:1}),l(n,{variant:"on"},{default:d(()=>[l(y,{modelValue:m.jobPosition,"onUpdate:modelValue":s[1]||(s[1]=i=>m.jobPosition=i),style:{width:"180px"}},null,8,["modelValue"]),s[6]||(s[6]=o("label",{for:"jobPosition"},"직급",-1))]),_:1}),l(n,{variant:"on"},{default:d(()=>[l(y,{modelValue:m.deptNm,"onUpdate:modelValue":s[2]||(s[2]=i=>m.deptNm=i),style:{width:"180px"}},null,8,["modelValue"]),s[7]||(s[7]=o("label",{for:"deptNm"},"부서",-1))]),_:1}),l(n,{variant:"on"},{default:d(()=>[l(e,{modelValue:m.useYn,"onUpdate:modelValue":s[3]||(s[3]=i=>m.useYn=i),options:N.value,optionLabel:"codeNm",optionValue:"code",style:{width:"150px"}},null,8,["modelValue","options"]),s[8]||(s[8]=o("label",{for:"on_label1"},"재직여부",-1))]),_:1}),l(c,{label:"검색",icon:"pi pi-search",type:"submit",class:"bg-blue-500 text-white hover:bg-blue-600"})])]),_:1})],32),o("div",Ve,[l(c,{label:"신규",icon:"pi pi-plus",severity:"secondary",onClick:s[4]||(s[4]=i=>g(""))}),l(c,{label:"엑셀",icon:"pi pi-file-excel",severity:"success",onClick:k})]),o("div",null,[l(j,{value:w.value,paginator:"",rows:20,rowsPerPageOptions:[20,30,40],scrollHeight:"650px",scrollable:"",showGridlines:"",class:"my-table"},{default:d(()=>[l(r,{field:"userId",header:"사용자ID",style:b([{"text-align":"center"},{width:"120px"}]),pt:{columnHeaderContent:"justify-center"}},{body:d(i=>[o("div",{onClick:P=>g(i.data.userId),class:"clickable-cell"},Y(i.data.userId),9,xe)]),_:1}),l(r,{field:"memberNm",header:"사용자명",style:b([{"text-align":"center"},{width:"130px"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}},{body:d(i=>[o("div",{onClick:P=>g(i.data.userId),class:"clickable-cell"},Y(i.data.memberNm),9,Ie)]),_:1}),l(r,{field:"deptNm",header:"부서",style:b([{"text-align":"center"},{width:"150px"}]),pt:{columnHeaderContent:"justify-center"}}),l(r,{field:"jobPosition",header:"직급",style:b([{"text-align":"center"},{width:"100px"}]),pt:{columnHeaderContent:"justify-center"}}),l(r,{field:"phone",header:"전화번호",style:b([{"text-align":"center"},{width:"160px"}]),pt:{columnHeaderContent:"justify-center"}}),l(r,{field:"email",header:"이메일",style:b([{"text-align":"center"},{width:"180px"}]),pt:{columnHeaderContent:"justify-center"}}),l(r,{field:"useYn",header:"재직여부",style:b([{"text-align":"center"},{width:"80px"}]),pt:{columnHeaderContent:"justify-center"}}),l(r,{field:"etc",header:"비고",style:b([{"text-align":"left"},{width:"200px"}]),pt:{columnHeaderContent:"justify-center"}})]),_:1},8,["value"])])],64)}}},Me=J(Ne,[["__scopeId","data-v-77bb3033"]]);export{Me as default};
