import{_ as ye,u as ve,a as fe,r as v,p as Ve,z as ge,k as we,q as xe,m as _e,A as D,c as be,f as c,g as e,d as r,w as n,F as Ne,e as he,o as E,j as Ce,i as B,b as Ue,s as Ie,h as M,B as f,C as V}from"./index-CSVU4KnH.js";import{A as L}from"./apiBase-CUE3DEwQ.js";import{i as x,e as _,g as F}from"./common-Vxxi2eVn.js";import{_ as ke}from"./UserListPop-Dvf9Erza.js";import"./format-CBpsKyOP.js";const Te=["id"],De=["onUpdate:modelValue"],Be=["onUpdate:modelValue"],Me=["onUpdate:modelValue"],Le=["onUpdate:modelValue"],Se=["onUpdate:modelValue"],Ae=["onUpdate:modelValue"],$e=["onUpdate:modelValue"],ze=["onUpdate:modelValue"],je=["onUpdate:modelValue"],He={__name:"ClientDetail",setup(Re){const{vError:Y,vSuccess:q,vInfo:b,vWarning:O}=ve(),{userId:W}=fe(),G=he(),J=Ve(),S=v([]),A=v([]),$=v([]),u=v([]),g=v([]),y=v([]),h=v(!1),N=v(!1),z=v(null),C=J.params.id,K=ge(()=>["MES","기본관리",x(C)?"고객사 신규":"고객사 상세"]),Q=[{title:"변경일.",key:"changeDate",align:"center",width:"100px"},{title:"변경내용.",key:"historyContents",align:"center",width:"500px"},{title:"-",key:"actions",align:"center",width:"10px"}],X=[{title:"주소.",key:"address",align:"center",width:"500px"},{title:"-",key:"actions",align:"center",width:"10px"}],Z=[{title:"부서",key:"deptName",align:"center",width:"150px"},{title:"이름",key:"managerName",align:"center",width:"80px"},{title:"직책",key:"jobPosition",align:"center",width:"80px"},{title:"연락처",key:"tel",align:"center",width:"100px"},{title:"직통번호",key:"directTel",align:"center",width:"100px"},{title:"이메일번호",key:"email",align:"center",width:"120px"},{title:"-",key:"actions",align:"center",width:"10px"}],a=we({clientId:"",businessNo:"",clientName:"",clientType:"",clientTypeName:"",tradeType:"",regDate:"",responSalesBiz:"",establishDate:"",president:"",businessType:"",businessItem:"",telNo:"",faxNo:"",homepage:"",addressId:"",managerId:"",paymentCondition:"",saleManagerId:"",saleManagerIdB:"",groupCd:"",groupName:"",groupsCd:"",groupsName:"",paymentCd:"",paymentName:"",useYn:"",saleManagerName:"",saleManagerNameB:"",userId:W}),ee=async()=>{if(x(a.clientName)){b("고객사명을 입력하세요.");return}if(x(a.businessNo)){b("사업자번호를 입력하세요.");return}const d={clientInfo:a,clientManagerList:u.value,clinetAddressList:g.value,clinetHistroryList:y.value};d.clientInfo.regDate=_(d.clientInfo.regDate),d.clientInfo.establishDate=_(d.clientInfo.establishDate);try{const l=await L.saveClientInfo(d);q(l),x(a.clientId)&&(a.clientId=l.clientId)}catch{Y(res.message)}};xe(()=>a.clientType,async d=>{a.clientType==="E"?h.value=!0:h.value=!1});const le=()=>{let d=u.value.length;u.value.push({id:d++,deptName:"",managerName:"",jobPosition:"",tel:"",directTel:"",email:""})},te=()=>{let d=g.value.length;g.value.push({id:d++,address:""})},ae=()=>{let d=y.value.length;y.value.push({id:d++,changeDate:"",historyContents:""})},ne=d=>{console.log("index",d),u.value.splice(d,1)},de=d=>{g.value.splice(d,1)},oe=d=>{y.value.splice(d,1)};_e(async()=>{if(S.value=await D.getCodeList("trade_type"),A.value=await D.getCodeList("client_type"),$.value=await D.getCodeList("respon_sales_biz"),!x(C)){const d=await L.getClientInfo(C);Object.assign(a,d.clientInfo),u.value=d.clientManagerList,y.value=d.clientHistoryList,g.value=d.clinetAddressList}});const j=d=>{z.value=d,N.value=!0},ie=d=>{z.value==="M"?(a.saleManagerId=d.userId,a.saleManagerName=d.memberNm):(a.saleManagerIdB=d.userId,a.saleManagerNameB=d.memberNm)},se=async()=>{if(x(a.businessNo))return b("사업자 번호를 입력하세요");const d=await L.getBusinessNoChecked(a.businessNo);if(console.log("checkVal",d),d==="Y"){b("등록 가능한 사업자 번호입니다.");return}else{O("등록된 사업자 번호입니다."),a.businessNo="";return}},H=d=>{console.log("index",d),d==="T"?a.telNo=F(a.telNo):a.faxNo=F(a.faxNo)},ue=()=>{G.push({name:"ClientList"})};return(d,l)=>{const me=r("v-breadcrumbs"),s=r("v-text-field"),w=r("v-btn"),o=r("v-col"),p=r("v-row"),R=r("v-date-input"),U=r("v-select"),I=r("v-card-title"),k=r("v-icon"),T=r("v-data-table-virtual"),P=r("v-card-text"),re=r("v-form"),pe=r("v-card"),ce=r("v-dialog");return E(),be(Ne,null,[c("div",{id:d.$attrs.id},null,8,Te),e(me,{items:K.value},null,8,["items"]),e(pe,null,{default:n(()=>[e(re,{onSubmit:Ce(ee,["prevent"])},{default:n(()=>[e(P,null,{default:n(()=>[e(p,null,{default:n(()=>[e(o,{class:"d-flex"},{default:n(()=>[e(s,{modelValue:a.businessNo,"onUpdate:modelValue":l[0]||(l[0]=t=>a.businessNo=t),label:"사업자번호",type:"number",variant:"underlined",density:"compact",style:{width:"200px"}},null,8,["modelValue"]),e(w,{text:"중복체크",color:"brown-lighten-4",density:"compact",onClick:se}),l[30]||(l[30]=c("span",null,"  번호만 입력하세요 ('-' 제외)",-1))]),_:1}),e(o),e(o)]),_:1}),e(p,null,{default:n(()=>[e(o,{col:"2"},{default:n(()=>[e(s,{modelValue:a.clientName,"onUpdate:modelValue":l[1]||(l[1]=t=>a.clientName=t),label:"고객사명(상호)",variant:"underlined",density:"compact",style:{width:"780px"}},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(R,{modelValue:a.regDate,"onUpdate:modelValue":l[2]||(l[2]=t=>a.regDate=t),label:"등록일자","display-format":B(_),density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","display-format"])]),_:1}),e(o,null,{default:n(()=>[e(R,{modelValue:a.establishDate,"onUpdate:modelValue":l[3]||(l[3]=t=>a.establishDate=t),label:"설립일자","display-format":B(_),density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","display-format"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(o,null,{default:n(()=>[e(U,{modelValue:a.clientType,"onUpdate:modelValue":l[4]||(l[4]=t=>a.clientType=t),items:A.value,"item-title":"codeNm","item-value":"code",label:"사업자구분",density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","items"])]),_:1}),e(o,null,{default:n(()=>[h.value?(E(),Ue(s,{key:0,modelValue:a.clientTypeName,"onUpdate:modelValue":l[5]||(l[5]=t=>a.clientTypeName=t),label:"기타",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])):Ie("",!0)]),_:1}),e(o,null,{default:n(()=>[e(U,{modelValue:a.tradeType,"onUpdate:modelValue":l[6]||(l[6]=t=>a.tradeType=t),items:S.value,"item-title":"codeNm","item-value":"code",label:"거래구분",density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","items"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.firstTradeDate,"onUpdate:modelValue":l[7]||(l[7]=t=>a.firstTradeDate=t),label:"최초거래일자","display-format":B(_),density:"compact",variant:"underlined",style:{width:"300px"},readonly:""},null,8,["modelValue","display-format"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(o,null,{default:n(()=>[e(s,{modelValue:a.president,"onUpdate:modelValue":l[8]||(l[8]=t=>a.president=t),label:"대표자명",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.businessType,"onUpdate:modelValue":l[9]||(l[9]=t=>a.businessType=t),label:"업태",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.businessItem,"onUpdate:modelValue":l[10]||(l[10]=t=>a.businessItem=t),label:"종목",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.paymentCondition,"onUpdate:modelValue":l[11]||(l[11]=t=>a.paymentCondition=t),label:"결제조건",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(o,null,{default:n(()=>[e(s,{modelValue:a.telNo,"onUpdate:modelValue":l[12]||(l[12]=t=>a.telNo=t),label:"대표 전화",variant:"underlined",density:"compact",style:{width:"300px"},onBlur:l[13]||(l[13]=t=>H("T"))},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.faxNo,"onUpdate:modelValue":l[14]||(l[14]=t=>a.faxNo=t),label:"대표 팩스",variant:"underlined",density:"compact",style:{width:"300px"},onBlur:l[15]||(l[15]=t=>H("F"))},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.homepage,"onUpdate:modelValue":l[16]||(l[16]=t=>a.homepage=t),label:"홈페이지",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(U,{modelValue:a.responSalesBiz,"onUpdate:modelValue":l[17]||(l[17]=t=>a.responSalesBiz=t),items:$.value,"item-title":"codeNm","item-value":"code",label:"책임판매업",density:"compact",variant:"underlined",style:{width:"300px"}},null,8,["modelValue","items"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(o,null,{default:n(()=>[e(s,{modelValue:a.saleManagerName,"onUpdate:modelValue":l[18]||(l[18]=t=>a.saleManagerName=t),label:"영업담당자(정)",variant:"underlined",density:"compact",style:{width:"300px"},"append-inner-icon":"mdi-magnify","onClick:appendInner":l[19]||(l[19]=t=>j("M"))},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.saleManagerNameB,"onUpdate:modelValue":l[20]||(l[20]=t=>a.saleManagerNameB=t),label:"영업담당자(부)",variant:"underlined",density:"compact",style:{width:"300px"},"append-inner-icon":"mdi-magnify","onClick:appendInner":l[21]||(l[21]=t=>j("S"))},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.groupCd,"onUpdate:modelValue":l[22]||(l[22]=t=>a.groupCd=t),label:"그룹코드",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.groupName,"onUpdate:modelValue":l[23]||(l[23]=t=>a.groupName=t),label:"그룹",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(o,null,{default:n(()=>[e(s,{modelValue:a.groupCds,"onUpdate:modelValue":l[24]||(l[24]=t=>a.groupCds=t),label:"그룹사코드",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.groupsName,"onUpdate:modelValue":l[25]||(l[25]=t=>a.groupsName=t),label:"그룹사명",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.paymentCd,"onUpdate:modelValue":l[26]||(l[26]=t=>a.paymentCd=t),label:"결제회사코드",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(o,null,{default:n(()=>[e(s,{modelValue:a.paymentName,"onUpdate:modelValue":l[27]||(l[27]=t=>a.paymentName=t),label:"결제회사",variant:"underlined",density:"compact",style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:n(()=>[e(o,null,{default:n(()=>[e(I,null,{default:n(()=>l[31]||(l[31]=[M("담당자")])),_:1})]),_:1}),e(o,{class:"d-flex justify-end"},{default:n(()=>[e(w,{text:"추가+",onClick:le})]),_:1}),e(T,{headers:Z,items:u.value,class:"custom-table"},{"item.deptName":n(({item:t,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].deptName=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,De),[[V,u.value[i].deptName]])]),"item.managerName":n(({item:t,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].managerName=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Be),[[V,u.value[i].managerName]])]),"item.jobPosition":n(({item:t,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].jobPosition=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Me),[[V,u.value[i].jobPosition]])]),"item.tel":n(({item:t,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].tel=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Le),[[V,u.value[i].tel]])]),"item.directTel":n(({item:t,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].directTel=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Se),[[V,u.value[i].directTel]])]),"item.email":n(({item:t,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>u.value[i].email=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,Ae),[[V,u.value[i].email]])]),"item.actions":n(({item:t})=>[e(k,{color:"medium-emphasis",icon:"mdi-delete",size:"small",onClick:i=>ne(t)},null,8,["onClick"])]),_:1},8,["items"])]),_:1}),e(p,null,{default:n(()=>[e(o,null,{default:n(()=>[e(I,null,{default:n(()=>l[32]||(l[32]=[M("주소")])),_:1})]),_:1}),e(o,{class:"d-flex justify-end"},{default:n(()=>[e(w,{text:"추가+",onClick:te})]),_:1}),e(T,{headers:X,items:g.value,class:"custom-table"},{"item.address":n(({item:t,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>g.value[i].address=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,$e),[[V,g.value[i].address]])]),"item.actions":n(({item:t})=>[e(k,{color:"medium-emphasis",icon:"mdi-delete",size:"small",onClick:i=>de(t)},null,8,["onClick"])]),_:1},8,["items"])]),_:1}),e(p,null,{default:n(()=>[e(o,null,{default:n(()=>[e(I,null,{default:n(()=>l[33]||(l[33]=[M("변경이력")])),_:1})]),_:1}),e(o,{class:"d-flex justify-end"},{default:n(()=>[e(w,{text:"추가+",onClick:ae})]),_:1}),e(T,{headers:Q,items:y.value,class:"custom-table"},{"item.changeDate":n(({item:t,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>y.value[i].changeDate=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,ze),[[V,y.value[i].changeDate]])]),"item.historyContents":n(({item:t,index:i})=>[f(c("input",{"onUpdate:modelValue":m=>y.value[i].historyContents=m,type:"text",style:{"text-align":"left",width:"95%","min-width":"95%","max-width":"95%"},class:"custom-line"},null,8,je),[[V,y.value[i].historyContents]])]),"item.actions":n(({item:t})=>[e(k,{color:"medium-emphasis",icon:"mdi-delete",size:"small",onClick:i=>oe(t)},null,8,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1}),e(P,null,{default:n(()=>[e(p,null,{default:n(()=>[e(o,{class:"d-flex justify-end ga-4"},{default:n(()=>[e(w,{text:"저장",color:"brown-lighten-4",type:"submit"}),e(w,{text:"목록",onClick:ue})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(ce,{modelValue:N.value,"onUpdate:modelValue":l[29]||(l[29]=t=>N.value=t),height:"800",width:"900px",persistent:""},{default:n(()=>[e(ke,{onSelected:ie,onCloseDialog:l[28]||(l[28]=t=>N.value=!1)})]),_:1},8,["modelValue"])],64)}}},Oe=ye(He,[["__scopeId","data-v-c4ec78da"]]);export{Oe as default};
