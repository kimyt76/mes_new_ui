import{a as j,s as T}from"./index-Z2YNGKhZ.js";import{s as k}from"./index-D49h5Cbk.js";import{A as d,H as S,b3 as N,J as U,K as E,W as I,e as $,p as t,h as s,l as n,P as M,G as A,F as B,o as q,a2 as F,a0 as c,y as w,t as x}from"./index-BCdxernO.js";import{s as z}from"./index-WWuz9eST.js";import{s as G}from"./index-CKfU0QJd.js";import{s as K}from"./index-DhHuXiFi.js";import{s as R}from"./index-Dsa_8OmY.js";import{s as Y}from"./index-BE87lW_G.js";import{A as h}from"./apiCommon-DQdCmI3G.js";import{d as J,m as O}from"./common-Ctgf_4Dl.js";import{e as W}from"./exportToExcel-BIsrPQTg.js";import"./index-BGn1OEmN.js";function Q(u){const y=d([]),p=d(!1),m=d(null),b=async()=>{const o=N(u)?u.value:u;if(o){p.value=!0,m.value=null;try{const f=await h.getCodeList(o);y.value=f||[]}catch(f){console.error("getCodeList error:",f),m.value=f}finally{p.value=!1}}};return S(b),N(u)&&U(u,()=>{b()}),{codes:y,loading:p,error:m,reload:b}}const X={class:"flex flex-wrap items-center gap-2 w-full"},Z={class:"flex items-center justify-end gap-2 mb-2"},ee={__name:"PurchaseCurrentList",setup(u){const{codes:y}=Q("ITEM_TYPE_CD"),p=d(null),m=d([]),b=d([]),o=I({strDate:"",toDate:"",areaCd:null,itemTypeCd:null,itemName:"",itemCd:"",customerName:"",testState:null,passState:null});S(async()=>{m.value=await h.getCodeList("AREA"),y.value=await h.getCodeList("ITEM_TYPE_CD"),o.toDate=J(),o.strDate=O(o.toDate)});const f=d({icon:"pi pi-home"}),_=d([{label:"구매관리"},{label:"구매(입고)"},{label:"구매현황목록"}]),L=()=>{var e;const i=((e=p.value)==null?void 0:e.columns)??[];i.length&&W(b.value,"구매현황 리스트",i)};return(i,e)=>{const P=Y,g=R,r=K,C=G,v=z,V=A,D=k,a=T,H=j;return q(),$(B,null,[t(P,{home:f.value,model:_.value},null,8,["home","model"]),s("form",{onSubmit:e[9]||(e[9]=M((...l)=>i.srhList&&i.srhList(...l),["prevent"])),class:"space-y-4"},[t(D,{class:"flex flex-wrap mt-2 mb-2 gap-1 w-full"},{start:n(()=>[s("div",X,[t(r,{variant:"on"},{default:n(()=>[t(g,{modelValue:o.strDate,"onUpdate:modelValue":e[0]||(e[0]=l=>o.strDate=l),inputId:"on_label",showIcon:"",iconDisplay:"input"},null,8,["modelValue"]),e[11]||(e[11]=s("label",{for:"on_label"},"시작",-1))]),_:1}),t(r,{variant:"on"},{default:n(()=>[t(g,{modelValue:o.toDate,"onUpdate:modelValue":e[1]||(e[1]=l=>o.toDate=l),inputId:"on_label",showIcon:"",iconDisplay:"input"},null,8,["modelValue"]),e[12]||(e[12]=s("label",{for:"on_label"},"종료",-1))]),_:1}),t(r,{variant:"on"},{default:n(()=>[t(C,{modelValue:o.areaCd,"onUpdate:modelValue":e[2]||(e[2]=l=>o.areaCd=l),options:m.value,optionLabel:"codeNm",optionValue:"code",style:{width:"120px"}},null,8,["modelValue","options"]),e[13]||(e[13]=s("label",{for:"on_label1"},"구역(공장)",-1))]),_:1}),t(r,{variant:"on"},{default:n(()=>[t(C,{modelValue:o.itemTypeCd,"onUpdate:modelValue":e[3]||(e[3]=l=>o.itemTypeCd=l),options:F(y),optionLabel:"codeNm",optionValue:"code",style:{width:"140px"}},null,8,["modelValue","options"]),e[14]||(e[14]=s("label",{for:"on_label1"},"품목구분",-1))]),_:1}),t(r,{variant:"on"},{default:n(()=>[t(v,{id:"on_label1",modelValue:o.itemName,"onUpdate:modelValue":e[4]||(e[4]=l=>o.itemName=l),style:{width:"190px"}},null,8,["modelValue"]),e[15]||(e[15]=s("label",{for:"on_label1"},"품목명",-1))]),_:1}),t(r,{variant:"on"},{default:n(()=>[t(v,{id:"on_label1",modelValue:o.itemCd,"onUpdate:modelValue":e[5]||(e[5]=l=>o.itemCd=l),style:{width:"140px"}},null,8,["modelValue"]),e[16]||(e[16]=s("label",{for:"on_label1"},"품목코드",-1))]),_:1}),t(r,{variant:"on"},{default:n(()=>[t(v,{id:"on_label1",modelValue:o.customerName,"onUpdate:modelValue":e[6]||(e[6]=l=>o.customerName=l),style:{width:"180px"}},null,8,["modelValue"]),e[17]||(e[17]=s("label",{for:"on_label1"},"거래처명",-1))]),_:1}),t(r,{variant:"on"},{default:n(()=>[t(C,{modelValue:o.testState,"onUpdate:modelValue":e[7]||(e[7]=l=>o.testState=l),options:i.testStates,optionLabel:"codeNm",optionValue:"code",style:{width:"120px"}},null,8,["modelValue","options"]),e[18]||(e[18]=s("label",{for:"on_label1"},"시험상태",-1))]),_:1}),t(r,{variant:"on"},{default:n(()=>[t(C,{modelValue:o.passState,"onUpdate:modelValue":e[8]||(e[8]=l=>o.passState=l),options:i.passStates,optionLabel:"codeNm",optionValue:"code",style:{width:"120px"}},null,8,["modelValue","options"]),e[19]||(e[19]=s("label",{for:"on_label1"},"판정상태",-1))]),_:1}),t(V,{label:"검색",icon:"pi pi-search",type:"submit",class:"bg-blue-500 text-white hover:bg-blue-600"})])]),_:1})],32),s("div",Z,[t(V,{label:"인쇄",icon:"pi pi-file-excel",onClick:i.print},null,8,["onClick"]),t(V,{label:"엑셀",icon:"pi pi-file-excel",severity:"success",onClick:L}),t(V,{label:"바코드",icon:"pi pi-file-excel",onClick:i.barcodePrint},null,8,["onClick"])]),s("div",null,[t(H,{ref_key:"dt",ref:p,selection:i.selectedProducts,"onUpdate:selection":e[10]||(e[10]=l=>i.selectedProducts=l),paginator:"",rows:20,rowsPerPageOptions:[20,30,40],scrollHeight:"700px",scrollable:"",showGridlines:"",tableStyle:"min-width: 140rem; table-layout: fixed;",selectionMode:"single",class:"my-table"},{default:n(()=>[t(a,{selectionMode:"multiple",headerStyle:"width: 3rem",style:{"text-align":"center"}}),t(a,{field:"tranDateSeq",header:"일자-No",style:{width:"100px"},pt:{columnHeaderContent:"justify-center"}}),t(a,{field:"tranDate",header:"입고일",style:{width:"80px"},pt:{columnHeaderContent:"justify-center"}}),t(a,{field:"customerName",header:"거래처명",style:{width:"190px"},pt:{columnHeaderContent:"justify-center"}}),t(a,{field:"itemCd",header:"품목코드",style:{width:"80px"},pt:{columnHeaderContent:"justify-center"}}),t(a,{field:"itemName",header:"품목명",frozen:"",style:c([{width:"350px"},{"text-align":"left"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}}),t(a,{field:"testNo",header:"시험번호",style:{width:"100px"},pt:{columnHeaderContent:"justify-center"}}),t(a,{field:"unit",header:"규격",style:{width:"90px"},pt:{columnHeaderContent:"justify-center"}}),t(a,{field:"qty",header:"수량",pt:{columnHeaderContent:"justify-center"},style:c([{width:"80px"},{"text-align":"right"}])},{body:n(l=>[w(x(Number(l.data.qty).toLocaleString()),1)]),_:1}),t(a,{field:"inPrice",header:"단가",pt:{columnHeaderContent:"justify-center"},style:c([{width:"80px"},{"text-align":"right"}])},{body:n(l=>[w(x(Number(l.data.inPrice).toLocaleString()),1)]),_:1}),t(a,{field:"supplyPrice",header:"공급가",pt:{columnHeaderContent:"justify-center"},style:c([{width:"80px"},{"text-align":"right"}])},{body:n(l=>[w(x(Number(l.data.supplyPrice).toLocaleString()),1)]),_:1}),t(a,{field:"vatPrice",header:"부가세",pt:{columnHeaderContent:"justify-center"},style:c([{width:"80px"},{"text-align":"right"}])},{body:n(l=>[w(x(Number(l.data.vatPrice).toLocaleString()),1)]),_:1}),t(a,{field:"sumPrice",header:"합계",pt:{columnHeaderContent:"justify-center"},style:c([{width:"80px"},{"text-align":"right"}])},{body:n(l=>[w(x(Number(l.data.sumPrice).toLocaleString()),1)]),_:1}),t(a,{field:"testState",header:"시험상태",style:{width:"80px"},pt:{columnHeaderContent:"justify-center"}}),t(a,{field:"passState",header:"판정상태",style:{width:"80px"},pt:{columnHeaderContent:"justify-center"}}),t(a,{field:"areaName",header:"구역",style:{width:"80px"},pt:{columnHeaderContent:"justify-center"}})]),_:1},8,["selection"])])],64)}}},fe=E(ee,[["__scopeId","data-v-0e87a271"]]);export{fe as default};
