import{a as L,s as k}from"./index-Z2YNGKhZ.js";import{s as S}from"./index-D49h5Cbk.js";import{K as $,M as A,U,A as d,W as B,H as E,e as I,p as t,h as s,l as i,P as T,G as D,F,o as q,a0 as f,t as b,y as g}from"./index-BCdxernO.js";import{s as z}from"./index-WWuz9eST.js";import{s as G}from"./index-DhHuXiFi.js";import{s as P}from"./index-CKfU0QJd.js";import{s as Q}from"./index-BE87lW_G.js";import{A as R}from"./apiCommon-DQdCmI3G.js";import{A as K}from"./apiLab-DBKUW3x6.js";import{i as O}from"./common-Ctgf_4Dl.js";import{e as W}from"./exportToExcel-BIsrPQTg.js";import J from"./SampleDetailPop-BZhyIu5n.js";import"./index-BGn1OEmN.js";import"./index-CEOpAmiF.js";import"./index-CLRf2YcQ.js";import"./index-Dsa_8OmY.js";const X={class:"flex flex-wrap items-center gap-2 w-full"},Y={class:"flex items-center justify-end gap-2 mb-2"},Z=["onClick"],ee={__name:"SampleList",setup(te){const{userId:v}=A(),h=U(),y=d(null),u=d([]),m=d([]),a=B({areaCd:"",clientName:"",itemName:"",busisnessManagerName:"",labManagerName:"",userId:v}),x=async()=>{const n={...a};u.value=await K.getSampleList(n)},w=n=>{let e="신규";O(n)||(e="상세"),h.open(J,{props:{header:"샘플송부("+e+")",modal:!0,maximizable:!1,draggable:!0,style:{overflow:"hidden"},pt:{root:{style:{overflow:"hidden"}},content:{style:{overflow:"hidden"}}}},data:n,onClose:_=>{x()}})};E(async()=>{m.value=await R.getCodeList("AREA"),m.value=m.value.filter(n=>!["A003"].includes(n.code))});const C=()=>{var e;const n=((e=y.value)==null?void 0:e.columns)??[];if(!n.length){console.warn("No Columns Found");return}W(u.value,"샘플송부 리스트",n)},N=d({icon:"pi pi-home"}),V=d([{label:"연구관리"},{label:"샘플관리"},{label:"샘플송부목록"}]);return(n,e)=>{const _=Q,H=P,r=G,p=z,c=D,j=S,o=k,M=L;return q(),I(F,null,[t(_,{home:N.value,model:V.value},null,8,["home","model"]),s("form",{onSubmit:T(x,["prevent"]),class:"space-y-4"},[t(j,{class:"flex flex-wrap mt-2 mb-2 gap-1 w-full"},{start:i(()=>[s("div",X,[t(r,{variant:"on"},{default:i(()=>[t(H,{modelValue:a.areaCd,"onUpdate:modelValue":e[0]||(e[0]=l=>a.areaCd=l),options:m.value,optionLabel:"codeNm",optionValue:"code",style:{width:"150px"}},null,8,["modelValue","options"]),e[6]||(e[6]=s("label",{for:"on_label"},"공장명",-1))]),_:1}),t(r,{variant:"on"},{default:i(()=>[t(p,{id:"on_label1",modelValue:a.clientName,"onUpdate:modelValue":e[1]||(e[1]=l=>a.clientName=l),style:{width:"180px"}},null,8,["modelValue"]),e[7]||(e[7]=s("label",{for:"on_label1"},"업체명",-1))]),_:1}),t(r,{variant:"on"},{default:i(()=>[t(p,{id:"on_label1",modelValue:a.itemName,"onUpdate:modelValue":e[2]||(e[2]=l=>a.itemName=l),style:{width:"200px"}},null,8,["modelValue"]),e[8]||(e[8]=s("label",{for:"on_label1"},"품목명",-1))]),_:1}),t(r,{variant:"on"},{default:i(()=>[t(p,{id:"on_label1",modelValue:a.businessManagerName,"onUpdate:modelValue":e[3]||(e[3]=l=>a.businessManagerName=l),style:{width:"110px"}},null,8,["modelValue"]),e[9]||(e[9]=s("label",{for:"on_label1"},"영업담당자명",-1))]),_:1}),t(r,{variant:"on"},{default:i(()=>[t(p,{id:"on_label1",modelValue:a.labManagerName,"onUpdate:modelValue":e[4]||(e[4]=l=>a.labManagerName=l),style:{width:"110px"}},null,8,["modelValue"]),e[10]||(e[10]=s("label",{for:"on_label1"},"연구담당자명",-1))]),_:1}),t(c,{label:"검색",icon:"pi pi-search",type:"submit",class:"bg-blue-500 text-white hover:bg-blue-600"})])]),_:1})],32),s("div",Y,[t(c,{label:"신규",icon:"pi pi-plus",severity:"secondary",onClick:e[5]||(e[5]=l=>w(""))}),t(c,{label:"엑셀",icon:"pi pi-file-excel",severity:"success",onClick:C})]),s("div",null,[t(M,{ref_key:"dt",ref:y,value:u.value,paginator:"",rows:20,rowsPerPageOptions:[20,30,40],scrollable:"",scrollHeight:"650px",showGridlines:"",class:"my-table"},{default:i(()=>[t(o,{field:"areaName",header:"공장명",style:{width:"70px"},pt:{columnHeaderContent:"justify-center"}}),t(o,{field:"clientName",header:"업체명",style:{width:"220px"},pt:{columnHeaderContent:"justify-center"}}),t(o,{field:"itemName",header:"품목명",style:f([{width:"150px"},{"text-align":"left"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}},{body:i(l=>[s("div",{onClick:le=>w(l.data.sampleId),class:"clickable-cell"},b(l.data.itemName),9,Z)]),_:1}),t(o,{field:"formulationCd",header:"제형",style:{width:"80px"},pt:{columnHeaderContent:"justify-center"}}),t(o,{field:"businessManagerName",header:"영업담당자명",style:{width:"90px"},pt:{columnHeaderContent:"justify-center"}}),t(o,{field:"labManagerName",header:"연구담당자명",style:{width:"90px"},pt:{columnHeaderContent:"justify-center"}}),t(o,{field:"reqDate",header:"의뢰일자",style:{width:"90px"},pt:{columnHeaderContent:"justify-center"}}),t(o,{field:"prodMgmtNo",header:"제품관리번호",style:{width:"90px"},pt:{columnHeaderContent:"justify-center"}}),t(o,{field:"countQty",header:"횟수",pt:{columnHeaderContent:"justify-center"},style:f([{width:"50px"},{"text-align":"right"}])},{body:i(l=>[g(b(Number(l.data.countQty).toLocaleString()),1)]),_:1}),t(o,{field:"qty",header:"수량",pt:{columnHeaderContent:"justify-center"},style:f([{width:"50px"},{"text-align":"right"}])},{body:i(l=>[g(b(Number(l.data.qty).toLocaleString()),1)]),_:1}),t(o,{field:"etc",header:"특이사항",style:{width:"140px"},pt:{columnHeaderContent:"justify-center"}})]),_:1},8,["value"])])],64)}}},_e=$(ee,[["__scopeId","data-v-b1cb19df"]]);export{_e as default};
