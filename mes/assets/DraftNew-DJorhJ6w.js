import{A as I}from"./apiOrders-_upYRx2I.js";import{A as L}from"./apiCommon-DdZa9yuA.js";import{_ as j,a as J,u as M,r as c,m as H,n as R,c as T,g as l,d as a,w as r,F as z,e as G,C as K,o as P,f as e,h as p,t as o,i as v,D as W}from"./index-BwIl0pzA.js";import{e as X,h as A,g as Y}from"./common-C7emv0-E.js";import{_ as C}from"./SingleFileUpload-C9MY1baf.js";import{_ as Z}from"./UserListPop-slRERV9R.js";import"./format-CBpsKyOP.js";const tt={style:{height:"80px","text-align":"center","border-left":"1px solid #ccc"}},et={style:{height:"80px","text-align":"center","border-left":"1px solid #ccc"}},lt={style:{height:"80px","text-align":"center","border-left":"1px solid #ccc"}},st={style:{height:"80px","text-align":"center","border-left":"1px solid #ccc"}},ot={style:{height:"80px","text-align":"center","border-left":"1px solid #ccc"}},nt={style:{height:"80px","text-align":"center","border-left":"1px solid #ccc"}},rt={style:{height:"30px","text-align":"center","border-left":"1px solid #ccc"}},dt={colspan:"3"},at={colspan:"4",style:{height:"100px","text-align":"center"}},it={colspan:"3"},ut={colspan:"3"},pt={__name:"DraftNew",setup(mt){const D=G(),{userId:U,memberNm:g,deptNm:w}=J(),{vError:S,vSuccess:q}=M(),m=c([]),f=c([]),x=c(!1),s=H({draftDate:X(),seq:"",customerName:"",itemName:"",orderQty:0,dueDate:"",draftUserName:g,draftDept:w,draftUserId:U,userId:U}),i=c({businessUserId:"",productUserId:"",purchaseUserId:"",qcUserId:"",labUserId:"",businessUserName:"",productUserName:"",purchaseUserName:"",qcUserName:"",labUserName:"",businessApprovalDate:"",productApprovalDate:"",purchaseApprovalDate:"",qcApprovalDate:"",labApprovalDate:""}),F=d=>{i.value.labUserName=d.memberNm,i.value.labUserId=d.userId},k=async()=>{const d=new FormData,t={...s};t.dueDate=A(s.dueDate),t.orderQty=Y(s.orderQty),d.append("draftInfo",JSON.stringify(t)),d.append("approval",JSON.stringify(i.value)),m.value&&d.append("orderFile",m.value),f.value&&d.append("prodFile",f.value);try{const u=await I.saveDraftInfo(d);console.log("msg",u),q(u),D.push({name:"DraftList"})}catch(u){S(u.response)}};R(async()=>{s.seq=await L.getNextSeq("tb_draft_mst","draft_date",s.draftDate);const d=await I.getApprovalInfo();Object.assign(i.value,d)});const Q=()=>{D.push({name:"DraftList"})};return(d,t)=>{const u=a("v-breadcrumbs"),b=a("v-btn"),_=a("v-table"),y=a("v-col"),h=a("v-row"),V=a("v-card-text"),N=a("v-text-field"),O=a("v-date-input"),$=a("v-card"),B=a("v-dialog"),E=K("comma-number");return P(),T(z,null,[l(u,{items:["MES","발주관리","발주 등록"]}),l($,null,{default:r(()=>[l(V,{class:"overflow-y-hidden"},{default:r(()=>[l(h,null,{default:r(()=>[l(y,{class:"d-flex justify-end pa-1"},{default:r(()=>[l(_,{style:{border:"0.1px solid #ccc"}},{default:r(()=>[e("tbody",null,[t[15]||(t[15]=e("tr",null,[e("th",{rowspan:"3",style:{"vertical-align":"middle",width:"20px"}},[p("결"),e("br"),e("br"),e("br"),p("재")]),e("th",{style:{height:"30px",width:"120px","text-align":"center","border-left":"1px solid #ccc"}},"기안자"),e("th",{style:{height:"30px",width:"120px","text-align":"center","border-left":"1px solid #ccc"}},"영업관리"),e("th",{style:{height:"30px",width:"120px","text-align":"center","border-left":"1px solid #ccc"}},"생산관리"),e("th",{style:{height:"30px",width:"120px","text-align":"center","border-left":"1px solid #ccc"}},"구매부"),e("th",{style:{height:"30px",width:"120px","text-align":"center","border-left":"1px solid #ccc"}},"품질관리"),e("th",{style:{height:"30px",width:"120px","text-align":"center","border-left":"1px solid #ccc"}},"연구소")],-1)),e("tr",null,[e("td",tt,o(v(g)),1),e("td",et,o(i.value.businessUserName),1),e("td",lt,o(i.value.productUserName),1),e("td",st,o(i.value.purchaseUserName),1),e("td",ot,o(i.value.qcUserName),1),e("td",nt,[e("span",null,o(i.value.labUserName),1),l(b,{onClick:t[0]||(t[0]=n=>x.value=!0)},{default:r(()=>t[9]||(t[9]=[p("결재자")])),_:1})])]),e("tr",null,[e("td",rt,o(s.draftDate),1),t[10]||(t[10]=e("td",{style:{height:"30px","text-align":"center","border-left":"1px solid #ccc"}},"결재일자",-1)),t[11]||(t[11]=e("td",{style:{height:"30px","text-align":"center","border-left":"1px solid #ccc"}},"결재일자",-1)),t[12]||(t[12]=e("td",{style:{height:"30px","text-align":"center","border-left":"1px solid #ccc"}},"결재일자",-1)),t[13]||(t[13]=e("td",{style:{height:"30px","text-align":"center","border-left":"1px solid #ccc"}},"결재일자",-1)),t[14]||(t[14]=e("td",{style:{height:"30px","text-align":"center","border-left":"1px solid #ccc"}},"결재일자",-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),l(V,{class:"overflow-y-hidden"},{default:r(()=>[l(h,null,{default:r(()=>[l(y,null,{default:r(()=>[l(_,{class:"compact-table",style:{height:"590px"}},{default:r(()=>[e("tbody",null,[e("tr",null,[t[16]||(t[16]=e("th",null,"문서번호",-1)),e("td",null,o(s.draftDate)+"-"+o(s.seq),1),t[17]||(t[17]=e("th",null,"처리기한",-1)),t[18]||(t[18]=e("td",null,"즉시",-1))]),e("tr",null,[t[19]||(t[19]=e("th",null,"보존년한",-1)),t[20]||(t[20]=e("td",null,"5년",-1)),t[21]||(t[21]=e("th",null,"기안일자",-1)),e("td",null,o(s.draftDate),1)]),e("tr",null,[t[22]||(t[22]=e("th",null,"기안부서",-1)),e("td",null,o(v(w)),1),t[23]||(t[23]=e("th",null,"기안자",-1)),e("td",null,o(v(g)),1)]),e("tr",null,[t[24]||(t[24]=e("th",null,"제목",-1)),e("td",dt,o(s.customerName)+"    "+o(s.itemName)+"    발주서 및 제품 사양서 검토 요청의 건 ",1)]),e("tr",null,[e("td",at,[p(o(s.customerName)+"    "+o(s.itemName)+"    발주서 및 제품 사양서 기안하오니 검토하여 주시기 바랍니다.",1),t[25]||(t[25]=e("br",null,null,-1)),t[26]||(t[26]=e("br",null,null,-1)),t[27]||(t[27]=p(" - 아 래 - "))])]),e("tr",null,[t[28]||(t[28]=e("th",null,"고객사명",-1)),e("td",null,[l(N,{modelValue:s.customerName,"onUpdate:modelValue":t[1]||(t[1]=n=>s.customerName=n),variant:"outlined",density:"compact","hide-details":"",class:"cell-input"},null,8,["modelValue"])]),t[29]||(t[29]=e("th",null,"품목",-1)),e("td",null,[l(N,{modelValue:s.itemName,"onUpdate:modelValue":t[2]||(t[2]=n=>s.itemName=n),variant:"outlined",density:"compact","hide-details":"",class:"cell-input"},null,8,["modelValue"])])]),e("tr",null,[t[30]||(t[30]=e("th",null,"발주수량",-1)),e("td",null,[W(l(N,{modelValue:s.orderQty,"onUpdate:modelValue":t[3]||(t[3]=n=>s.orderQty=n),variant:"outlined",density:"compact","hide-details":"",style:{"text-align":"right"},class:"cell-input"},null,8,["modelValue"]),[[E]])]),t[31]||(t[31]=e("th",null,"납기일자",-1)),e("td",null,[l(O,{modelValue:s.dueDate,"onUpdate:modelValue":t[4]||(t[4]=n=>s.dueDate=n),"display-format":v(A),variant:"outlined",density:"compact","hide-details":"",class:"cell-input"},null,8,["modelValue","display-format"])])]),e("tr",null,[t[32]||(t[32]=e("th",null,"발주서첨부",-1)),e("td",it,[l(C,{modelValue:m.value,"onUpdate:modelValue":t[5]||(t[5]=n=>m.value=n),style:{height:"20px",width:"1100px"},class:"mb-4"},null,8,["modelValue"])])]),e("tr",null,[t[33]||(t[33]=e("th",null,"제품사양서첨부",-1)),e("td",ut,[l(C,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=n=>f.value=n),style:{height:"20px",width:"1100px"},class:"mb-4"},null,8,["modelValue"])])])])]),_:1})]),_:1})]),_:1}),l(h,null,{default:r(()=>[l(y,{class:"d-flex ga-4 justify-end mb-3"},{default:r(()=>[l(b,{text:"저장",class:"gt-2",color:"brown-lighten-4",onClick:k}),l(b,{text:"목록",class:"mr-3",onClick:Q})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,{modelValue:x.value,"onUpdate:modelValue":t[8]||(t[8]=n=>x.value=n),height:"800px",width:"900px",persistent:""},{default:r(()=>[l(Z,{onSelected:F,onCloseDialog:t[7]||(t[7]=n=>x.value=!1)})]),_:1},8,["modelValue"])],64)}}},ht=j(pt,[["__scopeId","data-v-05a533f9"]]);export{ht as default};
