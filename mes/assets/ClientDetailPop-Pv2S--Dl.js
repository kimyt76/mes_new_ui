import{a as P,s as q}from"./index-Z2YNGKhZ.js";import{s as Q}from"./index-CEOpAmiF.js";import{s as X,a as Z,b as ee}from"./index-CKfU0QJd.js";import{K as le,L as te,U as ae,M as oe,A as p,W as se,J as ne,H as de,V as ie,e as M,p as t,h as a,l as s,G as ue,F as re,o as L,g as me,a2 as D,a0 as m}from"./index-BCdxernO.js";import{s as pe}from"./index-DhHuXiFi.js";import{s as fe}from"./index-WWuz9eST.js";import{A as x}from"./apiBase-DJzL_JWR.js";import{A as N}from"./apiCommon-DQdCmI3G.js";import{i as y}from"./common-Ctgf_4Dl.js";import{h as ce}from"./errorHandler-DOdEIoRq.js";import{U as Ve}from"./UserListPop-40qvmJxy.js";import{s as $}from"./index-Dsa_8OmY.js";import"./index-BGn1OEmN.js";import"./apiSystem-BBpYMteA.js";const ve={class:"grid mb-1"},be={class:"col-6"},ye={class:"flex gap-2 align-items-center"},ge={class:"grid mb-1"},we={class:"col-6"},Ce={class:"col-3"},xe={class:"col-3"},Ne={class:"col-3"},Ue={key:0,class:"col-3"},_e={class:"col-3"},Ie={class:"col-3"},ke={class:"grid mb-1"},Te={class:"col-3"},je={class:"col-3"},He={class:"col-3"},Be={class:"col-3"},Me={class:"grid mb-1"},Le={class:"col-3"},De={class:"col-3"},$e={class:"col-3"},Ae={class:"col-3"},Se={class:"grid mb-1"},he={class:"col-3"},Re={class:"col-3"},ze={class:"col-3"},Fe={class:"col-3"},Ee={class:"grid mb-1"},We={class:"col-3"},Ye={class:"col-3"},Ge={class:"col-3"},Je={class:"col-3"},Ke={class:"flex justify-content-between align-items-center ml-2 mb-1 mt-2"},Oe={class:"flex justify-end gap-2"},Pe={class:"w-full",ref:"tableWrapper"},qe=["onClick"],Qe={class:"flex justify-content-between align-items-center ml-2 mb-1 mt-4"},Xe={class:"w-full"},Ze=["onClick"],el={class:"flex justify-content-between align-items-center ml-2 mb-1 mt-4"},ll={class:"w-full"},tl=["onClick"],al={class:"flex gap-2 justify-end pt-3"},ol={__name:"ClientDetailPop",setup(sl){const{vSuccess:A,vInfo:b,vWarning:S}=te(),h=ae(),{userId:R}=oe(),U=ie("dialogRef"),_=p([]),I=p([]),k=p([]),f=p([]),c=p([]),V=p([]),g=p(!1),o=se({clientId:"",businessNo:"",clientName:"",clientType:"",clientTypeName:"",tradeType:"",regDate:"",responSalesBiz:"",establishDate:"",president:"",businessType:"",businessItem:"",telNo:"",faxNo:"",homepage:"",addressId:"",managerId:"",paymentCondition:"",saleManagerId:"",saleManagerIdB:"",groupCd:"",groupName:"",groupsCd:"",groupsName:"",paymentCd:"",paymentName:"",useYn:"",saleManagerName:"",saleManagerNameB:"",userId:R}),z=async()=>{if(y(o.clientName)){b("고객사명을 입력하세요.");return}if(y(o.businessNo)){b("사업자번호를 입력하세요.");return}const d={clientInfo:o,clientManagerList:f.value,clientAddressList:c.value,clientHistoryList:V.value};try{const e=await x.saveClientInfo(d);A(e.data.message),j()}catch(e){ce(e)}},T=d=>{h.open(Ve,{props:{header:"사용자 목록",modal:!0,maximizable:!1,draggable:!0,style:{overflow:"hidden"},pt:{root:{style:{overflow:"hidden"}},content:{style:{overflow:"hidden"}}}},onClose:e=>{d==="M"?(o.saleManagerId=e.data.userId,o.saleManagerName=e.data.memberNm):(o.saleManagerIdB=e.data.userId,o.saleManagerNameB=e.datamemberNm)}})},F=()=>{let d=f.value.length;f.value.push({id:d++,deptName:"",managerName:"",jobPosition:"",tel:"",directTel:"",email:""})},E=()=>{let d=c.value.length;c.value.push({id:d++,address:""})},W=()=>{let d=V.value.length;V.value.push({id:d++,changeDate:"",historyContents:""})},Y=d=>{f.value.splice(d,1)},G=d=>{c.value.splice(d,1)},J=d=>{V.value.splice(d,1)};ne(()=>o.clientType,async d=>{o.clientType==="E"?g.value=!0:g.value=!1}),de(async()=>{if(_.value=await N.getCodeList("trade_type"),I.value=await N.getCodeList("client_type"),k.value=await N.getCodeList("respon_sales_biz"),o.clientId=U.value.data,!y(o.clientId)){const d=await x.getClientInfo(o.clientId);Object.assign(o,d.clientInfo),f.value=d.clientManagerList||[],V.value=d.clientHistoryList||[],c.value=d.clientAddressList||[]}});const K=async()=>{if(y(o.businessNo))return b("사업자 번호를 입력하세요");await x.getBusinessNoChecked(o.businessNo)==="Y"?b("등록 가능한 사업자 번호입니다."):(S("등록된 사업자 번호입니다."),o.businessNo="")},j=()=>{U.value.close()};return(d,e)=>{const n=fe,i=pe,v=ue,w=X,H=ee,B=Z,O=Q,r=q,C=P;return L(),M(re,null,[t(O,{style:{width:"95rem",height:"24rem"}},{content:s(()=>[a("div",ve,[a("div",be,[a("div",ye,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.businessNo,"onUpdate:modelValue":e[0]||(e[0]=l=>o.businessNo=l),class:"w-full"},null,8,["modelValue"]),e[28]||(e[28]=a("label",null,"사업자번호",-1))]),_:1}),t(v,{label:"중복체크",severity:"secondary",onClick:K}),e[29]||(e[29]=a("span",null,"번호만 입력하세요 ('-' 제외)",-1))])])]),a("div",ge,[a("div",we,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.clientName,"onUpdate:modelValue":e[1]||(e[1]=l=>o.clientName=l),class:"w-full"},null,8,["modelValue"]),e[30]||(e[30]=a("label",null,"고객사명(상호)",-1))]),_:1})]),a("div",Ce,[t(i,{variant:"on"},{default:s(()=>[t(D($),{modelValue:o.regDate,"onUpdate:modelValue":e[2]||(e[2]=l=>o.regDate=l),showIcon:"",class:"w-full"},null,8,["modelValue"]),e[31]||(e[31]=a("label",null,"등록일자",-1))]),_:1})]),a("div",xe,[t(i,{variant:"on"},{default:s(()=>[t(D($),{modelValue:o.establishDate,"onUpdate:modelValue":e[3]||(e[3]=l=>o.establishDate=l),showIcon:"",class:"w-full"},null,8,["modelValue"]),e[32]||(e[32]=a("label",null,"설립일자",-1))]),_:1})]),a("div",Ne,[t(i,{variant:"on"},{default:s(()=>[t(w,{modelValue:o.clientType,"onUpdate:modelValue":e[4]||(e[4]=l=>o.clientType=l),options:I.value,optionLabel:"codeNm",optionValue:"code",class:"w-full"},null,8,["modelValue","options"]),e[33]||(e[33]=a("label",null,"사업자구분",-1))]),_:1})]),g.value?(L(),M("div",Ue,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.clientTypeName,"onUpdate:modelValue":e[5]||(e[5]=l=>o.clientTypeName=l),class:"w-full"},null,8,["modelValue"]),e[34]||(e[34]=a("label",null,"기타",-1))]),_:1})])):me("",!0),a("div",_e,[t(i,{variant:"on"},{default:s(()=>[t(w,{modelValue:o.tradeType,"onUpdate:modelValue":e[6]||(e[6]=l=>o.tradeType=l),options:_.value,optionLabel:"codeNm",optionValue:"code",class:"w-full"},null,8,["modelValue","options"]),e[35]||(e[35]=a("label",null,"거래구분",-1))]),_:1})]),a("div",Ie,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.firstTradeDate,"onUpdate:modelValue":e[7]||(e[7]=l=>o.firstTradeDate=l),class:"w-full"},null,8,["modelValue"]),e[36]||(e[36]=a("label",null,"최초거래일자",-1))]),_:1})])]),a("div",ke,[a("div",Te,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.president,"onUpdate:modelValue":e[8]||(e[8]=l=>o.president=l),class:"w-full"},null,8,["modelValue"]),e[37]||(e[37]=a("label",null,"대표자명",-1))]),_:1})]),a("div",je,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.businessType,"onUpdate:modelValue":e[9]||(e[9]=l=>o.businessType=l),class:"w-full"},null,8,["modelValue"]),e[38]||(e[38]=a("label",null,"업태",-1))]),_:1})]),a("div",He,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.businessItem,"onUpdate:modelValue":e[10]||(e[10]=l=>o.businessItem=l),class:"w-full"},null,8,["modelValue"]),e[39]||(e[39]=a("label",null,"종목",-1))]),_:1})]),a("div",Be,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.paymentCondition,"onUpdate:modelValue":e[11]||(e[11]=l=>o.paymentCondition=l),class:"w-full"},null,8,["modelValue"]),e[40]||(e[40]=a("label",null,"결제조건",-1))]),_:1})])]),a("div",Me,[a("div",Le,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.telNo,"onUpdate:modelValue":e[12]||(e[12]=l=>o.telNo=l),class:"w-full",onBlur:e[13]||(e[13]=l=>d.onBlur("T"))},null,8,["modelValue"]),e[41]||(e[41]=a("label",null,"대표전화",-1))]),_:1})]),a("div",De,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.faxNo,"onUpdate:modelValue":e[14]||(e[14]=l=>o.faxNo=l),class:"w-full",onBlur:e[15]||(e[15]=l=>d.onBlur("F"))},null,8,["modelValue"]),e[42]||(e[42]=a("label",null,"대표팩스",-1))]),_:1})]),a("div",$e,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.homepage,"onUpdate:modelValue":e[16]||(e[16]=l=>o.homepage=l),class:"w-full"},null,8,["modelValue"]),e[43]||(e[43]=a("label",null,"홈페이지",-1))]),_:1})]),a("div",Ae,[t(i,{variant:"on"},{default:s(()=>[t(w,{modelValue:o.responSalesBiz,"onUpdate:modelValue":e[17]||(e[17]=l=>o.responSalesBiz=l),options:k.value,optionLabel:"codeNm",optionValue:"code",class:"w-full"},null,8,["modelValue","options"]),e[44]||(e[44]=a("label",null,"책임판매업",-1))]),_:1})])]),a("div",Se,[a("div",he,[t(i,{variant:"on"},{default:s(()=>[t(B,{iconPosition:"left"},{default:s(()=>[t(n,{modelValue:o.saleManagerName,"onUpdate:modelValue":e[18]||(e[18]=l=>o.saleManagerName=l),class:"w-full"},null,8,["modelValue"]),t(H,{class:"pi pi-search",onClick:e[19]||(e[19]=l=>T("M"))})]),_:1}),e[45]||(e[45]=a("label",null,"영업담당자(정)",-1))]),_:1})]),a("div",Re,[t(i,{variant:"on"},{default:s(()=>[t(B,{iconPosition:"left"},{default:s(()=>[t(n,{modelValue:o.saleManagerName,"onUpdate:modelValue":e[20]||(e[20]=l=>o.saleManagerName=l),class:"w-full"},null,8,["modelValue"]),t(H,{class:"pi pi-search",onClick:e[21]||(e[21]=l=>T("S"))})]),_:1}),e[46]||(e[46]=a("label",null,"영업담당자(부)",-1))]),_:1})]),a("div",ze,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.groupCd,"onUpdate:modelValue":e[22]||(e[22]=l=>o.groupCd=l),class:"w-full"},null,8,["modelValue"]),e[47]||(e[47]=a("label",null,"그룹코드",-1))]),_:1})]),a("div",Fe,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.groupName,"onUpdate:modelValue":e[23]||(e[23]=l=>o.groupName=l),class:"w-full"},null,8,["modelValue"]),e[48]||(e[48]=a("label",null,"그룹",-1))]),_:1})])]),a("div",Ee,[a("div",We,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.groupsName,"onUpdate:modelValue":e[24]||(e[24]=l=>o.groupsName=l),class:"w-full"},null,8,["modelValue"]),e[49]||(e[49]=a("label",null,"그룹사코드",-1))]),_:1})]),a("div",Ye,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.groupsName,"onUpdate:modelValue":e[25]||(e[25]=l=>o.groupsName=l),class:"w-full"},null,8,["modelValue"]),e[50]||(e[50]=a("label",null,"그룹사명",-1))]),_:1})]),a("div",Ge,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.paymentCd,"onUpdate:modelValue":e[26]||(e[26]=l=>o.paymentCd=l),class:"w-full"},null,8,["modelValue"]),e[51]||(e[51]=a("label",null,"결제회사코드",-1))]),_:1})]),a("div",Je,[t(i,{variant:"on"},{default:s(()=>[t(n,{modelValue:o.paymentName,"onUpdate:modelValue":e[27]||(e[27]=l=>o.paymentName=l),class:"w-full"},null,8,["modelValue"]),e[52]||(e[52]=a("label",null,"결제회사",-1))]),_:1})])])]),_:1}),a("div",Ke,[e[53]||(e[53]=a("h5",{class:"m-0"},"- 담당자",-1)),a("div",Oe,[t(v,{label:"추가+",onClick:F,class:"p-button-xm"})])]),a("div",Pe,[t(C,{value:f.value,scrollHeight:"300px","show-gridlines":"",scrollable:"",class:"my-table fixed-datatable"},{default:s(()=>[t(r,{field:"deptName",header:"부서",style:m([{width:"100px"},{"text-align":"center"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[t(n,{modelValue:l.data.deptName,"onUpdate:modelValue":u=>l.data.deptName=u,class:"w-full",style:{"text-align":"center"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(r,{field:"managerName",header:"이름",style:{width:"110px"},pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[t(n,{modelValue:l.data.managerName,"onUpdate:modelValue":u=>l.data.managerName=u,class:"w-full",style:{"text-align":"center"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(r,{field:"jobPosition",header:"직책",style:m([{width:"100px"},{"text-align":"left"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[t(n,{modelValue:l.data.jobPosition,"onUpdate:modelValue":u=>l.data.jobPosition=u,class:"w-full",style:{"text-align":"left"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(r,{field:"tel",header:"연락처",style:{width:"120px"},pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[t(n,{modelValue:l.data.tel,"onUpdate:modelValue":u=>l.data.tel=u,class:"w-full",style:{"text-align":"center"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(r,{field:"directTel",header:"직통번호",style:m([{width:"120px"},{"text-align":"left"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[t(n,{modelValue:l.data.directTel,"onUpdate:modelValue":u=>l.data.directTel=u,class:"w-full",style:{"text-align":"left"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(r,{field:"email",header:"이메일",style:m([{width:"200px"},{"text-align":"left"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[t(n,{modelValue:l.data.email,"onUpdate:modelValue":u=>l.data.email=u,class:"w-full",style:{"text-align":"left"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(r,{field:"actions",header:"-",style:m([{width:"20px"},{"text-align":"left"}]),pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[a("i",{class:"pi pi-trash cursor-pointer",onClick:u=>Y(l.index)},null,8,qe)]),_:1})]),_:1},8,["value"])],512),a("div",Qe,[e[54]||(e[54]=a("h5",{class:"m-0"},"- 주소",-1)),t(v,{label:"추가+",onClick:E,class:"p-button-xm"})]),a("div",Xe,[t(C,{value:c.value,scrollable:"",scrollHeight:"300px","show-gridlines":"",class:"my-table fixed-datatable"},{default:s(()=>[t(r,{field:"address",header:"주소",style:m([{width:"600px"},{"text-align":"center"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[t(n,{modelValue:l.data.address,"onUpdate:modelValue":u=>l.data.address=u,class:"w-full",style:{"text-align":"center"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(r,{field:"actions",header:"-",style:m([{width:"20px"},{"text-align":"center"}]),pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[a("i",{class:"pi pi-trash cursor-pointer",onClick:u=>G(l.index)},null,8,Ze)]),_:1})]),_:1},8,["value"])]),a("div",el,[e[55]||(e[55]=a("h5",{class:"m-0"},"- 변경이력",-1)),t(v,{label:"추가+",onClick:W,class:"p-button-xm"})]),a("div",ll,[t(C,{value:V.value,scrollable:"",scrollHeight:"300px","show-gridlines":"",class:"my-table fixed-datatable"},{default:s(()=>[t(r,{field:"changeDate",header:"변경일",style:m([{width:"80px"},{"text-align":"center"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[t(n,{modelValue:l.data.changeDate,"onUpdate:modelValue":u=>l.data.changeDate=u,class:"w-full",style:{"text-align":"center"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(r,{field:"historyContents",header:"변경내용",style:m([{width:"90px"},{"text-align":"center"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[t(n,{modelValue:l.data.historyContents,"onUpdate:modelValue":u=>l.data.historyContents=u,class:"w-full",style:{"text-align":"center"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(r,{field:"actions",header:"-",style:m([{width:"20px"},{"text-align":"center"}]),pt:{columnHeaderContent:"justify-center"}},{body:s(l=>[a("i",{class:"pi pi-trash cursor-pointer",onClick:u=>J(l.index)},null,8,tl)]),_:1})]),_:1},8,["value"])]),a("div",al,[t(v,{label:"저장",severity:"secondary",onClick:z}),t(v,{label:"닫기",onClick:j})])],64)}}},wl=le(ol,[["__scopeId","data-v-681345d4"]]);export{wl as default};
