import{aa as B,M as E,A as c,W as T,H as $,e as v,p as e,k as r,l,F as V,N as P,o as y,P as j,a2 as N,h as k,t as x,u as H}from"./index-BCdxernO.js";import{A as K}from"./apiCommon-DQdCmI3G.js";import{d as z,k as G,g as m}from"./common-Ctgf_4Dl.js";import{e as J}from"./exportToExcel-BIsrPQTg.js";const Q={getWorkOrderList:async w=>{try{return(await B.post("/workOrder/getWorkOrderList",w)).data}catch(s){throw s.response}}},X=["onClick"],Y=["onClick"],oe={__name:"WorkOrderList",setup(w){const{userId:s}=E(),O=P(),f=c(""),h=c([]),g=c([]),a=T({strDate:"",toDate:"",areaCd:"",itemName:"",itemCd:"",cutomerName:"",userId:s}),C=c([{title:"일자-No",key:"workOrderDateSeq",align:"center",width:"100px"},{title:"구역",key:"areaName",align:"center",width:"120px"},{title:"품목명",key:"itemName",align:"start",width:"380px"},{title:"제조일자",key:"itemCd",align:"center",width:"120px"},{title:"주문량",key:"expectedDueDate",align:"center",width:"90px"},{title:"등록배치수",key:"orderType",align:"center",width:"80px"},{title:"납품처명",key:"clientName",align:"center",width:"200px"},{title:"담당자명",key:"managerName",align:"center",width:"100px"},{title:"비고",key:"etc",align:"center",width:"80px"}]),D=async()=>{const n={...a};n.strDate=m(a.strDate),n.toDate=m(a.toDate),h.value=await Q.getWorkOrderList(n)},L=(n,o)=>{O.push({name:"WorkOrderDetail",params:{id:n.workOrderId}})};$(async()=>{g.value=await K.getCodeList("area"),a.strDate=z(),a.toDate=G(a.strDate,1),D()});const S=()=>{J(C,WorkOrderList.value,"작업지시_목록")};return(n,o)=>{const W=r("v-breadcrumbs"),b=r("v-date-input"),U=r("v-select"),p=r("v-text-field"),i=r("v-btn"),u=r("v-col"),A=r("v-form"),_=r("v-row"),M=r("v-card-text"),R=r("v-card"),q=r("v-spacer"),F=r("v-data-table");return y(),v(V,null,[e(W,{items:["MES","작업지시","작업지시조회"],class:"custom-breadcrumbs"}),e(R,{class:"pa-1",style:{height:"60px"}},{default:l(()=>[e(M,null,{default:l(()=>[e(_,null,{default:l(()=>[e(A,{ref_key:"srhForm",ref:f,onSubmit:j(D,["prevent"])},{default:l(()=>[e(u,{class:"d-flex flex-row ga-3"},{default:l(()=>[e(b,{modelValue:a.strDate,"onUpdate:modelValue":o[0]||(o[0]=t=>a.strDate=t),label:"시작일자","display-format":N(m),density:"compact",variant:"underlined","prepend-icon":"","append-inner-icon":"mdi-calendar",style:{width:"150px"}},null,8,["modelValue","display-format"]),e(b,{label:"종료일자",modelValue:a.toDate,"onUpdate:modelValue":o[1]||(o[1]=t=>a.toDate=t),"display-format":N(m),density:"compact",variant:"underlined","prepend-icon":"","append-inner-icon":"mdi-calendar",style:{width:"150px"}},null,8,["modelValue","display-format"]),e(U,{modelValue:a.areaCd,"onUpdate:modelValue":o[2]||(o[2]=t=>a.areaCd=t),label:"생산처(공장)",density:"compact",items:g.value,"item-title":"codeNm","item-value":"code",variant:"underlined",style:{width:"150px"}},null,8,["modelValue","items"]),e(p,{modelValue:a.itemName,"onUpdate:modelValue":o[3]||(o[3]=t=>a.itemName=t),density:"compact",label:"품목명",placeholder:"품목명을 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(p,{modelValue:a.itemCd,"onUpdate:modelValue":o[4]||(o[4]=t=>a.itemCd=t),density:"compact",label:"품목코드",placeholder:"품목코드를 입력해주세요",variant:"underlined",style:{width:"180px"}},null,8,["modelValue"]),e(p,{modelValue:a.cutomerName,"onUpdate:modelValue":o[5]||(o[5]=t=>a.cutomerName=t),density:"compact",label:"납품처명",placeholder:"납품처명을 입력해주세요",variant:"underlined",style:{width:"150px"}},null,8,["modelValue"]),e(i,{text:"조회",color:"brown-lighten-4",type:"submit"}),e(i,{text:"초기화",onClick:o[6]||(o[6]=t=>f.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),e(q),e(_,null,{default:l(()=>[e(u,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:l(()=>[e(i,{color:"brown-lighten-4",text:"신규",onClick:L}),e(i,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:S})]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(u,{class:"pa-0"},{default:l(()=>[e(F,{headers:C.value,items:h.value,density:"compact","fixed-header":"",height:"690px"},{headers:l(({columns:t})=>[k("tr",null,[(y(!0),v(V,null,H(t,d=>(y(),v("th",{key:d.key,class:"custom-header"},x(d.title),1))),128))])]),"item.workOrderDateSeq":l(({item:t,index:d})=>[k("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:I=>n.selectRowClick(t,d)},x(t.workOrderDateSeq),9,X)]),"item.itemName":l(({item:t,index:d})=>[k("div",{style:{cursor:"pointer","text-decoration":"underline",width:"95%"},onClick:I=>n.selectRowClick(t,d)},x(t.workOrderDateSeq),9,Y)]),_:1},8,["headers","items"])]),_:1})]),_:1})],64)}}};export{oe as default};
