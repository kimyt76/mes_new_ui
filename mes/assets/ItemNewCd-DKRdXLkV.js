import{r,u as q,a as W,k as z,q as b,v as H,m as J,A as p,c as K,f as w,g as t,d as m,w as o,F as O,e as Q,o as X,j as Z,i as C}from"./index-CSVU4KnH.js";import{A as g}from"./apiItem-CBVF2Qf0.js";import{m as ee,i as te,t as le,p as I,f as U}from"./common-Vxxi2eVn.js";import{C as ae}from"./CustomerListPop-C1Aq26HV.js";import"./format-CBpsKyOP.js";import"./apiBase-CUE3DEwQ.js";const oe=["id"],ie={class:"d-flex ga-4 justify-end"},ce={__name:"ItemNewCd",setup(ne){const c=r(!1),P=Q(),{vError:k,vSuccess:M,vInfo:T,vWarning:L}=q(),{userId:h}=W(),v=r([]),y=r([]),f=r([]),V=r([]),x=r([]),E=[{text:"사용",value:"Y"},{text:"미사용",value:"N"}],e=z({itemCd:"",itemName:"",itemTypeCd:"",itemCategory1:"",itemCategory2:"",unit:"",spec:"",inPrice:"",outPrice:"",customerCd:"",customerName:"",itemGrp1:"",itemGrp2:"",etc:"",useYn:"Y",userId:h});b(()=>e.itemTypeCd,async n=>{e.itemCd=null,e.itemName=null,y.value=[],f.value=[],e.itemCategory1=null,e.itemCategory2=null,n==="M1"?(y.value=await p.getCodeList("order_cate"),f.value=await p.getCodeList("raw_item")):n==="M4"&&(y.value=await g.getProdLList())}),b(()=>e.itemCategory1,async n=>{e.itemTypeCd==="M4"&&(f.value=await g.getProdMList(n))}),H(async()=>{e.itemCategory1&&e.itemCategory2&&(e.itemCd=await ee(e.itemTypeCd,e.itemCategory1,e.itemCategory2),te(e.itemName)&&(e.itemName=le(e.itemTypeCd)))}),J(async()=>{v.value=await p.getCodeList("ITEM_TYPE_CD"),v.value=v.value.filter(n=>["M1","M4"].includes(n.code)),V.value=await p.getCodeList("ITEM_GRP1"),x.value=await p.getCodeList("ITEM_GRP2")});const G=async()=>{await g.getItemCdCheck(e.itemCd)==="Y"?L("중복된 품목코드입니다."):T("사용가능한 품목코드입니다.")},S=()=>{c.value=!0},Y=n=>{e.customerCd=n.customerCd,e.customerName=n.customerName},A=async()=>{try{const n={...e},l=await g.saveItemInfo(n);M(l),N()}catch{k("저장에 실패했습니다.")}},N=()=>{P.push({name:"ItemList"})};return(n,l)=>{const B=m("v-breadcrumbs"),R=m("v-card-item"),u=m("v-select"),i=m("v-col"),_=m("v-btn"),s=m("v-row"),d=m("v-text-field"),D=m("v-form"),F=m("v-card-text"),$=m("v-card"),j=m("v-dialog");return X(),K(O,null,[w("div",{id:n.$attrs.id},null,8,oe),t(B,{items:["MES","기본관리","품목코드 신규(N)"]}),t($,null,{default:o(()=>[t(R),t(F,null,{default:o(()=>[t(D,{onSubmit:Z(A,["prevent"])},{default:o(()=>[t(s,null,{default:o(()=>[t(i,{style:{height:"60px"}},{default:o(()=>[t(u,{modelValue:e.itemTypeCd,"onUpdate:modelValue":l[0]||(l[0]=a=>e.itemTypeCd=a),label:"품목구분",items:v.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),t(i,{style:{height:"60px"}},{default:o(()=>[t(u,{modelValue:e.itemCategory1,"onUpdate:modelValue":l[1]||(l[1]=a=>e.itemCategory1=a),label:"대분류",items:y.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),t(i,{style:{height:"60px"}},{default:o(()=>[t(u,{modelValue:e.itemCategory2,"onUpdate:modelValue":l[2]||(l[2]=a=>e.itemCategory2=a),label:"중분류",items:f.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),t(i,{style:{height:"60px"}},{default:o(()=>[t(_,{text:"중복확인",density:"compact",onClick:G})]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(i,{cols:"3",style:{height:"60px"}},{default:o(()=>[t(d,{modelValue:e.itemCd,"onUpdate:modelValue":l[3]||(l[3]=a=>e.itemCd=a),label:"품목코드",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),t(i,{cols:"9",style:{height:"60px"}},{default:o(()=>[t(d,{modelValue:e.itemName,"onUpdate:modelValue":l[4]||(l[4]=a=>e.itemName=a),label:"품목명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(i,{style:{height:"60px"}},{default:o(()=>[t(d,{modelValue:e.customerName,"onUpdate:modelValue":l[5]||(l[5]=a=>e.customerName=a),label:"거래처명",variant:"underlined",density:"compact","append-inner-icon":"mdi-magnify","onClick:appendInner":S},null,8,["modelValue"])]),_:1}),t(i,{style:{height:"60px"}},{default:o(()=>[t(u,{modelValue:e.itemGrp1,"onUpdate:modelValue":l[6]||(l[6]=a=>e.itemGrp1=a),label:"거래유형",items:V.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),t(i,{style:{height:"60px"}},{default:o(()=>[t(u,{modelValue:e.itemGrp2,"onUpdate:modelValue":l[7]||(l[7]=a=>e.itemGrp2=a),label:"제품유형",items:x.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),t(i,{style:{height:"60px"}},{default:o(()=>[t(d,{modelValue:e.unit,"onUpdate:modelValue":l[8]||(l[8]=a=>e.unit=a),label:"단위",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(i,null,{default:o(()=>[t(d,{modelValue:e.spec,"onUpdate:modelValue":l[9]||(l[9]=a=>e.spec=a),label:"SPEC",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),t(i,null,{default:o(()=>[t(d,{"model-value":C(U)(e.inPrice),label:"입고단가",variant:"underlined",density:"compact","onUpdate:modelValue":l[10]||(l[10]=a=>e.inPrice=C(I)(a))},null,8,["model-value"])]),_:1}),t(i,null,{default:o(()=>[t(d,{"model-value":C(U)(e.outPrice),label:"출고단가",variant:"underlined",density:"compact","onUpdate:modelValue":l[11]||(l[11]=a=>e.outPrice=C(I)(a))},null,8,["model-value"])]),_:1}),t(i,{style:{height:"60px"}},{default:o(()=>[t(u,{modelValue:e.useYn,"onUpdate:modelValue":l[12]||(l[12]=a=>e.useYn=a),label:"사용유무",items:E,"item-title":"text","item-value":"value",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(i,{style:{height:"60px"}},{default:o(()=>[t(d,{modelValue:e.etc,"onUpdate:modelValue":l[13]||(l[13]=a=>e.etc=a),label:"비고",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(s,null,{default:o(()=>[t(i,null,{default:o(()=>[w("div",ie,[t(_,{color:"indigo-darken-4",text:"저장",variant:"tonal",type:"submit"}),t(_,{text:"목록",variant:"tonal",onClick:N})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(j,{modelValue:c.value,"onUpdate:modelValue":l[15]||(l[15]=a=>c.value=a),"max-width":"800px",height:"800px",persistent:""},{default:o(()=>[t(ae,{onSelected:Y,onCloseDialog:l[14]||(l[14]=a=>c.value=!1)})]),_:1},8,["modelValue"])],64)}}};export{ce as default};
