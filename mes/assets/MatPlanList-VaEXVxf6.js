import{a as $,s as j}from"./index-Z2YNGKhZ.js";import{s as Q}from"./index-BdHtouln.js";import{s as z}from"./index-D49h5Cbk.js";import{aa as I,K as k,A as w,W as U,i as q,o as H,l as d,h as l,P as L,p as e,G as M,a0 as p,V as E,H as S,e as R,a7 as G,F as A,U as K,t as W}from"./index-BCdxernO.js";import{s as Y}from"./index-DhHuXiFi.js";import{s as B}from"./index-WWuz9eST.js";import{s as F}from"./index-Dsa_8OmY.js";import{s as J}from"./index-BE87lW_G.js";import{A as X}from"./apiItem-B0JHHkd5.js";import{i as O,d as Z,m as ee}from"./common-Ctgf_4Dl.js";import{e as te}from"./exportToExcel-BIsrPQTg.js";import{s as T}from"./index-CEOpAmiF.js";import{s as le}from"./index-BGn1OEmN.js";import{_ as ae}from"./FormatFiled-DaFp4UAA.js";import{A as oe}from"./apiOrders-LBbh7QBG.js";import"./index-CKfU0QJd.js";import"./index-CLRf2YcQ.js";const se={getMatPlanList:async x=>{try{return(await I.post("/mat/getMatPlanList",x)).data}catch(n){throw n.response}},getMatPlanInfo:async x=>{try{return(await I.get(`/mat/getMatPlanInfo/${x}`)).data}catch(n){throw n.response}},saveMatPlanList:async x=>{var n;try{return(await I.post("/mat/saveMatPlanList",x)).data}catch(h){throw new Error((n=h.response)==null?void 0:n.data)}}},ne={class:"flex flex-column h-full"},ie={class:"search-section"},de={class:"search-field"},re={class:"search-field"},ce={class:"search-field"},me={class:"list-section mt-3"},ue={class:"list-wrapper"},pe={class:"flex gap-2 justify-end pt-3"},fe={__name:"MatContractListPop",emits:["confirm","close"],setup(x,{emit:n}){const h=n,_=w([]),f=w([]),y=U({poNo:"",itemCd:"",itemName:""}),V=async()=>{const s={...y};f.value=await oe.getContractList(s)},C=()=>{_.value.length&&h("confirm",_.value)};return(s,m)=>{const v=ae,i=M,t=j,u=$,b=T;return H(),q(b,{style:{width:"79rem",height:"48rem"}},{content:d(()=>[l("div",ne,[l("div",ie,[l("form",{onSubmit:L(V,["prevent"]),class:"search-form"},[l("div",de,[e(v,{modelValue:y.poNo,"onUpdate:modelValue":m[0]||(m[0]=a=>y.poNo=a),type:"text",label:"PO No.",style:{width:"150px"}},null,8,["modelValue"])]),l("div",re,[e(v,{modelValue:y.itemCd,"onUpdate:modelValue":m[1]||(m[1]=a=>y.itemCd=a),type:"text",label:"품목코드",style:{width:"150px"}},null,8,["modelValue"])]),l("div",ce,[e(v,{modelValue:y.itemName,"onUpdate:modelValue":m[2]||(m[2]=a=>y.itemName=a),type:"text",label:"품목명",style:{width:"250px"}},null,8,["modelValue"])]),e(i,{label:"검색",icon:"pi pi-search",severity:"secondary",type:"submit",class:"search-button"})],32)]),l("div",me,[l("div",ue,[e(u,{selection:_.value,"onUpdate:selection":m[3]||(m[3]=a=>_.value=a),ref:"dt",value:f.value,dataKey:"poNo",paginator:"",rows:20,rowsPerPageOptions:[20,30,40],tableStyle:"table-layout: fixed; width: 100%",columnResizeMode:"fit",class:"my-table h-full",scrollable:"",scrollHeight:"flex",showGridlines:""},{default:d(()=>[e(t,{selectionMode:"multiple",headerStyle:"width: 3rem",pt:{columnHeaderContent:"justify-center"}}),e(t,{field:"poNo",header:"PO No",style:p([{width:"140px"},{"text-align":"center"}]),pt:{columnHeaderContent:"justify-center"}}),e(t,{field:"itemCd",header:"품목코드",style:p([{width:"120px"},{"text-align":"center"}]),pt:{columnHeaderContent:"justify-center"}}),e(t,{field:"itemName",header:"품목명",style:p([{width:"460px"},{"text-align":"left"}]),pt:{columnHeaderContent:"justify-center"}}),e(t,{field:"clientName",header:"고객사명",style:p([{width:"200px"},{"text-align":"left"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}}),e(t,{field:"qty",header:"수량",style:p([{width:"100px"},{"text-align":"center"}]),pt:{columnHeaderContent:"justify-center"}})]),_:1},8,["selection","value"])])]),l("div",pe,[e(i,{label:"선택",class:"btn-use",onClick:C}),e(i,{label:"닫기",onClick:m[4]||(m[4]=a=>h("close"))})])])]),_:1})}}},ye=k(fe,[["__scopeId","data-v-cf019a1b"]]),he={class:"flex flex-column h-full"},_e={class:"search-section"},we={class:"search-field"},xe={class:"list-section mt-3"},ve={class:"list-wrapper"},be={class:"flex gap-2 justify-end pt-3"},ge={__name:"MatPlanDetailPop",setup(x){const n=w(!1),h=E("dialogRef"),_=w(null),f=w([]),y=()=>{n.value=!0},V=()=>{n.value=!1},C=i=>{Array.isArray(i)&&s(i)},s=i=>{const t=i.map((u,b)=>({matRegDate:"",poNo:u.poNo,itemCd:u.itemCd,itemName:u.itemName,clientName:u.clientName,qty:u.qty,matInstructionQty:0,matPlanDate:"",clientId:""}));f.value.length>0?f.value.push(...t):f.value=[...t]},m=async()=>{console.log("1번재 matPlanList",f),f.value=await se.saveMatPlanList(f.value),v()};S(async()=>{O(h.value)});const v=()=>{h.value.close()};return(i,t)=>{const u=M,b=F,a=j,N=le,g=$,D=B,P=T,r=G;return H(),R(A,null,[e(P,{style:{width:"97rem",height:"30rem"}},{content:d(()=>[l("div",he,[l("div",_e,[l("div",we,[e(u,{label:"주문서",severity:"secondary",onClick:y,class:"search-button"})])]),l("div",xe,[l("div",ve,[e(g,{ref_key:"dt",ref:_,value:f.value,dataKey:"matPlanId",tableStyle:"table-layout: fixed; width: 100%",columnResizeMode:"fit",class:"my-table h-full",scrollable:"",scrollHeight:"flex",showGridlines:""},{default:d(()=>[e(a,{field:"matRegDate",header:"일자",style:p([{width:"120px"},{"text-align":"center"}]),pt:{columnHeaderContent:"justify-center"}},{body:d(c=>[e(b,{modelValue:c.data.matRegDate,"onUpdate:modelValue":o=>c.data.matRegDate=o,showIcon:!1,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(a,{field:"poNo",header:"PO No.",style:p([{width:"140px"},{"text-align":"center"}]),pt:{columnHeaderContent:"justify-center"}}),e(a,{field:"itemCd",header:"품목코드",style:p([{width:"120px"},{"text-align":"center"}]),pt:{columnHeaderContent:"justify-center"}}),e(a,{field:"itemName",header:"품목명",style:p([{width:"350px"},{"text-align":"left"}]),bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}}),e(a,{field:"clientName",header:"고객사",style:p([{width:"200px"},{"text-align":"center"}]),pt:{columnHeaderContent:"justify-center"}}),e(a,{field:"qty",header:"수량",style:p([{width:"130px"},{"text-align":"right"}]),pt:{columnHeaderContent:"justify-center"}}),e(a,{field:"matInstructionQty",header:"제조지시수량",style:p([{width:"130px"},{"text-align":"center"}]),pt:{columnHeaderContent:"justify-center"}},{body:d(c=>[e(N,{modelValue:c.data.matInstructionQty,"onUpdate:modelValue":o=>c.data.matInstructionQty=o,class:"w-full",min:0,maxFractionDigits:0,useGrouping:!0,inputStyle:{width:"120px","text-align":"right"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(a,{field:"matPlanDate",header:"제조예정일",style:p([{width:"120px"},{"text-align":"center"}]),pt:{columnHeaderContent:"justify-center"}},{body:d(c=>[e(b,{modelValue:c.data.matPlanDate,"onUpdate:modelValue":o=>c.data.matPlanDate=o,showIcon:!1,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value"]),e(a,{field:"etc",header:"비고",style:{width:"130px"},pt:{columnHeaderContent:"justify-center"}},{body:d(c=>[e(D,{modelValue:c.data.etc,"onUpdate:modelValue":o=>c.data.etc=o,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})])]),l("div",be,[e(u,{label:"저장",class:"btn-save",onClick:m}),e(u,{label:"닫기",onClick:v})])])]),_:1}),e(r,{visible:n.value,"onUpdate:visible":t[0]||(t[0]=c=>n.value=c),header:"주문서 조회",modal:"",draggable:!1,resizable:!1,breakpoints:{},style:{width:"80rem",maxWidth:"80rem"},contentStyle:{height:"38rem",overflow:"hidden"}},{default:d(()=>[e(ye,{onConfirm:C,onClose:V})]),_:1},8,["visible"])],64)}}},Ce=k(ge,[["__scopeId","data-v-8200102c"]]),Ve={class:"flex flex-wrap gap-3 items-end"},Ne={class:"flex items-center justify-end gap-2 mb-2"},De={class:"flex flex-col mt-2"},Pe=["onClick"],Ie={__name:"MatPlanList",setup(x){const n=w(null),h=K(),_=w([]),f=w([]),y=w({icon:"pi pi-home"}),V=async()=>{const i={...s};_.value=await X.getItemList(i)};S(async()=>{s.toDate=Z(),s.strDate=ee(s.toDate)});const C=i=>{let t="신규";O(i)||(t="상세"),h.open(Ce,{props:{header:"예상제조계획("+t+")",modal:!0,maximizable:!1,draggable:!0,style:{overflow:"hidden"},pt:{root:{style:{overflow:"hidden"}},content:{style:{overflow:"hidden"}}}},data:{id:i},onClose:u=>{}})},s=U({strDate:"",toDate:"",itemName:"",itemCd:"",customerName:""}),m=w([{label:"제조관리"},{label:"예상제조계획"}]),v=()=>{var t;const i=((t=n.value)==null?void 0:t.columns)??[];if(!i.length){console.warn("No Columns Found");return}te(_.value,"예상제조계획 리스트",i)};return(i,t)=>{const u=J,b=F,a=B,N=Y,g=M,D=z,P=Q,r=j,c=$;return H(),R(A,null,[e(u,{home:y.value,model:m.value},null,8,["home","model"]),l("form",{onSubmit:L(V,["prevent"]),class:"space-y-4"},[e(P,null,{default:d(()=>[e(D,{class:"mt-2 mb-2 w-full"},{start:d(()=>[l("div",Ve,[e(b,{showIcon:!0,modelValue:s.strDate,"onUpdate:modelValue":t[0]||(t[0]=o=>s.strDate=o),class:"w-11rem"},null,8,["modelValue"]),e(b,{showIcon:!0,modelValue:s.toDate,"onUpdate:modelValue":t[1]||(t[1]=o=>s.toDate=o),class:"w-11rem"},null,8,["modelValue"]),e(N,null,{default:d(()=>[e(a,{modelValue:s.itemCd,"onUpdate:modelValue":t[2]||(t[2]=o=>s.itemCd=o),class:"w-13rem"},null,8,["modelValue"]),t[6]||(t[6]=l("label",null,"품목코드",-1))]),_:1}),e(N,null,{default:d(()=>[e(a,{modelValue:s.itemName,"onUpdate:modelValue":t[3]||(t[3]=o=>s.itemName=o),class:"w-20rem"},null,8,["modelValue"]),t[7]||(t[7]=l("label",null,"품목명",-1))]),_:1}),e(N,null,{default:d(()=>[e(a,{modelValue:s.customerName,"onUpdate:modelValue":t[4]||(t[4]=o=>s.customerName=o),class:"w-18rem"},null,8,["modelValue"]),t[8]||(t[8]=l("label",null,"거래처명",-1))]),_:1}),e(g,{label:"검색",icon:"pi pi-search",severity:"secondary",class:"w-6rem"})])]),_:1})]),_:1})],32),l("div",Ne,[e(g,{label:"신규",class:"btn-new",onClick:C}),e(g,{label:"소요량",class:"btn-use"}),e(g,{label:"삭제",class:"btn-del"}),e(g,{label:"엑셀",icon:"pi pi-file-excel",severity:"success",onClick:v})]),l("div",De,[e(c,{ref_key:"dt",ref:n,modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=o=>f.value=o),value:_.value,dataKey:"itemCd",paginator:"",rows:20,rowsPerPageOptions:[20,30,40],scrollable:"",scrollHeight:"650px",showGridlines:"",class:"my-table",tableStyle:"min-width: 120rem; table-layout: fixed;",pt:{column:{headerContent:{class:"header-center"}}}},{default:d(()=>[e(r,{selectionMode:"multiple",headerStyle:"width: 3rem"}),e(r,{field:"matRegDate",header:"일자",style:{width:"120px"},pt:{columnHeaderContent:"justify-center"}}),e(r,{field:"poNo",header:"PO No",style:{width:"120px"}}),e(r,{field:"customerName",header:"거래처",style:p([{width:"210px"},{"text-align":"left"}])}),e(r,{field:"itemCd",header:"품목코드",style:{width:"130px"},pt:{columnHeaderContent:"justify-center"}}),e(r,{field:"itemName",header:"품목명",frozen:"",style:{width:"400px"},bodyClass:"break-words",pt:{columnHeaderContent:"justify-center"}},{body:d(o=>[l("div",{onClick:$e=>C(o.data.matOrdeId),class:"clickable-cell"},W(o.data.itemName),9,Pe)]),_:1}),e(r,{field:"qty",header:"수량",style:{width:"120px"}}),e(r,{field:"matInstructionQty",header:"제조지시수량",style:{width:"160px"}}),e(r,{field:"matCompleteQty",header:"제조완료수량",style:{width:"160px"}}),e(r,{field:"residualMatQty",header:"잔량제조량",style:{width:"160px"}}),e(r,{field:"matPlanDate",header:"제조예정일",style:{width:"120px"}}),e(r,{field:"etc",header:"비고",style:{width:"150px"}}),e(r,{field:"completeYn",header:"완료",style:{width:"70px"}})]),_:1},8,["modelValue","value"])])],64)}}},Ge=k(Ie,[["__scopeId","data-v-2f510ce5"]]);export{Ge as default};
