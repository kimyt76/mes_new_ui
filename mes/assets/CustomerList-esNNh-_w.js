import{_ as z,r as c,a as H,u as W,m as X,n as q,d,b as Y,o as N,w as a,g as e,p as J,c as D,F as j,j as K,f as m,t as p,x as Q,y as Z}from"./index-BNL3Tgw5.js";import{A as E}from"./apiBase-CSC4uJMW.js";import{A as I}from"./apiCommon-LY9rUrf-.js";import{e as ee}from"./exportToExcel-Kkbtezxo.js";import{_ as te}from"./UserListPop-DEkQwN6k.js";import{l as le}from"./lodash-DR4aaNSv.js";import"./_commonjsHelpers-CZnAS8i4.js";const oe={__name:"CustomerDetailPop",props:{title:{type:String},id:{type:String},mode:{type:String}},emits:"saved",setup(O,{emit:f}){const g=c(!1),{userId:G,memberNm:b}=H(),{vError:C,vInfo:w,vWarning:T}=W(),i=f,_=O,y=c([]),x=c([]),V=c([]),l=X({customerType:"",customerName:"",customerCd:"",memberCd:"",memberName:"",customerGrp1:"",customerGrp2:"",userId:G}),M=async()=>{try{const r={...l},t=await E.saveCustomerInfo(r);i("saved",t),i("close-dialog")}catch(r){C(r.message)}};q(async()=>{if(y.value=await I.getCodeList("CUSTOMER_TYPE"),x.value=await I.getCodeList("CUSTOMER_GRP1"),V.value=await I.getCodeList("CUSTOMER_GRP2"),_.mode==="U"){const r=await E.getCustomerInfo(_.id);Object.assign(l,r)}else l.memberName=b});const L=(r,t)=>{l.memberCd=r,l.memberName=t},A=async()=>{await E.getCheckCustomerCd(l.customerCd)==="N"?w("사용할 수 있는 번호입니다."):(T("사용할 수 없는 번호입니다."),l.customerCd="")},P=()=>{g.value=!0};return(r,t)=>{const $=d("v-card-item"),h=d("v-select"),s=d("v-col"),u=d("v-text-field"),k=d("v-btn"),v=d("v-row"),S=d("v-form"),B=d("v-card-text"),F=d("v-spacer"),R=d("v-card-actions"),n=d("v-dialog"),U=d("v-card");return N(),Y(U,null,{default:a(()=>[e($,{title:_.title},null,8,["title"]),e(B,null,{default:a(()=>[e(S,{ref:"vform"},{default:a(()=>[e(v,{class:"mt-3"},{default:a(()=>[e(s,null,{default:a(()=>[e(h,{modelValue:l.customerType,"onUpdate:modelValue":t[0]||(t[0]=o=>l.customerType=o),label:"거래처구분",items:y.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(s,null,{default:a(()=>[e(u,{modelValue:l.customerCd,"onUpdate:modelValue":t[1]||(t[1]=o=>l.customerCd=o),label:"사업자번호",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[_.mode==="N"?(N(),Y(k,{key:0,text:"중복확인",onClick:A})):J("",!0)]),_:1}),e(s,{cols:"6"},{default:a(()=>[e(u,{modelValue:l.customerName,"onUpdate:modelValue":t[2]||(t[2]=o=>l.customerName=o),label:"상호명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,null,{default:a(()=>[e(s,null,{default:a(()=>[e(u,{modelValue:l.memberName,"onUpdate:modelValue":t[3]||(t[3]=o=>l.memberName=o),label:"담당자",variant:"underlined",density:"compact","append-inner-icon":"mdi-magnify","onClick:appendInner":P},null,8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(u,{modelValue:l.businessType,"onUpdate:modelValue":t[4]||(t[4]=o=>l.businessType=o),label:"업태",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(u,{modelValue:l.businessItem,"onUpdate:modelValue":t[5]||(t[5]=o=>l.businessItem=o),label:"종목",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(u,{modelValue:l.president,"onUpdate:modelValue":t[6]||(t[6]=o=>l.president=o),label:"대표자명",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,null,{default:a(()=>[e(s,null,{default:a(()=>[e(u,{modelValue:l.tel,"onUpdate:modelValue":t[7]||(t[7]=o=>l.tel=o),label:"전화",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(u,{modelValue:l.fax,"onUpdate:modelValue":t[8]||(t[8]=o=>l.fax=o),label:"팩스",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(u,{modelValue:l.presidentTel,"onUpdate:modelValue":t[9]||(t[9]=o=>l.presidentTel=o),label:"휴대폰",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(u,{modelValue:l.email,"onUpdate:modelValue":t[10]||(t[10]=o=>l.email=o),label:"이메일",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,null,{default:a(()=>[e(s,{cols:"3"},{default:a(()=>[e(u,{modelValue:l.customerManager,"onUpdate:modelValue":t[11]||(t[11]=o=>l.customerManager=o),label:"거래처담당자",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,{cols:"3"},{default:a(()=>[e(u,{modelValue:l.customerManagerTel,"onUpdate:modelValue":t[12]||(t[12]=o=>l.customerManagerTel=o),label:"담당자핸드폰",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(h,{modelValue:l.customerGrp1,"onUpdate:modelValue":t[13]||(t[13]=o=>l.customerGrp1=o),label:"그룹유형1",items:x.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1}),e(s,null,{default:a(()=>[e(h,{modelValue:l.customerGrp2,"onUpdate:modelValue":t[14]||(t[14]=o=>l.customerGrp2=o),label:"그룹유형2",items:V.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(v,null,{default:a(()=>[e(s,{cols:"3"},{default:a(()=>[e(u,{modelValue:l.zipCode,"onUpdate:modelValue":t[15]||(t[15]=o=>l.zipCode=o),label:"우편번호",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,{cols:"9"},{default:a(()=>[e(u,{modelValue:l.address,"onUpdate:modelValue":t[16]||(t[16]=o=>l.address=o),label:"주소",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,null,{default:a(()=>[e(s,{cols:"6"},{default:a(()=>[e(u,{modelValue:l.searchText,"onUpdate:modelValue":t[17]||(t[17]=o=>l.searchText=o),label:"검색창내용",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:a(()=>[e(u,{modelValue:l.memo,"onUpdate:modelValue":t[18]||(t[18]=o=>l.memo=o),label:"비고",variant:"underlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1}),e(R,null,{default:a(()=>[e(F),e(k,{color:"indigo-darken-4",text:"저장",variant:"tonal",depressed:"",onClick:M}),e(k,{text:"닫기",variant:"tonal",onClick:t[19]||(t[19]=o=>i("close-dialog"))})]),_:1}),e(n,{modelValue:g.value,"onUpdate:modelValue":t[21]||(t[21]=o=>g.value=o),height:"700",width:"900px",persistent:""},{default:a(()=>[e(te,{onSelected:L,onCloseDialog:t[20]||(t[20]=o=>g.value=!1)})]),_:1},8,["modelValue"])]),_:1})}}},ae=z(oe,[["__scopeId","data-v-dfbe371b"]]),ne={class:"d-flex ga-4"},se={class:"d-flex ga-4 justify-end"},de={style:{height:"30px"}},ue={style:{width:"50px",height:"30px","text-align":"center",cursor:"pointer"}},re={style:{width:"80px",height:"30px","text-align":"center"}},me=["onClick"],ie={style:{width:"210px",height:"30px","text-align":"left"}},ce={style:{width:"70px",height:"30px","text-align":"center"}},pe={style:{width:"110px",height:"30px","text-align":"center"}},ve={style:{width:"110px",height:"30px","text-align":"center"}},_e={style:{width:"90px",height:"30px","text-align":"center"}},fe={style:{width:"120px",height:"30px","text-align":"center"}},ge={style:{width:"110px",height:"30px","text-align":"center"}},ye={style:{width:"80px",height:"30px","text-align":"center"}},xe={__name:"CustomerList",setup(O){const f=c(!1),{vError:g,vSuccess:G}=W(),b=c(!1),C=c([]),w=c([]),T=c(""),i=X({customerType:"",customerCd:"",customerName:"",customerManager:""}),_=c([{title:"구분",key:"customerTypeName",align:"center"},{title:"사업자번호",key:"businessNo",align:"center"},{title:"거래처명",key:"customerName",align:"center"},{title:"주소",key:"address",align:"center"},{title:"대표자명",key:"president",align:"center"},{title:"전화번호",key:"tel",align:"center"},{title:"FAX",key:"fax",align:"center"},{title:"거래처담당자",key:"customerManager",align:"center"},{title:"이메일",key:"email",align:"center"},{title:"핸드폰번호",key:"customerManagerTel",align:"center"},{title:"담당자명",key:"memberName",align:"center"}]);q(async()=>{w.value=await I.getCodeList("CUSTOMER_TYPE"),y()});const y=async()=>{b.value=!0;try{const r={...i};C.value=await E.getCustomerList(r)}catch(r){g("조회 실패 : "+r.message)}finally{b.value=!1}},x=c(""),V=c(""),l=c(""),M=r=>{le.isEmpty(r)?(l.value="거래처 신규",x.value="N",V.value=""):(l.value="거래처 상세",x.value="U",V.value=r),f.value=!0},L=r=>{G(r),y()},A=()=>{ee(_,C.value,"거래처_목록")},P=()=>{T.value.reset()};return(r,t)=>{const $=d("v-breadcrumbs"),h=d("v-select"),s=d("v-text-field"),u=d("v-btn"),k=d("v-form"),v=d("v-col"),S=d("v-row"),B=d("v-card"),F=d("v-data-table"),R=d("v-dialog");return N(),D(j,null,[e($,{items:["MES","기본관리","거래처 관리"]}),e(B,{class:"pa-1",style:{height:"60px"}},{default:a(()=>[e(S,null,{default:a(()=>[e(v,null,{default:a(()=>[e(k,{ref_key:"srhForm",ref:T,onSubmit:K(y,["prevent"])},{default:a(()=>[m("div",ne,[e(h,{modelValue:i.customerType,"onUpdate:modelValue":t[0]||(t[0]=n=>i.customerType=n),label:"거래처구분",items:w.value,"item-title":"codeNm","item-value":"code",variant:"underlined",density:"compact"},null,8,["modelValue","items"]),e(s,{modelValue:i.customerName,"onUpdate:modelValue":t[1]||(t[1]=n=>i.customerName=n),density:"compact",label:"거래처명",placeholder:"거래처명 입력해주세요",variant:"underlined"},null,8,["modelValue"]),e(s,{modelValue:i.customerCd,"onUpdate:modelValue":t[2]||(t[2]=n=>i.customerCd=n),density:"compact",label:"거래처코드",placeholder:"거래처코드를 입력해주세요",variant:"underlined"},null,8,["modelValue"]),e(s,{modelValue:i.customerManager,"onUpdate:modelValue":t[3]||(t[3]=n=>i.customerManager=n),density:"compact",label:"거래처담당자",placeholder:"거래처담당자를 입력해주세요",variant:"underlined"},null,8,["modelValue"]),e(u,{color:"#EFEBE9",type:"submit",text:"조회"}),e(u,{class:"mr-2",text:"초기화",onClick:P})])]),_:1},512)]),_:1})]),_:1})]),_:1}),e(S,{class:"mb-1"},{default:a(()=>[e(v,null,{default:a(()=>[m("div",se,[e(u,{color:"brown-lighten-4",class:"mt-3",text:"신규",onClick:t[4]||(t[4]=n=>M())}),e(u,{class:"mt-3 mr-3 excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:A})])]),_:1})]),_:1}),e(F,{headers:_.value,items:C.value,loading:b.value,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요","items-per-page":15,style:{height:"700px"}},{headers:a(({columns:n})=>[m("tr",null,[(N(!0),D(j,null,Q(n,U=>(N(),D("th",{key:U.key,class:"custom-header",style:Z([{height:"30px"},{textAlign:"center"}])},p(U.title),1))),128))])]),item:a(({item:n})=>[m("tr",de,[m("td",ue,p(n.customerTypeName),1),m("td",re,p(n.businessNo),1),m("td",{style:{width:"200px",height:"30px","text-decoration":"underline",cursor:"pointer"},onClick:U=>M(n.customerCd)},p(n.customerName),9,me),m("td",ie,p(n.address),1),m("td",ce,p(n.president),1),m("td",pe,p(n.tel),1),m("td",ve,p(n.fax),1),m("td",_e,p(n.customerManager),1),m("td",fe,p(n.email),1),m("td",ge,p(n.customerManagerTel),1),m("td",ye,p(n.memberName),1)])]),_:1},8,["headers","items","loading"]),e(R,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=n=>f.value=n),"max-width":"900px","max-height":"800px",persistent:""},{default:a(()=>[e(ae,{id:V.value,mode:x.value,title:l.value,onSaved:L,onCloseDialog:t[5]||(t[5]=n=>f.value=!1)},null,8,["id","mode","title"])]),_:1},8,["modelValue"])],64)}}},we=z(xe,[["__scopeId","data-v-488d0aea"]]);export{we as default};
