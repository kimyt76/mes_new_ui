import{_ as R,a as $,r as i,m as G,n as z,c as f,g as t,d as n,w as l,F as I,e as H,o as x,j as J,h,t as r,i as T,f as L,v as K}from"./index-Be8ZRtMe.js";import{e as O}from"./exportToExcel-Kkbtezxo.js";import{A as Q}from"./apiItem-B0_6p2jT.js";import{A as M}from"./apiCommon-B9fwy2tv.js";import{f as Y,i as W}from"./common-IBXzpVzr.js";import"./_commonjsHelpers-CZnAS8i4.js";import"./format-CBpsKyOP.js";const X=["onClick"],Z={__name:"ItemList",setup(ee){const{userId:P}=$(),d=H(),p=i(!1),g=i(null),_=i([]),m=i(null),w=i([]),C=i([]),s=G({itemTypeCd:"",itemName:"",itemCd:"",customerName:"",useYn:"",userId:P}),b=i([{title:"품목",key:"itemTypeName",align:"start",width:"80px"},{title:"품목코드",key:"itemCd",align:"center",width:"100px"},{title:"품목명",key:"itemName",align:"start",width:"250px"},{title:"단위",key:"unit",align:"center",width:"70px"},{title:"규격",key:"spec",align:"center",width:"100px"},{title:"구매처",key:"customerName",align:"left",width:"200px"},{title:"입고단가",key:"inPrice",align:"end",width:"100px"},{title:"출고단가",key:"outPrice",align:"end",width:"100px"},{title:"제품유형",key:"itemGrp2Name",align:"center",width:"110px"},{title:"사용",key:"useYn",align:"center",width:"70px"}]),A=()=>{if(W(m.value))d.push({name:"ItemNewCd"});else{const o=m.value[0].itemCd,a=m.value[0].itemTypeCd;a==="M4"?d.push({name:"ItemSubCd",query:{id:o,type:a}}):["M0","M3","M5","M6"].includes(a)&&d.push({name:"ItemThird",query:{id:o,type:a}})}},S=(o,a)=>{d.push({name:"ItemDetail",params:{id:o.itemCd}})},k=async()=>{try{p.value=!0;const o={...s};_.value=await Q.getItemList(o)}catch{}finally{p.value=!1}};z(async()=>{w.value=await M.getCodeList("item_Type_Cd"),C.value=await M.getCodeList("use_yn"),k()});const U=()=>{O(b,_.value,"품목정보_목록")};return(o,a)=>{const E=n("v-breadcrumbs"),N=n("v-select"),V=n("v-text-field"),c=n("v-btn"),v=n("v-col"),F=n("v-form"),y=n("v-row"),j=n("v-card-text"),B=n("v-card"),q=n("v-spacer"),D=n("v-data-table");return x(),f(I,null,[t(E,{items:["MES","기본관리","품목관리"],class:"custom-breadcrumbs"}),t(B,{class:"pa-1",style:{height:"60px"}},{default:l(()=>[t(j,null,{default:l(()=>[t(y,null,{default:l(()=>[t(F,{ref_key:"srhForm",ref:g,onSubmit:J(k,["prevent"])},{default:l(()=>[t(v,{class:"d-flex ga-4"},{default:l(()=>[t(N,{modelValue:s.itemTypeCd,"onUpdate:modelValue":a[0]||(a[0]=e=>s.itemTypeCd=e),label:"품목구분",density:"compact",items:w.value,"item-title":"codeNm","item-value":"code",variant:"underlined",style:{width:"150px"}},null,8,["modelValue","items"]),t(V,{modelValue:s.itemName,"onUpdate:modelValue":a[1]||(a[1]=e=>s.itemName=e),label:"품목명",placeholder:"품목명을 입력해주세요",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue"]),t(V,{modelValue:s.customerName,"onUpdate:modelValue":a[2]||(a[2]=e=>s.customerName=e),label:"거래처명",placeholder:"거래처명을 입력해주세요",variant:"underlined",density:"compact",style:{width:"150px"}},null,8,["modelValue"]),t(N,{modelValue:s.useYn,"onUpdate:modelValue":a[3]||(a[3]=e=>s.useYn=e),label:"사용여부",density:"compact",items:C.value,"item-title":"codeNm","item-value":"code",variant:"underlined",style:{width:"150px"}},null,8,["modelValue","items"]),t(c,{text:"조회",color:"brown-lighten-4",type:"submit"}),t(c,{text:"초기화",onClick:a[4]||(a[4]=e=>g.value.reset())})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),t(q),t(y,null,{default:l(()=>[t(v,{class:"d-flex justify-end align-center mr-2",style:{gap:"10px","margin-top":"10px"}},{default:l(()=>[t(c,{color:"brown-lighten-4",text:"신규",onClick:A}),t(c,{class:"excel-btn",text:"엑셀","prepend-icon":"mdi-microsoft-excel",onClick:U})]),_:1})]),_:1}),t(y,null,{default:l(()=>[t(v,{class:"pa-0"},{default:l(()=>[t(D,{modelValue:m.value,"onUpdate:modelValue":a[5]||(a[5]=e=>m.value=e),headers:b.value,items:_.value,loading:p.value,"items-per-page":15,density:"compact","select-strategy":"single","show-select":"","fixed-header":"",height:"650px","return-object":"",class:"my-table"},{headers:l(({columns:e})=>[L("tr",null,[(x(!0),f(I,null,K(e,u=>(x(),f("th",{key:u.key,class:"custom-header"},r(u.title),1))),128))])]),"item.itemName":l(({item:e,index:u})=>[L("div",{style:{cursor:"pointer","text-decoration":"underline"},onClick:te=>S(e,u)},r(e.itemName),9,X)]),"item.inPrice":l(({item:e})=>[h(r(T(Y)(e.inPrice)),1)]),"item.outPrice":l(({item:e})=>[h(r(T(Y)(e.outPrice)),1)]),"item.useYn":l(({item:e})=>[h(r(e.useYn==="Y"?"사용":"미사용"),1)]),_:1},8,["modelValue","headers","items","loading"])]),_:1})]),_:1})],64)}}},re=R(Z,[["__scopeId","data-v-d0a5ad6f"]]);export{re as default};
