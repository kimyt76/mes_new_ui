import{_ as Q,u as j,r as p,k as R,d,b as Y,o as A,w as o,g as l,j as H,f as t,h as D,c as $,F as B,m as T,t as a,a as z,v as G,e as K,A as W,i as L,B as X}from"./index-CW10mm3L.js";import{t as q,d as Z}from"./common-DpSngy0r.js";import{_ as ee,a as E}from"./SingleFileUpload-D5a_nMFX.js";import{A as te}from"./apiSystem-DiYNmOy2.js";import{A as O}from"./apiOrders-Cvps6riq.js";import"./format-CBpsKyOP.js";const le={class:"d-flex ga-4 ml-4"},se={class:"d-flex ga-4 justify-end"},oe={__name:"UserListPop",emits:["selected","close-dialog"],setup(M,{emit:f}){const{vError:C}=j(),v=f,_=p(null),U=p([]),h=p(!1),s=p([{title:"No.",key:"id"},{title:"사용자ID",key:"userId"},{title:"사용자명",key:"memberNm"},{title:"부서",key:"deptNm"},{title:"직급",key:"jobPosition"}]),u=R({userId:"",memberNm:"",useYn:"Y"}),g=async()=>{h.value=!0;const V={...u};try{U.value=await te.getUserList(V)}catch(r){C(r)}finally{h.value=!1}},x=(V,r)=>{v("selected",r.item.userId,r.item.memberNm),v("close-dialog")},y=()=>{_.value.reset()};return(V,r)=>{const S=d("v-card-item"),w=d("v-text-field"),b=d("v-btn"),i=d("v-form"),e=d("v-col"),I=d("v-row"),N=d("v-data-table"),k=d("v-card");return A(),Y(k,{class:"pa-3"},{default:o(()=>[l(S,{title:"사용자 조회"}),l(I,null,{default:o(()=>[l(e,{style:{height:"20px",padding:"3px"}},{default:o(()=>[l(i,{ref_key:"srhForm",ref:_,onSubmit:H(g,["prevent"])},{default:o(()=>[t("div",le,[l(w,{modelValue:u.memberNm,"onUpdate:modelValue":r[0]||(r[0]=m=>u.memberNm=m),density:"compact",label:"사용자명",placeholder:"사용자명을 입력해주세요",variant:"underlined"},null,8,["modelValue"]),l(w,{modelValue:u.userId,"onUpdate:modelValue":r[1]||(r[1]=m=>u.userId=m),density:"compact",label:"사용자 ID",placeholder:"사용자 ID를 입력해주세요",variant:"underlined"},null,8,["modelValue"]),l(b,{color:"#EFEBE9",text:"조회",type:"submit"}),l(b,{class:"mr-3",text:"초기화",onClick:y},{default:o(()=>r[3]||(r[3]=[D("초기화")])),_:1})])]),_:1},512)]),_:1})]),_:1}),l(I,null,{default:o(()=>[l(e,null,{default:o(()=>[l(N,{headers:s.value,items:U.value,loading:h.value,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요","items-per-page":15,style:{height:"400px"},"onClick:row":x},{headers:o(({columns:m})=>[t("tr",null,[(A(!0),$(B,null,T(m,c=>(A(),$("th",{key:c.key,class:"custom-header"},a(c.title),1))),128))])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),l(I,{class:"mt-10",style:{height:"70px"}},{default:o(()=>[l(e,null,{default:o(()=>[t("div",se,[l(b,{dense:"",text:"선택",color:"brown-lighten-4"}),l(b,{text:"닫기",variant:"tonal",onClick:r[2]||(r[2]=m=>v("close-dialog"))})])]),_:1})]),_:1})]),_:1})}}},ne=Q(oe,[["__scopeId","data-v-27a98f61"]]),ae={class:"d-flex justify-end"},re={class:"approval-user"},de={style:{height:"80px"}},ue={class:"approval-date"},ie={style:{height:"30px"}},me={colspan:"3"},pe={colspan:"4",style:{height:"120px","text-align":"center"}},ve={class:"d-flex ga-4 justify-end"},fe={__name:"OrderNew",setup(M){const f=p(!1),{userId:C,memberNm:v,deptNm:_}=z(),{vError:U,vSuccess:h}=j(),s=p({orderDate:q(),seq:"",customerNm:"",itemName:"",orderQty:0,dueDate:"",draftNm:"",draftDept:"",draftDate:"",draftUserId:""}),u=p({businessUserId:"",productUserId:"",purchaseUserId:"",qcUserId:"",labUserId:"",businessApprovalDate:"",productApprovalDate:"",purchaseApprovalDate:"",qcApprovalDate:"",labApprovalDate:""}),g=p(""),x=p(null),y=p(null),V=(i,e)=>{g.value=e,u.value.labUserId=i},r=async()=>{s.value.draftNm=v,s.value.draftDept=_,s.value.draftDate=q(),s.value.draftUserId=C,s.value.orderQty=Z(s.value.orderQty);const i=new FormData;i.append("orderInfo",JSON.stringify(s.value)),i.append("approval",JSON.stringify(u.value)),x.value&&i.append("orderFile",x.value),y.value&&i.append("prodFile",y.value);try{const e=await O.saveOrderInfo(i);h(e),w.push({name:"OrderList"})}catch(e){U(e.response)}};G(async()=>{s.value.seq=await O.getSeq();const i=await O.getApprovalInfo();Object.assign(u.value,i)});const S=()=>{s.value.orderQty===0&&(s.value.orderQty="")},w=K(),b=()=>{w.push({name:"OrderList"})};return(i,e)=>{const I=d("v-breadcrumbs"),N=d("v-btn"),k=d("v-table"),m=d("v-col"),c=d("v-row"),F=d("v-text-field"),P=d("v-dialog"),J=W("comma-number");return A(),$(B,null,[l(I,{items:["MES","발주관리","발주 등록"]}),l(c,{class:"flex-wrap"},{default:o(()=>[l(m,null,{default:o(()=>[t("div",ae,[l(k,{class:"approval-table"},{default:o(()=>[t("tbody",null,[e[15]||(e[15]=t("tr",null,[t("th",{style:{width:"10px"},rowspan:"3"},[D("결"),t("br"),t("br"),t("br"),D("재")]),t("th",{style:{height:"30px","text-align":"center"}},"기안자"),t("th",{style:{height:"30px","text-align":"center"}},"영업관리"),t("th",{style:{height:"30px","text-align":"center"}},"생산관리"),t("th",{style:{height:"30px","text-align":"center"}},"구매부"),t("th",{style:{height:"30px","text-align":"center"}},"품질관리"),t("th",{style:{height:"30px","text-align":"center"}},"연구소")],-1)),t("tr",re,[t("td",de,a(L(v)),1),t("td",null,[t("span",null,a(u.value.businessUserId),1)]),t("td",null,[t("span",null,a(u.value.productUserId),1)]),t("td",null,[t("span",null,a(u.value.purchaseUserId),1)]),t("td",null,[t("span",null,a(u.value.qcUserId),1)]),t("td",null,[t("span",null,a(g.value),1),l(N,{width:"20px",text:"결제자",modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=n=>g.value=n),onClick:e[1]||(e[1]=n=>f.value=!0)},null,8,["modelValue"])])]),t("tr",ue,[t("td",ie,a(s.value.orderDate),1),e[10]||(e[10]=t("td",{style:{height:"30px"}},"결제일자",-1)),e[11]||(e[11]=t("td",{style:{height:"30px"}},"결제일자",-1)),e[12]||(e[12]=t("td",{style:{height:"30px"}},"결제일자",-1)),e[13]||(e[13]=t("td",{style:{height:"30px"}},"결제일자",-1)),e[14]||(e[14]=t("td",{style:{height:"30px"}},"결제일자",-1))])])]),_:1})])]),_:1})]),_:1}),l(c,null,{default:o(()=>[l(m,null,{default:o(()=>[l(k,{class:"order-table"},{default:o(()=>[t("tbody",null,[t("tr",null,[e[16]||(e[16]=t("th",null,"문서번호",-1)),t("td",null,a(s.value.orderDate)+" - "+a(s.value.seq),1),e[17]||(e[17]=t("th",null,"처리기한",-1)),e[18]||(e[18]=t("td",null,"즉시",-1))]),t("tr",null,[e[19]||(e[19]=t("th",null,"보존년한",-1)),e[20]||(e[20]=t("td",null,"5년",-1)),e[21]||(e[21]=t("th",null,"기안일자",-1)),t("td",null,a(s.value.orderDate),1)]),t("tr",null,[e[22]||(e[22]=t("th",null,"기안부서",-1)),t("td",null,a(L(_)),1),e[23]||(e[23]=t("th",null,"기안자",-1)),t("td",null,a(L(v)),1)]),t("tr",null,[e[24]||(e[24]=t("th",null,"제목",-1)),t("td",me,a(s.value.customerNm)+"   "+a(s.value.itemName)+"    발주서 및 제품 사양서 검토 요청의 건 ",1)]),t("tr",null,[t("td",pe,[D(a(s.value.customerNm)+"    "+a(s.value.itemName)+"    발주서 및 제품 사양서 기안하오니 검토하여 주시기 바랍니다.",1),e[25]||(e[25]=t("br",null,null,-1)),e[26]||(e[26]=t("br",null,null,-1)),e[27]||(e[27]=D(" - 아 래- "))])]),t("tr",null,[e[28]||(e[28]=t("th",null,"고객사명",-1)),t("td",null,[l(F,{modelValue:s.value.customerNm,"onUpdate:modelValue":e[2]||(e[2]=n=>s.value.customerNm=n),style:{width:"500px",height:"20px"},density:"compact",class:"mb-4",label:"고객사명"},null,8,["modelValue"])]),e[29]||(e[29]=t("th",null,"품목",-1)),t("td",null,[l(F,{modelValue:s.value.itemName,"onUpdate:modelValue":e[3]||(e[3]=n=>s.value.itemName=n),style:{width:"500px",height:"20px","vertical-align":"center"},density:"compact",class:"mb-4",label:"품명"},null,8,["modelValue"])])]),t("tr",null,[e[30]||(e[30]=t("th",null,"발주수량",-1)),t("td",null,[X(l(F,{modelValue:s.value.orderQty,"onUpdate:modelValue":e[4]||(e[4]=n=>s.value.orderQty=n),density:"compact",style:{width:"500px",height:"20px","text-align":"right"},class:"mb-4",label:"발주수량",onClick:S},null,8,["modelValue"]),[[J]])]),e[31]||(e[31]=t("th",null,"납기일자",-1)),t("td",null,[l(ee,{modelValue:s.value.dueDate,"onUpdate:modelValue":e[5]||(e[5]=n=>s.value.dueDate=n),title:"납기일자",style:{width:"500px",height:"20px","vertical-align":"middle"},class:"mb-10"},null,8,["modelValue"])])]),t("tr",null,[e[32]||(e[32]=t("th",null,"발주서 첨부파일",-1)),t("td",null,[l(E,{modelValue:x.value,"onUpdate:modelValue":e[6]||(e[6]=n=>x.value=n),style:{height:"20px",width:"500px"},class:"mb-4"},null,8,["modelValue"])]),e[33]||(e[33]=t("th",null,"제품사양서",-1)),t("td",null,[l(E,{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=n=>y.value=n),style:{height:"20px",width:"500px"},class:"mb-4"},null,8,["modelValue"])])])])]),_:1})]),_:1})]),_:1}),l(c,null,{default:o(()=>[l(m,null,{default:o(()=>[t("div",ve,[l(N,{text:"저장",class:"gt-2",color:"brown-lighten-4",onClick:r}),l(N,{text:"목록",class:"mr-3",onClick:b})])]),_:1})]),_:1}),l(P,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=n=>f.value=n),height:"700",width:"900px",persistent:""},{default:o(()=>[l(ne,{onSelected:V,onCloseDialog:e[8]||(e[8]=n=>f.value=!1)})]),_:1},8,["modelValue"])],64)}}},he=Q(fe,[["__scopeId","data-v-bab94e5a"]]);export{he as default};
