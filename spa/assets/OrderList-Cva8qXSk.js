import{n as L,r as u,p as S,q as I,d,c as M,o as N,g as e,f as C,w as l,s as B,h as g,_ as P,u as $,k as q,v as z,F as A,e as G,j as H,m as J,t as K}from"./index-CW10mm3L.js";import{A as Q}from"./apiOrders-Cvps6riq.js";import{e as W}from"./exportToExcel-BTkYpchh.js";import{f as _}from"./format-CBpsKyOP.js";import{f as X,t as Y}from"./common-DpSngy0r.js";const Z={class:"d-flex align-center date-picker-wrapper mt-2"},ee={__name:"DateRangePicker",props:{fromDate:{},fromDateModifiers:{},toDate:{},toDateModifiers:{}},emits:["update:fromDate","update:toDate"],setup(U){const p=L(U,"fromDate"),c=L(U,"toDate"),v=u(p.value||""),r=u(_(new Date,"yyyy-MM-dd")),s=u(!1),f=u(c.value||""),m=u(_(new Date,"yyyy-MM-dd")),D=u(!1),k=()=>{r.value=""},b=()=>{m.value=""},h=n=>{v.value=n,r.value=_(new Date(n),"yyyy-MM-dd"),s.value=!1,p.value=r.value},F=n=>{f.value=n,m.value=_(new Date(n),"yyyy-MM-dd"),D.value=!1,c.value=m.value};return S(v,n=>{n&&(r.value=_(new Date(n),"yyyy-MM-dd"))}),S(f,n=>{n&&(m.value=_(new Date(n),"yyyy-MM-dd"))}),I(()=>{p.value&&(v.value=p.value,r.value=_(new Date(p.value),"yyyy-MM-dd"),p.value=r.value),c.value&&(f.value=c.value,m.value=_(new Date(c.value),"yyyy-MM-dd"),c.value=m.value)}),(n,a)=>{const y=d("v-text-field"),t=d("v-icon"),w=d("v-btn"),V=d("v-date-picker"),x=d("v-menu");return N(),M("div",Z,[e(y,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value=o),label:"시작일",mask:"date",density:"compact",width:"120px",height:"40px",onClick:k,style:{"max-width":"120px"}},null,8,["modelValue"]),e(x,{modelValue:s.value,"onUpdate:modelValue":a[2]||(a[2]=o=>s.value=o),"close-on-content-click":!1,location:"bottom start"},{activator:l(({props:o})=>[e(w,B(o,{icon:"",variant:"text",class:"calendar-icon-btn"}),{default:l(()=>[e(t,null,{default:l(()=>a[6]||(a[6]=[g("mdi-calendar")])),_:1})]),_:2},1040)]),default:l(()=>[e(V,{modelValue:v.value,"onUpdate:modelValue":[a[1]||(a[1]=o=>v.value=o),h],"hide-header":!0},null,8,["modelValue"])]),_:1},8,["modelValue"]),a[8]||(a[8]=C("span",{class:"mr-2 mb-3"},"~",-1)),e(y,{modelValue:m.value,"onUpdate:modelValue":a[3]||(a[3]=o=>m.value=o),label:"종료일",density:"compact",width:"120px",onClick:b,style:{"max-width":"200px"}},null,8,["modelValue"]),e(x,{modelValue:D.value,"onUpdate:modelValue":a[5]||(a[5]=o=>D.value=o),"close-on-content-click":!1,location:"bottom start","offset-y":""},{activator:l(({props:o})=>[e(w,B(o,{icon:"",variant:"text",class:"calendar-icon-btn"}),{default:l(()=>[e(t,null,{default:l(()=>a[7]||(a[7]=[g("mdi-calendar")])),_:1})]),_:2},1040)]),default:l(()=>[e(V,{modelValue:f.value,"onUpdate:modelValue":[a[4]||(a[4]=o=>f.value=o),F],"hide-header":!0},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}},te={class:"d-flex ga-3"},ae={class:"d-flex ga-4 justify-end"},le={style:{height:"20px"}},oe={__name:"OrderList",setup(U){const{vError:p}=$(),c=G(),v=u(X()),r=u(Y()),s=q({fromDate:"",toDate:"",customerNm:null,itemName:null,draftNm:null}),f=u(!1),m=u(null),D=u([]),k=async()=>{f.value=!0,s.fromDate=v.value,s.toDate=r.value;try{const y={...s};D.value=await Q.getOrderList(y)}catch(y){p("조회중 오류가 발생하였습니다."+y)}finally{f.value=!1}},b=u([{title:"기안일자",key:"draftDate",align:"center"},{title:"문서번호",key:"orderNm",align:"center"},{title:"고객사명",key:"customerNm",align:"center"},{title:"품목명",key:"itemName",align:"center"},{title:"기안자",key:"draftNm",align:"center"}]),h=()=>{c.push("/order/orderNew")},F=(y,t)=>{c.push({name:"OrderDetail",params:{id:t.item.orderId}})},n=()=>{m.value.reset()},a=()=>{W(b,D.value,"발주_목록")};return z(k),(y,t)=>{const w=d("v-breadcrumbs"),V=d("v-text-field"),x=d("v-btn"),o=d("v-form"),E=d("v-col"),O=d("v-row"),R=d("v-card"),j=d("v-data-table");return N(),M(A,null,[e(w,{items:["MES","발주관리","발주목록"]}),e(R,{class:"pa-3",style:{height:"80px"}},{default:l(()=>[e(O,null,{default:l(()=>[e(E,null,{default:l(()=>[e(o,{ref_key:"srhForm",ref:m,onSubmit:H(k,["prevent"])},{default:l(()=>[C("div",te,[e(ee,{fromDate:v.value,"onUpdate:fromDate":t[0]||(t[0]=i=>v.value=i),toDate:r.value,"onUpdate:toDate":t[1]||(t[1]=i=>r.value=i),class:"input-align"},null,8,["fromDate","toDate"]),e(V,{modelValue:s.customerNm,"onUpdate:modelValue":t[2]||(t[2]=i=>s.customerNm=i),dense:"",density:"compact",label:"고객사명",placeholder:"고객사명을 입력해주세요",variant:"underlined"},null,8,["modelValue"]),e(V,{modelValue:s.itemName,"onUpdate:modelValue":t[3]||(t[3]=i=>s.itemName=i),dense:"",density:"compact",label:"품목명",placeholder:"품목명을 입력해주세요",variant:"underlined"},null,8,["modelValue"]),e(V,{modelValue:s.draftNm,"onUpdate:modelValue":t[4]||(t[4]=i=>s.draftNm=i),dense:"",density:"compact",label:"기안자",placeholder:"기안자명을 입력해주세요",variant:"underlined"},null,8,["modelValue"]),e(x,{color:"#EFEBE9",class:"mt-3",type:"submit"},{default:l(()=>t[5]||(t[5]=[g("조회")])),_:1}),e(x,{class:"mt-3",onClick:n},{default:l(()=>t[6]||(t[6]=[g("초기화")])),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1}),e(O,{class:"mb-1",style:{height:"70px"}},{default:l(()=>[e(E,null,{default:l(()=>[C("div",ae,[e(x,{dense:"",color:"brown-lighten-4",class:"mt-3",onClick:h},{default:l(()=>t[7]||(t[7]=[g("신규")])),_:1}),e(x,{class:"mt-3 mr-3",onClick:a},{default:l(()=>t[8]||(t[8]=[g("엑셀")])),_:1})])]),_:1})]),_:1}),e(j,{headers:b.value,items:D.value,loading:f.value,"no-data-text":"데이터가 없습니다.","loading-text":"조회중입니다 잠시만 기다려주세요","items-per-page":25,"onClick:row":F},{headers:l(({columns:i})=>[C("tr",le,[(N(!0),M(A,null,J(i,T=>(N(),M("th",{key:T.key,class:"custom-header",style:{height:"40px","text-align":"center"}},K(T.title),1))),128))])]),_:1},8,["headers","items","loading"])],64)}}},me=P(oe,[["__scopeId","data-v-fd85ec3f"]]);export{me as default};
